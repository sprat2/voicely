if (self.CavalryLogger) { CavalryLogger.start_js(["NJNsp"]); }

__d("AdPageMessageTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble"};}),null);
__d("ComposedEntityMutabilityToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MUTABLE","1":"IMMUTABLE","2":"SEGMENTED"};}),null);
__d("ComposedEntityTypeToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MENTION","1":"LINK","2":"IMAGE","3":"VIDEO","4":"EMOTICON","5":"TOKEN","6":"HASHTAG","7":"IMPLICIT_LINK","8":"EMBED","9":"EMOJI"};}),null);
__d("MessageShareType",[],(function a(b,c,d,e,f,g){f.exports={IMAGE:"image",PLATFORM_SHARE_CTA:"platform_share_CTA"};}),null);
__d("MNCommerceBlockTypeJSInstance",[],(function a(b,c,d,e,f,g){f.exports={ALL:"all",PROMOTION:"promotion",NONE:"none"};}),null);
__d("MNCommerceErrors",[],(function a(b,c,d,e,f,g){f.exports={ALREADY_UNLINKED:1893001};}),null);
__d("MNCommerceLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={RECEIVE_API_LATENCY:"receive_api_latency",NLP_API_LATENCY:"nlp_api_latency",NLP_API_FAILED:"nlp_api_failed",EVENTS_PUSH_SUCCESS:"events_push_success",EVENTS_PUSH_FAILED:"events_push_failed",ENTITY_CONFIGURATION_ERROR:"entity_configuration_error",ENTITY_SUBSCRIPTION_SUCCESS:"entity_subscribed",ENTITY_UNSUBSCRIPTION_SUCCESS:"entity_unsubscribed",ENTITY_UNSUBSCRIPTION_FAILED:"entity_unsubscribe_request_failed",ENTITY_SUBSCRIPTION_FAILED:"entity_subscribe_request_failed",APP_TO_PAGE_ASSOC_DELETE_FAILED:"app_to_page_assoc_delete_failed",APP_TO_PAGE_ASSOC_SET_FAILED:"app_to_page_assoc_delete_failed",TAO_EXCEPTION:"tao_exception",IRIS_SUBSCRIPTION_NOTIFY:"iris_subscription_notify",RECEIVE_API_E2E_HANDLER_FAILURE:"receive_api_e2e_handler_failure",SKIPPED_STALE_DELTA_NEW_MESSAGE:"skipped_stale_delta_new_message",CHECK_INTERNAL_URI_FAILED:"check_internal_uril_failed",REMOVE_ALERT_ERROR:"remove_alert_error",SET_ALERT_ERROR:"set_alert_error",SEND_API_ERROR:"send_api_error",SEND_API_LATENCY:"send_api_latency",SEND_MESSAGE_WITH_AUDIO:"send_message_with_audio",SEND_MESSAGE_WITH_FILE:"send_message_with_file",SEND_MESSAGE_WITH_IMAGE:"send_message_with_image",SEND_MESSAGE_WITH_TEXT:"send_message_with_text",SEND_MESSAGE_WITH_VIDEO:"send_message_with_video",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",SEND_MESSAGE_INNER_FAILURE:"send_message_inner_failure",SEND_MESSAGE_WITH_AD_TEXT:"send_ad_message_with_text",SEND_MESSAGE_WITH_AD_ATTACHMENT:"send_ad_message_with_attachment",UPLOAD_API_ERROR:"upload_api_error",ID_CONVERSION_ERROR:"id_conversion_error",ID_CONVERSION_SUCCESS:"id_conversion_success",GIF_UPLOAD:"gif_upload",HIGH_MPS_ON:"high_mps_on",HIGH_MPS_OFF:"high_mps_off",USER_PROFILE_API_FAILED:"user_profile_api_failed",RECEIVE_MESSAGE_WITH_TEXT:"receive_message_with_text",RECEIVE_MESSAGE_WITH_IMAGE:"receive_message_with_image",RECEIVE_MESSAGE_WITH_VIDEO:"receive_message_with_video",RECEIVE_MESSAGE_WITH_AUDIO:"receive_message_with_audio",RECEIVE_MESSAGE_WITH_FILE:"receive_message_with_file",RECEIVE_MESSAGE_WITH_ATTACHMENT:"receive_message_with_attachment",PAGE_PROMETHEUS_STATUS_NOTIFICATION:"page_prometheus_status_notification",GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",APP_ID_FETCH_FAILURE:"app_id_fetch_failure",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLATFORM_PLUGIN_PAGE_APP_ID_MISMATCH:"platform_plugin_page_app_id_mismatch",RESET_MESSAGING_WINDOW_SUCCESS:"reset_messaging_window_success",RESET_MESSAGING_WINDOW_FAILURE:"reset_messaging_window_failure",SEND_TO_MESSENGER_RENDERED:"send_to_messenger_rendered",SEND_TO_MESSENGER_CLICKED:"send_to_messenger_clicked",SEND_TO_MESSENGER_OPT_IN:"send_to_messenger_opt_in",SEND_TO_MESSENGER_ID_DELIVERY_FAILURE:"send_to_messenger_id_delivery_failure",SEND_TO_MESSENGER_UNSUPPORTED_APP:"send_to_messenger_unsupported_app",SEND_TO_MESSENGER_ERROR:"send_to_messenger_error",MESSAGE_US_RENDERED:"message_us_rendered",MESSAGE_US_CLICKED:"message_us_clicked",MESSAGE_US_ERROR:"message_us_error",MESSENGER_PRECHECKED_ERROR:"messenger_prechecked_error",MESSENGER_PRECHECKED_RENDERED:"messenger_prechecked_rendered",MESSENGER_PRECHECKED_HIDDEN:"messenger_prechecked_hidden",MESSENGER_PRECHECKED_LOGIN:"messenger_prechecked_login",MESSENGER_PRECHECKED_NOTYOU:"messenger_prechecked_notyou",MESSENGER_PRECHECKED_CHECKED:"messenger_prechecked_checked",MESSENGER_PRECHECKED_UNCHECKED:"messenger_prechecked_unchecked",MESSENGER_PRECHECKED_PIXEL_ERROR:"messenger_prechecked_pixel_error",MESSENGER_PRECHECKED_PIXEL_INVALID_APP_ID:"messenger_prechecked_pixel_invalid_app_id",MESSENGER_PRECHECKED_PIXEL_NO_APP_SUBSCRIPTION:"messenger_prechecked_pixel_no_app_subscription",MESSENGER_PRECHECKED_PIXEL_ENT_NOT_FOUND:"messenger_prechecked_pixel_ent_not_found",MESSENGER_PRECHECKED_PIXEL_USER_MISMATCH:"messenger_prechecked_pixel_user_mismatch",MESSENGER_PRECHECKED_PIXEL_INVALID_PLUGIN_STATE:"messenger_prechecked_pixel_invalid_plugin_state",MESSENGER_PRECHECKED_PIXEL_EVENT_SAVED:"messenger_prechecked_pixel_event_saved",MESSENGER_PRECHECKED_PIXEL_WEBHOOK_EVENT_SENT:"messenger_prechecked_pixel_webhook_event_sent",MESSENGER_PRECHECKED_API_ENT_NOT_FOUND:"messenger_prechecked_api_ent_not_found",MESSENGER_PRECHECKED_API_INVALID_USER_ID:"messenger_prechecked_api_invalid_user_id",MESSENGER_PRECHECKED_API_INVALID_PLUGIN_STATE:"messenger_prechecked_api_invalid_plugin_state",MESSENGER_PRECHECKED_API_PIXEL_NOT_FIRED:"messenger_prechecked_api_pixel_not_fired",MESSENGER_PRECHECKED_API_USER_MATCH_SUCCEEDED:"messenger_prechecked_api_user_match_succeeded",MESSENGER_PRECHECKED_API_ADMIN_MESSAGE_SENT:"messenger_prechecked_api_admin_message_sent",MESSENGER_PRECHECKED_API_ERROR:"messenger_prechecked_api_error",PLUGIN_ID_MATCH_INITIATED:"plugin_id_match_initiated",PLUGIN_ID_MATCH_FAILED:"plugin_id_match_failed",PLUGIN_ID_MATCH_NO_LOGGED_IN_USER:"plugin_id_match_no_logged_in_user",PLUGIN_ID_MATCH_HAS_NAME_MATCH:"plugin_id_match_has_name_match",PLUGIN_ID_MATCH_NO_NAME_MATCH:"plugin_id_match_no_name_match",PLUGIN_ID_MATCH_HAS_EMAIL_MATCH:"plugin_id_match_has_email_match",PLUGIN_ID_MATCH_NO_EMAIL_MATCH:"plugin_id_match_no_email_match",PLUGIN_ID_MATCH_HAS_MATCH:"plugin_id_match_has_match",PLUGIN_ID_MATCH_NO_MATCH:"plugin_id_match_no_match",PLUGIN_ID_MATCH_ERROR:"plugin_id_match_error",ECOMMERCE_OPT_IN:"ecommerce_opt_in",ECOMMERCE_OPT_IN_EVENT_DELIVERED:"ecommerce_opt_in_event_delivered",ECOMMERCE_OPT_OUT:"ecommerce_opt_out",ECOMMERCE_OPT_OUT_EVENT_DELIVERED:"ecommerce_opt_out_event_delivered",ECOMMERCE_ERROR:"ecommerce_error",AUTH_MUTATION_SUCCEEDED:"auth_mutation_succeeded",AUTH_MUTATION_ERROR:"auth_mutation_error",AUTH_MUTATION_NEW_MODEL_ATTEMPT:"auth_mutation_new_model_attempt",AUTH_BITMASK_MUTATION_SUCCEEDED:"auth_bitmask_mutation_succeeded",AUTH_BITMASK_MUTATION_ERROR:"auth_bitmask_mutation_error",PERMISSIONS_DOUBLE_WRITE_SUCCEEDED:"permissions_double_write_succeeded",PERMISSIONS_DOUBLE_WRITE_ERROR:"permissions_double_write_error",CTA_RESET_24HR_WINDOW_SUCCESS:"cta_reset_24hr_window_success",CTA_RESET_24HR_WINDOW_FAILURE:"cta_reset_24hr_window_failure",THREAD_DELETION_REVOKE_SUCCESS:"thread_deletion_revoke_success",THREAD_DELETION_REVOKE_FAILURE:"thread_deletion_revoke_failure",COMMERCE_TOKEN_CONVERSION_REQUESTED:"commerce_token_conversion_requested",COMMERCE_TOKEN_CONVERSION_INVALID_TOKEN:"commerce_token_conversion_invalid_token",COMMERCE_TOKEN_CONVERSION_USER_NOT_LINKED:"commerce_token_conversion_user_not_linked",COMMERCE_TOKEN_CONVERSION_NO_THREAD:"commerce_token_conversion_no_thread",COMMERCE_TOKEN_CONVERSION_PSID_GENEREATED:"commerce_token_conversion_psid_genereated",COMMERCE_TOKEN_CONVERSION_FAILURE:"commerce_token_conversion_failure",EXTENSIONS_DRAWER_LIST_ADD_REQUEST:"extensions_drawer_list_add_request",EXTENSIONS_DRAWER_LIST_ADD_SUCCESS:"extensions_drawer_list_add_success",EXTENSIONS_DRAWER_LIST_FETCH_FAILED:"extensions_drawer_list_fetch_failed",EXTENSIONS_DRAWER_LIST_FETCH_REQUEST:"extensions_drawer_list_fetch_request",EXTENSIONS_DRAWER_LIST_FETCH_SUCCESS:"extensions_drawer_list_fetch_succes",EXTENSIONS_DRAWER_DELTA_SEND_IGNORED:"extensions_drawer_delta_send_ignored",EXTENSIONS_DRAWER_DELTA_SEND_FAILED:"extensions_drawer_delta_send_failed",EXTENSIONS_DRAWER_DELTA_SEND_REQUEST:"extensions_drawer_delta_send_request",EXTENSIONS_DRAWER_DELTA_SEND_SUCCESS:"extensions_drawer_delta_send_success",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",PLUGIN_MESSAGE_US_CLICK:"plugin_message_us_click",LAST_DIGITS_PLUGIN_ERROR_PARSING_MESSAGE:"last_digits_plugin_error_parsing_message",LAST_DIGITS_PLUGIN_ERROR_UNAUTHORIZED_DOMAIN:"last_digits_plugin_error_unauthorized_domain",LAST_DIGITS_PLUGIN_VERIFICATION_RESULT:"last_digits_plugin_verification_result",LAST_DIGITS_PLUGIN_MESSAGE_RECEIVED:"last_digits_plugin_message_received",LAST_DIGITS_PLUGIN_MESSAGE_POSTED:"last_digits_plugin_message_posted",SIMPLE_LINK_PLUGIN_IMPRESSION:"simple_link_plugin_impression",SIMPLE_LINK_PLUGIN_UNCHECKED:"simple_link_plugin_unchecked",SIMPLE_LINK_PLUGIN_LINKED:"simple_link_plugin_linked",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_BLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_block_all_log_message_exception",SEND_UNBLOCK_ALL_LOG_MESSAGE_EXCEPTION:"send_unblock_all_log_message_exception",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",PLATFORM_SUBSCRIPTION_LAST_USER_SENT_MESSAGE_UPDATED:"platform_subscription_last_user_sent_message_updated",PLATFORM_SUBSCRIPTION_EXTRA_MESSAGE_COUNT_UPDATED:"platform_subscription_extra_message_count_updated",PLATFORM_SUBSCRIPTION_STATE_MUTATION_FAILED:"platform_subscription_state_mutation_failed",PLATFORM_SUBSCRIPTION_ASSOC_NOT_FOUND:"platform_subscription_assoc_not_found",PLATFORM_SUBSCRIPTION_MESSAGE_WITHIN_ONE_DAY:"platform_subscription_message_within_one_day",PLATFORM_SUBSCRIPTION_WHITELISTED_TEMPLATE:"platform_subscription_whitelisted_template",PLATFORM_SUBSCRIPTION_PERMISSION_CHECK:"platform_subscription_permission_check",PLATFORM_TAGS_SUCCESS:"platform_tags_success",PLATFORM_TAGS_FAILURE:"platform_tags_failure",PLATFORM_TAGS_BAD_PAGE:"platform_tags_bad_page",QR_CODES_API_CALL:"qr_codes_api_call",QR_CODES_API_SUCCESS:"qr_codes_api_success",QR_CODES_API_FAILURE:"qr_codes_api_failure",QR_CODES_API_STANDARD_WITH_REF:"qr_codes_api_standard_with_ref",QR_CODES_API_STANDARD_WITHOUT_REF:"qr_codes_api_standard_without_ref",QR_CODES_NEW_GRAPHQL_ATTEMPT:"qr_codes_new_graphql_attempt",QR_CODES_NEW_GRAPHQL_INVALID_HASH:"qr_codes_new_graphql_invalid_hash",QR_CODES_NEW_GRAPHQL_LEGACY_CODE_SUCCESS:"qr_codes_new_graphql_legacy_code_success",QR_CODES_NEW_GRAPHQL_PARAMETRIC_CODE_SUCCESS:"qr_codes_new_graphql_parametric_code_success",QR_CODES_NEW_GRAPHQL_EXCEPTION:"qr_codes_new_graphql_exception",QR_CODES_LEGACY_GRAPHQL_ATTEMPT:"qr_codes_legacy_graphql_attempt",QR_CODES_LEGACY_GRAPHQL_SUCCESS:"qr_codes_legacy_graphql_success",QR_CODES_LEGACY_GRAPHQL_EXCEPTION:"qr_codes_legacy_graphql_exception",QR_CODES_LEGACY_GRAPHQL_INVALID_HASH:"qr_codes_legacy_graphql_invalid_hash",QR_CODES_LEGACY_GRAPHQL_FALLBACK_LOGIC:"qr_codes_legacy_graphql_fallback_logic",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",PROMOTIONAL_MESSAGE:"promotionalmessage",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate",AIRLINE_BOARDINGPASS:"airlineboardingpass",BILL_PAYMENT_REQUEST:"billpaymentrequest",SIMPLE_LINK_WITH_STATE:"simplelinkwithstate",BUSINESS_MESSAGE:"businessmessage",MARK_SPAM:"spam",ACCOUNT_UNLINK_SUCCESS:"account_unlink_success",ACCOUNT_UNLINK_FAILURE:"account_unlink_failure",ACCOUNT_UNLINK_UNKNOWN_FAILURE:"account_unlink_unknown_failure",ACCOUNT_UNLINK_FORCE_FAILURE:"account_unlink_force_failure",ACCOUNT_UNLINK_NO_WEBHOOK_SUBSCRIPTION:"account_unlink_no_webhook_subscription",ACCOUNT_LINK_SUCCESS:"account_link_success",ACCOUNT_LINK_FAILURE:"account_link_failure",ACCOUNT_LINK_NO_WEBHOOK_SUBSCRIPTION:"account_link_no_webhook_subscription",ACCOUNT_LINK_UNKNOWN_FAILURE:"account_link_unknown_failure",ACCOUNT_LINK_NO_AUTHORIZATION_CODE:"account_link_no_authorization_code",ACCOUNT_LINK_INVALID_NONCE:"account_link_invalid_nonce",ACCOUNT_LINKING_URL_DELETE_FAILED:"account_linking_url_delete_failed",ACCOUNT_LINKING_TOKEN_CREATED:"account_linking_token_created",ACCOUNT_LINK_REDIRECT_REQUEST:"account_link_redirect_request",ACCOUNT_LINK_FB_COOKIE_NOT_SET:"account_link_fb_cookie_not_set",ACCOUNT_LINK_INVALID_VIEWER_CONTEXT:"account_link_invalid_viewer_context",ACCOUNT_LINK_URI_GEN_INPROGRESS:"account_link_uri_gen_inprogress",ACCOUNT_LINK_URI_GEN_START:"account_link_uri_gen_start",ACCOUNT_LINK_URI_GEN_END:"account_link_uri_gen_end",ACCOUNT_LINK_NULL_URI:"account_link_null_uri",ACCOUNT_LINK_URI_ADD_FAILED:"account_link_uri_add_failed",ACCOUNT_LINK_USER_ID_MISMATCH:"account_link_user_id_mismatch",PROMOTION_CREATION_ATTEMPTED:"promotion_creation_attempted",PROMOTION_ENT_CREATED:"promotion_ent_created",PROMOTION_SCHEDULED:"promotion_scheduled",PROMOTION_KILLED:"promotion_killed",PROMOTION_USER_ATTEMPTED:"promotion_user_attempted",PROMOTION_USER_GK_FAILED:"promotion_user_gk_failed",PROMOTION_USER_GK_PASSED:"promotion_user_gk_passed",PROMOTION_USER_ALREADY_LINKED:"promotion_user_already_linked",PROMOTION_USER_NOT_LINKED:"promotion_user_not_linked",PROMOTION_USER_PREVIOUSLY_UNLINKED:"promotion_user_previously_unlinked",PROMOTION_USER_BLOCKED_PROMOTION:"promotion_user_blocked_promotion",PROMOTION_USER_SEND_MESSAGE_EXCEPTION:"promotion_user_send_message_exception",PROMOTION_ATOMIC_MESSAGE_SENT:"promotion_atomic_message_sent",PROMOTION_LOG_MESSAGE_SENT:"promotion_log_message_sent",PROMOTION_ROBOTEXT_SENT:"promotion_robotext_sent",PROMOTION_ATTACHMENT_SENT:"promotion_attachment_sent",PROMOTION_ASYNC_JOB_ERROR:"promotion_async_job_error",REF_SEND_SUCCESS:"referral_send_success",REF_SEND_FAILURE:"referral_send_failure",REF_SEND_NO_PSID:"referral_send_no_psid_inplace",REF_SEND_INVALID_AUTH_STATE:"referral_send_invalid_auth_state",USER_CONTROL_BLOCKED_ALL:"user_control_blocked_all",USER_CONTROL_BLOCKED_PROMOTION:"user_control_blocked_promotion",USER_CONTROL_UNBLOCKED_ALL:"user_control_unblocked_all",USER_CONTROL_UNBLOCKED_PROMOTION:"user_control_unblocked_promotion",USER_CONTROL_REPORT_AD:"user_control_report_ad",USER_CONTROL_REPORT_OTHER_ABUSE:"user_control_report_other_abuse",ACCEPT_MESSAGE_REQUEST_ACTION:"accept_message_request",IGNORE_MESSAGE_REQUEST_ACTION:"ignore_message_request",PLATFORM_REPORT_FAILURE:"platform_report_failure",PLATFORM_REPORT_SUCCEEDED:"platform_report_succeeded",PLATFORM_REPORT_ADMIN_MSG_SENT:"platform_report_admin_msg_sent",PLATFORM_REPORT_PAGE_BLOCKED:"platform_report_page_blocked",PLATFORM_REPORT_PAGE_REPORT_FAILURE:"platform_report_page_report_failure",M_SUGGESTION_CALL:"m_suggestion_call",M_SUGGESTION_ENT_CREATED:"m_suggestion_ent_created",M_SUGGESTION_LINK_IF_NECESSARY:"m_suggestion_link_if_necessary",M_SUGGESTION_SEND_MESSAGE:"m_suggestion_send_message",GEN_CANCELLATION_ENT:"gen_cancellation_ent",CANCELLATION_NOTIFICATION_READY:"cancellation_notification_ready",CANCELLATION_NOTIFICATION_SENT:"cancellation_notification_sent",LIVECHAT_HISTORY_USER_FETCH_FAILURE:"livechat_history_user_fetch_failure",LIVECHAT_HISTORY_PAGE_FETCH_FAILURE:"livechat_history_page_fetch_failure",LIVECHAT_HISTORY_API_SUCCESS:"livechat_history_api_success",LIVECHAT_HISTORY_API_FAILURE:"livechat_history_api_failure",ECOMMERCE_EVENT_CALL:"ecommerce_event_call",ECOMMERCE_EVENT_DATA_VALIDATED:"ecommerce_event_data_validated",ECOMMERCE_EVENT_SECURITY_CHECKED:"ecommerce_event_security_checked",ECOMMERCE_EVENT_MESSAGE_SENT:"ecommerce_event_message_sent",ECOMMERCE_EVENT_INVALID_SENDER:"ecommerce_event_invalid_sender",ECOMMERCE_EVENT_MULTIPLE_WELCOME_MESSAGE_NOT_ALLOWED:"ecommerce_event_multiple_welcome_message_not_allowed",ECOMMERCE_EVENT_NO_OPT_IN:"ecommerce_event_no_opt_in",ECOMMERCE_EVENT_HANDLER_EXCEPTION:"ecommerce_event_handler_exception",PROMOTION_CTA_CLICKED:"promotion_cta_clicked",ACCESS_ENT_WITHOUT_MESSAGE_ID:"access_ent_without_message_id",ACCESS_ENT_WITH_WRONG_MESSAGE_ID:"access_ent_with_wrong_message_id",ACCESS_ENT_WITHOUT_CAN_SEE_SHARE_TOKEN:"access_ent_without_can_see_share_token",ACCESS_ENT_WITH_WRONG_SHARE_ID:"access_ent_with_wrong_share_id",ACCESS_ENT_WITH_GENIE_MSG_LOOP:"access_ent_with_genie_msg_loop",BOT_SHARE_MSG_SENT:"bot_share_msg_sent",PAGE_SHARE_MSG_SENT:"page_share_msg_sent",PAGE_SHARE_MSG_FAILURE:"page_share_msg_failure",ELEMENT_SHARE_MSG_SENT:"element_share_msg_sent",EXTENSIBLE_SHARE_MSG_SENT:"extensible_share_msg_sent",SUBSCRIPTION_SHARE_MSG_SENT:"subscription_share_msg_sent",ELEMENT_SHARE_MSG_FAILURE:"element_share_msg_failure",SUBSCRIPTION_SHARE_MSG_FAILURE:"subscription_share_msg_failure",ELEMENT_SHARE_ATTACHMENT_CREATION_FAILED:"element_share_attachment_creation_failed",ELEMENT_SHARE_GET_PAGE_LINK_FAILED:"element_share_get_page_link_failed",WEBVIEW_SHARE_ATTACHMENT_CREATION_FAILED:"webview_share_attachment_creation_failed",WEBVIEW_SHARE_MSG_FAILURE:"webview_share_msg_failure",WEBVIEW_SHARE_MSG_SENT:"webview_share_msg_sent",WEBVIEW_SHARE_NULL_PAGE_ID:"webview_share_with_null_page_id",WEBVIEW_SHARE_EMPTY_TITLE:"webview_share_with_empty_title",WEBVIEW_SHARE_INVALID_BUTTON_DATA:"webview_share_with_invalid_button_data",WEBVIEW_SHARE_URL_MISSING:"webview_share_without_url_data",PAGE_ATTACHMENT_FORWARDING:"page_attachment_forwarding",BOT_ATTACHMENT_FORWARDING:"bot_attachment_forwarding",MEDIA_ATTACHMENT_FORWARDING:"media_attachment_forwarding",BOT_REVIEW_CREATION:"bot_review_creation",BOT_REVIEW_UPDATE:"bot_review_update",BOT_REVIEW_DELETION:"bot_review_deletion",BOT_REVIEW_FAILURE:"bot_review_failure",BOT_REVIEW_DEVSITE_PAGE_SKIPPED:"bot_review_devsite_page_skipped",AGGREGATE_BOT_RATING_FETCH_FAILURE:"aggregate_bot_rating_fetch_failure",AGGREGATE_BOT_RATING_INC_FAILURE:"aggregate_bot_rating_inc_failure",AGGREGATE_BOT_RATING_INC_PERM_FAILURE:"aggregate_bot_rating_inc_perm_failure",INVALID_RATING:"invalid_rating",BOT_REVIEW_ADMIN_MSG_FAILURE:"bot_review_admin_msg_failure",BOT_REVIEW_NOTIF_FAILURE:"bot_review_notification_failure",BOT_REVIEW_NOTIF_INVALID_DB_DATA:"bot_review_notification_invalid_db_data",BOT_REVIEW_NOTIF_PAGE_REVIEW_GEN_FAILURE:"bot_review_notification_page_review_gen_failure",BOT_REVIEW_NOTIF_SEND_FAILURE:"bot_review_notification_send_failure",BOT_REVIEW_NOTIF_SEND_SUCCESS:"bot_review_notification_send_success",BOT_REVIEW_NOTIF_PAGE_SEND_FAILURE:"bot_review_notification_page_send_failure",LINK_CLICK:"link_click",POSTBACK_CLICKED:"postback_cta_clicked",POSTBACK_SUCCESS:"postback_cta_success",POSTBACK_NO_WEBHOOK_SUBSCRIPTION:"postback_no_webhook_subscription",POSTBACK_SEND_FAILED:"postback_send_failed",POSTBACK_FAILED:"postback_failed",POSTBACK_INVALID_IDS:"postback_invalid_ids",COMPOSER_CTA_PAGE_GEN_FAILED:"composer_cta_page_gen_failed",COMPOSER_CTA_DOUBLE_TAPPED:"composer_cta_double_tapped",NULLSTATE_CTAS_DELETE_INITIATED:"nullstate_ctas_delete_initiated",NULLSTATE_CTAS_DELETE_FAILED:"nullstate_ctas_delete_failed",NULLSTATE_CTAS_UPDATE_INITIATED:"nullstate_ctas_update_initiated",NULLSTATE_CTAS_UPDATE_FAILED:"nullstate_ctas_update_failed",NULLSTATE_CTAS_ADDED:"nullstate_ctas_added",NULLSTATE_CTAS_UPDATED:"nullstate_ctas_updated",NULLSTATE_CTAS_DELETED:"nullstate_ctas_deleted",NULLSTATE_ATTACHMENT_CREATION_FAILED:"nullstate_attachment_creation_failed",STRUCTURED_MENU_CTAS_DELETE_INITIATED:"structured_menu_ctas_delete_initiated",STRUCTURED_MENU_CTAS_DELETE_FAILED:"structured_menu_ctas_delete_failed",STRUCTURED_MENU_CTAS_UPDATE_INITIATED:"structured_menu_ctas_update_initiated",STRUCTURED_MENU_CTAS_UPDATE_FAILED:"structured_menu_ctas_update_failed",STRUCTURED_MENU_CTAS_ADDED:"structured_menu_ctas_added",STRUCTURED_MENU_CTAS_UPDATED:"structured_menu_ctas_updated",STRUCTURED_MENU_CTAS_DELETED:"structured_menu_ctas_deleted",STRUCTURED_MENU_CTAS_MIGRATED:"structured_menu_ctas_migrated",STRUCTURED_MENU_CTAS_MIGRATION_FAILED:"structured_menu_ctas_migration_failed",V2_STRUCTURED_MENU_UPDATED:"v2_structured_menu_updated",V2_STRUCTURED_MENU_UPDATE_FAIL:"v2_structured_menu_update_fail",NULLSTATE_GREETING_UPDATE_INITIATED:"nullstate_greeting_update_initiated",NULLSTATE_GREETING_UPDATE_FAILED:"nullstate_greeting_update_failed",NULLSTATE_GREETING_DELETE_SUCCEEDED:"nullstate_greeting_delete_succeeded",NULLSTATE_GREETING_DELETE_FAILED:"nullstate_greeting_delete_failed",WHITELIST_DOMAIN_UPDATED:"whitelist_domain_updated",WHITELIST_DOMAIN_UPDATE_FAILED:"whitelist_domain_update_failed",PAYMENT_SETTING_UPDATED:"payment_setting_updated",PAYMENT_SETTING_UPDATE_FAILED:"payment_setting_update_failed",THREAD_SETTING_DELETE_FAILED:"thread_setting_delete_failed",PAYMENT_SETTING_DELETE_FAILED:"payment_setting_delete_failed",TARGET_AUDIENCE_UPDATE_FAILED:"target_audience_update_failed",TARGET_AUDIENCE_UPDATE_SUCCEEDED:"target_audience_update_succeeded",DEVX_GET_STARTED_RENDERED:"devx_get_started_rendered",DEVX_TOS_CARD_RENDERED:"devx_tos_card_rendered",DEVX_BOT_CREATION_STARTED:"devx_bot_creation_started",DEVX_BOT_CREATION_SUCCESS:"devx_bot_creation_success",DEVX_BOT_CREATION_FAIL:"devx_bot_creation_fail",DEVX_PAGE_TOKEN_CARD_RENDERED:"devx_page_token_card_rendered",DEVX_PAGE_TOKEN_CALLBACK:"devx_page_token_callback",DEVX_PAGE_TOKEN_CALLBACK_NO_PAGE:"devx_page_token_callback_no_page",DEVX_PAGE_TOKEN_CALLBACK_NO_PERMISSIONS:"devx_page_token_callback_no_permissions",DEVX_PAGE_TOKEN_GENERATED:"devx_page_token_generated",DEVX_FINITE_LENGTH_PAGE_TOKEN_GENERATED:"devx_finite_length_page_token_generated",DEVX_PAGE_TOKEN_CALLBACK_FAILED:"devx_page_token_callback_failed",DEVX_PAKE_TOKEN_POPUP_OPEN_FAILED:"devx_page_token_popup_open_failed",DEVX_UPSELL_CARD_RENDERED:"devx_upsell_card_rendered",DEVX_UPSELL_LEARN_MORE_CLICKED:"devx_upsell_learn_more_clicked",DEBUG_EVENT_FOR_SEND_MESSAGE:"debug_event_send_message",PARSE_USER_INFO_FAILURE:"parse_user_info_failure",QUICK_REPLY_FALLBACK:"quick_reply_fallback",QUICK_REPLY_DECODE_FAILED:"quick_reply_decode_failed",QUICK_REPLY_PAYLOAD_WITH_WRONG_IDS:"quick_rely_payload_with_wrong_ids",PAGE_MESSAGE_TOPICS:"page_message_topics",DELIVER_PAYMENT_TO_WEBHOOK_SUCCEED:"deliver_payment_to_webhook_succeed",DELIVER_PAYMENT_TO_WEBHOOK_FAILED:"deliver_payment_to_webhook_failed",BROADCAST_MESSAGE_API_ERROR:"broadcast_message_api_error",DELIVER_CHECKOUT_UPDATES_TO_WEBHOOK_SUCCEED:"deliver_checkout_updates_to_webhook_succeed",DELIVER_CHECKOUT_UPDATES_TO_WEBHOOK_FAILED:"deliver_checkout_updates_to_webhook_failed",PAYMENT_CHECKOUT_UPDATES_SUCCEED:"payment_checkout_updates_succeed",PAYMENT_CHECKOUT_UPDATES_FAILED:"payment_checkout_updates_failed",PAYMENT_CHARGE_CALL_SUCCEED:"payment_charge_call_succeed",PAYMENT_CHARGE_CALL_FAILED:"payment_charge_call_failed",PAYMENTS_WEB_FORM_SUCCESS:"payments_web_form_success",PAYMENTS_WEB_FORM_FAILURE:"payments_web_form_failure",PAYMENTS_WEB_FORM_APPROVED:"payments_web_form_approved",PAYMENTS_WEB_FORM_APPROVAL_FAILED:"payments_web_form_approval_failed",PAYMENTS_WEB_FORM_REQUEST_PROCESSED:"payments_web_form_request_processed",PAYMENTS_WEB_FORM_REQUEST_PROCESSING_FAILED:"payments_web_form_request_processing_failed",PAYMENTS_WEB_FORM_DEVELOPER_AGREEMENT_SENT:"payments_web_form_developer_agreement_sent",PAYMENTS_WEB_FORM_AGREEMENT_EMAIL_SENT:"payments_web_agreement_email_sent",SEARCH_POST_RANK_FAILED:"search_post_rank_failed",SEARCH_EXISTING_THREADS_FAILED:"search_existing_threads_failed",GAME_PLAY_NO_WEBHOOK_SUBSCRIPTION:"game_play_no_webhook_subscription",GAME_PLAY_PERMISSION_NOT_GRANTED:"game_play_permission_not_granted",GAME_PLAY_WEBHOOK_FAILURE:"game_play_webhook_failure",GAME_PLAY_WEBHOOK_SUCCESS:"game_play_webhook_success",GAME_POLICY_ACCESS_DENIED:"game_policy_access_denied",GAME_POLICY_ACCESS_GRANTED:"game_policy_access_granted",MESSENGER_PROFILE_DELETE_SUCCESS:"messenger_profile_delete_success",MESSENGER_PROFILE_DELETE_FAILURE:"messenger_profile_delete_failure",MESSENGER_PROFILE_INVALID_DATA:"messenger_profile_invalid_data",MESSENGER_PROFILE_UPDATE_SUCCESS:"messenger_profile_update_success",MESSENGER_PROFILE_UPDATE_FAILURE:"messenger_profile_update_failure",MESSENGER_PROFILE_HOME_URL_UPDATE_SUCCESS:"messenger_profile_home_url_update_success",MESSENGER_PROFILE_HOME_URL_UPDATE_FAILURE:"messenger_profile_home_url_update_failure",MESSENGER_PROFILE_HOME_URL_GET_SUCCESS:"messenger_profile_home_url_get_success",MESSENGER_PROFILE_HOME_URL_GET_FAILURE:"messenger_profile_home_url_get_failure",MESSENGER_PROFILE_HOME_URL_DELETE_SUCCESS:"messenger_profile_home_url_delete_success",MN_PLATFORM_THREAD_CONTEXT_SUCCESS:"mn_platform_thread_context_success",MN_PLATFORM_THREAD_CONTEXT_FAILED:"mn_platform_thread_context_failed",MESSENGER_EXTENSIONS_GET_CONTEXT_SUCCESS:"messenger_extensions_get_context_success",MESSENGER_EXTENSIONS_GET_CONTEXT_FAILURE:"messenger_extensions_get_context_failure",MESSENGER_BOT_BLOCK_FEATURE_SUCCESS:"messenger_bot_block_feature_success",MESSENGER_BOT_BLOCK_FEATURE_FAILURE:"messenger_bot_block_feature_failure",MESSENGER_BOT_UNBLOCK_FEATURE_SUCCESS:"messenger_bot_unblock_feature_success",MESSENGER_BOT_UNBLOCK_FEATURE_FAILURE:"messenger_bot_unblock_feature_failure"};}),null);
__d("MNCommerceReplyTypes",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_LINK:2,COMMERCE_UNLINK:3};}),null);
__d("P2PPaymentLogMessageSubtype",[],(function a(b,c,d,e,f,g){f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"};}),null);
__d('MercuryAudioPlayer',['Arbiter','DOM','Event','Flash'],(function a(b,c,d,e,f,g){var h=200;function i(){var r=c('DOM').create('audio'),s=false;try{if(!!r.canPlayType)if(r.canPlayType('video/mp4;').replace(/^no$/,''))s=true;}finally{return s;}}function j(){return c('Flash').isAvailable();}var k=function r(){this.interval=null;this.arbiterInstance=null;this.audio=c('DOM').create('audio');c('Event').listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),h);}.bind(this));c('Event').listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(k.prototype,{setAudio:function r(s,t){this.audio.setAttribute('src',s);this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.audio.play();this.informAttachment('played');},resume:function r(){this.audio.play();this.informAttachment('played');},pause:function r(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function r(){return 'html5';}});var l=function r(){this.src=null;this.arbiterInstance=null;var s=c('DOM').create('div');document.body.appendChild(s);this.swf=c('Flash').embed('/swf/cigars/SoundStreamPlayer.swf',s,null,{});this.interval=null;c('Arbiter').subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(l.prototype,{setAudio:function r(s,t){this.src=s;this.arbiterInstance=t;},informAttachment:function r(s,t){if(this.arbiterInstance)this.arbiterInstance.inform(s,t);},play:function r(){this.swf.playSound(this.src);this.interval=setInterval(function(){var s=this.swf.getCurrentTime();this.informAttachment('playing',s);}.bind(this),h);this.informAttachment('played');},resume:function r(){this.swf.resume();this.informAttachment('played');},pause:function r(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function r(){return 'flash';}});function m(){if(i()){return new k();}else if(j())return new l();return false;}var n=null,o=null,p=0;function q(r,s){this.src=r;this.arbiterInstance=s;this.audio_id=++p;n!==null||(n=m());if(!n)return false;}Object.assign(q.prototype,{getType:function r(){if(!n){return false;}else return n.getType();},play:function r(s){if(s&&o==this.audio_id){n.resume();}else{this.pause();o=this.audio_id;n.setAudio(this.src,this.arbiterInstance);n.play();}},pause:function r(){n.pause();}});f.exports=q;}),null);
__d('MercuryAttachmentAudioClip.react',['cssVar','cx','fbt','Arbiter','ArbiterMixin','MercuryAudioPlayer','CurrentUser','JSLogger','LeftRight.react','Link.react','MercuryShareAttachmentRenderLocations','React','SubscriptionsHandler','WorkModeConfig','joinClasses','messengerCustomColorUtils','shield'],(function a(b,c,d,e,f,g,h,i,j){var k=c('React').PropTypes,l='MercuryAttachmentAudioClip/play',m='progress-bar',n=c('JSLogger').create('mercury_audio_clip'),o=c('React').createClass({displayName:'AudioClip',mixins:[c('ArbiterMixin')],propTypes:{customColor:k.string,duration:k.number,isChat:k.bool,isFromViewer:k.bool,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),onAttachmentLoad:k.func,rootClassName:k.string,showHelp:k.bool,src:k.string.isRequired,width:k.number},getInitialState:function p(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new (c('MercuryAudioPlayer'))(this.props.src,this)};},componentDidMount:function p(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();this._subscriptionsHandler=new (c('SubscriptionsHandler'))();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',c('shield')(this.setState,this,{playing:true,started:true})),this.subscribe('paused',c('shield')(this.setState,this,{playing:false})),this.subscribe('finished',c('shield')(this.setState,this,{playing:false,started:false,time:this.props.duration})),c('Arbiter').subscribe(l,function(q,r){if(this.props.src!=r)this.setState({time:0});}.bind(this)));},componentWillUnmount:function p(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function p(q,r){this.setState({time:r});},play:function p(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);c('Arbiter').inform(l,this.props.src);if(!this.logged){this.logged=true;n.log('play',{uid:c('CurrentUser').getID(),duration:this.props.duration});}}},_formatSeconds:function p(q){if(q){q=Math.round(q);var r=q%60;if(r<10)r='0'+r;var s=Math.floor(q/60);return s+':'+r;}else return null;},_renderPlayer:function p(q,r,s){var t=this.props.isFromViewer,u=this.props.isChat,v=c('WorkModeConfig').is_work_user,w=s===m,x=u&&t&&!w,y=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,z=v?"#373e4c":"#4080ff",aa=s||z,ba={width:q};if(x)c('messengerCustomColorUtils').customBubbleStyle(aa,ba);var ca=s&&s!==m&&!u?{color:s}:{},da={};if(w)da['aria-disabled']=true;return c('React').createElement(c('Link.react'),babelHelpers['extends']({'aria-label':j._("Voice Message"),className:"_1miz"+(' '+"_2e-1")+(!y?' '+"_3_om":'')+(t&&u?' '+"_3e5f":''),role:'button',style:ba,onClick:this.play},da),c('React').createElement('span',{className:"_1mi- _2e-2"},c('React').createElement('i',{className:"_1mi_ _2e-3"})),c('React').createElement('span',{style:ca,className:"_1mj0 _2e-4 _3oh-"},r),c('React').createElement('div',{className:"_1mj1 _2e-5"}));},render:function p(){var q=this.state.time,r=this.state.playing,s=this._formatSeconds(this.state.duration),t=this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER,u=this.props.width||170;if(t){var v=this.props.duration;if(v>10){u=240;}else if(v>5){u=200;}else if(v>2){u=160;}else u=120;}var w=null,x=Math.ceil(q*(u+2)/this.state.duration);if(t)x=Math.ceil(q*(u+24)/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var y=this._renderPlayer(u,s,this.props.customColor),z=this._renderPlayer(u,s,m),aa="_1mj2"+(' '+"_2e-6")+(r&&q!==0?' '+"_1mj3":'')+(r&&q===0?' '+"_4g4x":'');w=c('React').createElement('div',{className:aa},y,c('React').createElement('div',{className:"_1mj4 _2e-7",style:{width:x}},z));}else w=c('React').createElement('div',{className:"_1mj2"},c('React').createElement('div',{className:"_1miz"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('a',{className:"_1mj5",href:this.props.src},c('React').createElement('span',{className:"_3qi6"},c('React').createElement('i',{className:"_1mj6"})),c('React').createElement('span',{className:"_1mj7"},j._("Voice Message")),c('React').createElement('span',{className:"_1mj8"},s)),c('React').createElement('a',{href:this.props.src,className:"_1mj9"},c('React').createElement('i',{className:"_1mja"})))));return c('React').createElement('div',{className:c('joinClasses')("_1mjb"+(t?' '+"_454y":''),this.props.rootClassName)},w);}});f.exports=o;}),null);
__d('UFICreatorInfo.react',['cx','fbt','HelpLink.react','Image.react','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=void 0,o=this.getCreatorLink();switch(this.props.labelType){case 'commented':n=i._("Commented on by {creator}",[i.param('creator',o)]);break;case 'edited_comment':n=i._("Edited by {creator}",[i.param('creator',o)]);break;case 'sent_message':n=i._("Sent by {creator}",[i.param('creator',o)]);break;case 'page_admin_note':n=i._("Noted by {creator}",[i.param('creator',o)]);break;default:return c('React').createElement('span',null);}return c('React').createElement('span',null,n,c('React').createElement(c('HelpLink.react'),{tooltip:this.getHelpText()}));};m.prototype.getCreatorLink=function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return c('React').createElement('a',{className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':this.getTooltipText()},this.props.creatorName);case 'business_admin':return c('React').createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName);case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return c('React').createElement('span',{className:'uiLinkSubtle'},c('React').createElement(c('Image.react'),{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return c('React').createElement('span',{className:'uiLinkSubtle'},this.props.creatorName);}};m.prototype.getTooltipText=function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}return null;};m.prototype.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return c('React').createElement('span',null,this.props.creatorName);var n=new (c('URI'))('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return c('React').createElement('a',{className:'uiLinkSubtle','data-hovercard':n,href:this.props.profileURI},this.props.creatorName);};m.prototype.getApplicationText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone using {application}.",[i.param('application',this.props.creatorName)]);}return null;};m.prototype.getIndirectAdminText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone from {page}.",[i.param('page',this.props.creatorName)]);}return null;};m.prototype.getGrayAccountText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return i._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return i._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return i._("This was noted by someone who doesn't have a personal Facebook account.");}return null;};m.prototype.getHelpText=function(){switch(this.props.labelType){case 'commented':return i._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return i._("Only people who manage this Page can see who edited a comment");case 'sent_message':return i._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return i._("Only people who manage this Page can see who created a note");}return null;};function m(){j.apply(this,arguments);}m.propTypes={creatorID:l.string.isRequired,creatorType:l.string.isRequired,creatorName:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string};f.exports=m;}),null);
__d('PagesMessengerCreatorInfo.react',['cx','React','UFICreatorInfo.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('XUIGrayText.react'),{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},c('React').createElement(c('UFICreatorInfo.react'),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}));};function l(){i.apply(this,arguments);}l.propTypes={creator_info:k.shape({creatorID:k.string.isRequired,creatorName:k.string.isRequired,creatorType:k.string.isRequired,labelType:k.string.isRequired,pageID:k.string.isRequired,profileURI:k.string}).isRequired};f.exports=l;}),null);
__d('PhotoResizeMath',[],(function a(b,c,d,e,f,g){var h={getScaledPhotoDimensions:function i(j,k,l,m,n){var o=j/k,p=l/m;if(l&&m&&n==='stretch')return {width:l,height:m};if(!l&&m||n==='contain'!==o>=p)return {width:m*o,height:m};if(l)return {width:l,height:l/o};return {width:j,height:k};}};f.exports=h;}),null);
__d('PixelzFocus',[],(function a(b,c,d,e,f,g){'use strict';var h={search:function i(j,k){var l=0,m=j.length-1;while(l<=m){var n=l+Math.floor((m-l)/2),o=j[n];if(o>k){m=n-1;}else if(o<k){l=n+1;}else return n;}return Math.min(l,m);},forceSpecificPoint:function i(j,k,l){var m=1e-9,n=h.search(j,k-l-m)+1,o=h.search(j,k+l);return j.slice(n,o+1);},findBiggestSets:function i(j,k){var l=[],m=-1;for(var n=0;n<j.length;++n){var o=j[n],p=n,q=h.search(j,o+k),r=q-p;if(r>m)l=[];if(r>=m){m=r;l.push({low:p,high:q});}}return l;},getBestSet:function i(j,k,l){var m=-1,n=null;for(var o=0;o<k.length;++o){var p=k[o],q=j[p.low],r=j[p.high],s=q+(r-q)/2,t=Math.min(q-(s-l),s+l-r);if(t>m){m=t;n=p;}}return n;},getFocusFromSet:function i(j,k){var l=j[k.low],m=j[k.high];return l+(m-l)/2;},clampFocus:function i(j,k){var l=k/2,m=1-k/2;if(j<l)return l;if(j>m)return m;return j;},convertFromCenterToCSS:function i(j,k){if(Math.abs(1-k)<1e-5)return 0;return (j-k/2)/(1-k);},convertFromCSSToCenter:function i(j,k){return j*(1-k)+k/2;},getVisible:function i(j,k){if(j<k)return j/k;return k/j;},getHidden:function i(j,k){return 1-h.getVisible(j,k);},focusHorizontally:function i(j,k){return j<k;},convertVectorFromCenterToCSS:function i(j,k,l){var m=h.focusHorizontally(k,l),n=void 0;if(m){n=j.x/100;}else n=j.x/100;var o=h.convertFromCenterToCSS(n,h.getVisible(k,l));if(m){return {x:o,y:0};}else return {x:0,y:o};},getCropRect:function i(j,k,l){var m=h.focusHorizontally(k,l),n=h.getVisible(k,l);if(m){var o=(1-n)*j.x;return {left:o,top:0,width:n,height:1};}else{var p=(1-n)*j.y;return {left:0,top:p,width:1,height:n};}}};f.exports=h;}),null);
__d('loadImage',['Promise'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=new Image();k.onload=function(){j(k.width,k.height,k);};k.src=i;}h.loadImagePromise=function(i){return new (c('Promise'))(function(j,k){var l=new Image();l.onerror=k;l.onload=function(){return j(l);};l.src=i;});};f.exports=h;}),null);
__d('Pixelz.react',['cx','arrayContains','loadImage','joinClasses','React','PhotoResizeMath','PixelzFocus'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'Pixelz',propTypes:{width:i.number,height:i.number,resizeMode:i.oneOf(['contain','cover','stretch']),alt:i.string,letterbox:i.bool,borderRadius:i.number,insetBorderColor:i.string,animated:i.bool,upscale:i.bool,cropRect:function k(l,m,n){var o=l[m],p='Invalid prop `'+m+'` supplied to `'+n+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(o.left<0||o.top<0||o.width<0||o.height<0||o.left+o.width>1||o.top+o.height>1)return new Error(p);},focus:function k(l,m,n){var o=l[m],p='Invalid prop `'+m+'` supplied to `'+n+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(o)){for(var q=0;q<o.length;++q)if(!(o[q].x>=0&&o[q].x<=1)||!(o[q].y>=0&&o[q].y<=1))return new Error(p);}else{if(!o.type)o.type='css';if(!(o.x>=0&&o.x<=1)||!(o.y>=0&&o.y<=1)||!c('arrayContains')(['center','css'],o.type))return new Error(p);}}},getDefaultProps:function k(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function k(){return {srcDimensions:{}};},getSrcDimensions:function k(){var l=this.props.src,m=this.state.srcDimensions[l];if(m)return m;c('loadImage')(l,function(n,o){var p={};p[l]={width:n,height:o};this.isMounted()&&this.setState({srcDimensions:p});}.bind(this));return null;},getCropSrcDimensions:function k(){var l=this.getSrcDimensions();return {width:l.width*this.props.cropRect.width,height:l.height*this.props.cropRect.height};},getUpscaleCropDimensions:function k(){var l=this.getCropSrcDimensions();return c('PhotoResizeMath').getScaledPhotoDimensions(l.width,l.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function k(){var l=this.getUpscaleCropDimensions(),m=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(l.width,m.width),height:Math.min(l.height,m.height)};return l;},getCropAspectRatio:function k(){var l=this.getCropDimensions();return l.width/l.height;},getContainerDimensions:function k(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function k(){var l=this.getContainerDimensions();return l.width/l.height;},getContainerPosition:function k(){return {left:0,top:0};},getFocus:function k(){var l=this.props.focus;if(!Array.isArray(l)&&l.type==='css')return {x:l.x,y:l.y};var m=this.getContainerAspectRatio(),n=this.getCropAspectRatio(),o=c('PixelzFocus').getVisible(m,n),p=c('PixelzFocus').focusHorizontally(m,n),q=void 0;if(!Array.isArray(l)){q=c('PixelzFocus').convertFromCenterToCSS(p?l.x:l.y,o);}else{var r=l.map(function(u){return p?u.x:u.y;});r.sort();var s=c('PixelzFocus').findBiggestSets(r,o),t=c('PixelzFocus').getBestSet(r,s,o);q=c('PixelzFocus').getFocusFromSet(r,t);}return {x:p?q:.5,y:p?.5:q};},getCropPosition:function k(){var l=this.getCropDimensions(),m=this.getContainerDimensions(),n=this.getFocus();return {left:n.x*(m.width-l.width),top:n.y*(m.height-l.height)};},getScaleDimensions:function k(){var l=this.getCropDimensions();return {width:l.width/this.props.cropRect.width,height:l.height/this.props.cropRect.height};},getScalePosition:function k(){var l=this.getScaleDimensions();return {left:-l.width*this.props.cropRect.left,top:-l.height*this.props.cropRect.top};},getClipCropRectangle:function k(){var l=this.getContainerDimensions(),m=this.getCropDimensions(),n=this.getContainerPosition(),o=this.getCropPosition(),p=Math.max(n.left,o.left),q=Math.max(n.top,o.top),r=Math.min(n.top+l.height,o.top+m.height),s=Math.min(n.left+l.width,o.left+m.width);return {left:p,top:q,width:s-p,height:r-q};},getClipCropPosition:function k(){var l=this.getClipCropRectangle();return {left:l.left,top:l.top};},getClipCropDimensions:function k(){var l=this.getClipCropRectangle();return {width:l.width,height:l.height};},getClipScalePosition:function k(){var l=this.getScalePosition(),m=this.getClipCropPosition(),n=this.getCropPosition();return {left:l.left+(n.left-m.left),top:l.top+(n.top-m.top)};},getClipScaleDimensions:function k(){return this.getScaleDimensions();},areDimensionsEqual:function k(l,m){return l.width===m.width&&l.height===m.height;},shouldAddAllNodesAndStyles:function k(){return this.props.animated;},hasCrop:function k(){if(this.shouldAddAllNodesAndStyles())return true;var l=this.getContainerDimensions(),m=this.getClipCropDimensions(),n=this.getClipScaleDimensions();if(this.areDimensionsEqual(l,m)||this.areDimensionsEqual(m,n))return false;return true;},hasContainer:function k(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var l=this.getContainerDimensions(),m=this.getClipScaleDimensions();if(this.areDimensionsEqual(l,m))return false;return true;},hasInsetBorder:function k(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function k(l,m){if(this.shouldAddAllNodesAndStyles()||m.left)l.left=Math.round(m.left);if(this.shouldAddAllNodesAndStyles()||m.top)l.top=Math.round(m.top);},applyDimensionsStyle:function k(l,m){l.width=Math.round(m.width);l.height=Math.round(m.height);},applyBorderRadiusStyle:function k(l){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)l.borderRadius=this.props.borderRadius||0;},getScaleStyle:function k(){var l={},m=this.getClipCropDimensions(),n=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(m,n)){this.applyPositionStyle(l,this.getClipScalePosition());}else this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipScaleDimensions());this.applyBorderRadiusStyle(l);return l;},getCropStyle:function k(){var l={};this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipCropDimensions());this.applyBorderRadiusStyle(l);return l;},getInsetBorderStyle:function k(){var l={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(l,this.getClipCropPosition());this.applyDimensionsStyle(l,this.getClipCropDimensions());this.applyBorderRadiusStyle(l);return l;},getContainerStyle:function k(){var l={};this.applyDimensionsStyle(l,this.getContainerDimensions());this.applyBorderRadiusStyle(l);return l;},getScale:function k(){var l=this.getScaleStyle(),m=l.width,n=l.height;l=babelHelpers['extends']({},l);delete l.width;delete l.height;return c('React').createElement('img',babelHelpers['extends']({},this.props,{alt:this.props.alt,className:c('joinClasses')(this.props.className,"_56wb"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),src:this.props.src,style:babelHelpers['extends']({},this.props.style||{},l),width:m,height:n}));},getCrop:function k(){var l=this.getScale();if(!this.hasCrop())return l;return c('React').createElement('div',{className:"_56ma"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getCropStyle()},l);},getInsetBorder:function k(){if(!this.hasInsetBorder())return null;return c('React').createElement('div',{className:"_56lv"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),style:this.getInsetBorderStyle()});},getContainer:function k(){var l=this.getCrop();if(!this.hasContainer())return l;var m=this.getInsetBorder();return c('React').createElement('div',{className:"_56jj"+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''),'data-skipchecker':null,style:this.getContainerStyle()},l,m);},render:function k(){var l=this.getSrcDimensions();if(!l)return c('React').createElement('span',{'data-skipchecker':null});return this.getContainer();}});f.exports=j;}),null);
__d('PagesCommerceBuyerNUXDialog.react',['cx','fbt','ix','Image.react','LayerFadeOnHide','LayerFadeOnShow','React','SimpleNUXMessage','SimpleNUXMessageTypes','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=400,n=j("276000");k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$PagesCommerceBuyerNUXDialog2=function(){c('SimpleNUXMessage').markMessageSeenByUser(c('SimpleNUXMessageTypes').PAGES_COMMERCE_BUYER_NUX);this.props.onConfirm();}.bind(this),this.$PagesCommerceBuyerNUXDialog3=function(u){if(!u)this.$PagesCommerceBuyerNUXDialog2();}.bind(this),q;}o.prototype.$PagesCommerceBuyerNUXDialog1=function(){return i._("OK");};o.prototype.$PagesCommerceBuyerNUXDialog4=function(){return c('React').createElement('div',{className:"_1lc0"},c('React').createElement(c('XUIButton.react'),{className:"_1lcd",label:this.$PagesCommerceBuyerNUXDialog1(),size:'xxlarge',use:'confirm',onClick:this.$PagesCommerceBuyerNUXDialog2}));};o.prototype.$PagesCommerceBuyerNUXDialog5=function(){return c('React').createElement('ul',{className:"_1lce"},c('React').createElement('li',{className:"_1lcf"},c('React').createElement(c('Image.react'),{className:"_1_2f",src:j("275996")}),c('React').createElement(c('XUIText.react'),{className:"_1_2g",size:'large'},i._("Use your bank account or credit card."))),c('React').createElement('li',{className:"_1lcf"},c('React').createElement(c('Image.react'),{className:"_1_2f",src:j("275998")}),c('React').createElement(c('XUIText.react'),{className:"_1_2g",size:'large'},i._("Payments are protected and private."))),c('React').createElement('li',{className:"_1lcf"},c('React').createElement(c('Image.react'),{className:"_1_2f",src:j("275997")}),c('React').createElement(c('XUIText.react'),{className:"_1_2g",size:'large'},i._("FREE! No extra fees or charges."))));};o.prototype.render=function(){if(!this.props.isShown)return null;return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerFadeOnShow:c('LayerFadeOnShow')},onToggle:this.$PagesCommerceBuyerNUXDialog3,shown:this.props.isShown,width:this.props.width||m},c('React').createElement(c('XUIDialogBody.react'),{className:"_52jv"},c('React').createElement(c('Image.react'),{className:"_1lcg",src:n}),c('React').createElement('div',{className:"_1lci"},i._("Instant, secure payments on Messenger.")),this.$PagesCommerceBuyerNUXDialog5(),this.$PagesCommerceBuyerNUXDialog4()));};f.exports=o;}),null);
__d("MessengerGamesCustomUpdateAdminContainerQuery.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={fragment:{argumentDefinitions:[{kind:"LocalArgument",name:"gameID",type:"ID!",defaultValue:null}],kind:"Fragment",metadata:null,name:"MessengerGamesCustomUpdateAdminContainerQuery",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"gameID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"InlineFragment",type:"Application",selections:[{kind:"LinkedField",alias:"gameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",name:"instant_game_info",plural:false,selections:[{kind:"FragmentSpread",name:"MessengerGamesCustomUpdateAdmin_gameInfo",args:null}],storageKey:null}]}],storageKey:null}],type:"Query"},id:"1444897842249195",kind:"Batch",metadata:{},name:"MessengerGamesCustomUpdateAdminContainerQuery",query:{argumentDefinitions:[{kind:"LocalArgument",name:"gameID",type:"ID!",defaultValue:null}],kind:"Root",name:"MessengerGamesCustomUpdateAdminContainerQuery",operation:"query",selections:[{kind:"LinkedField",alias:null,args:[{kind:"Variable",name:"id",variableName:"gameID",type:"ID!"}],concreteType:null,name:"node",plural:false,selections:[{kind:"ScalarField",alias:null,args:null,name:"__typename",storageKey:null},{kind:"ScalarField",alias:null,args:null,name:"id",storageKey:null},{kind:"InlineFragment",type:"Application",selections:[{kind:"LinkedField",alias:"gameInfo",args:null,concreteType:"GamesInstantPlayStyleInfo",name:"instant_game_info",plural:false,selections:[{kind:"ScalarField",alias:"name",args:null,name:"game_name",storageKey:null},{kind:"ScalarField",alias:"iconURI",args:null,name:"icon_uri",storageKey:null}],storageKey:null}]}],storageKey:null}]},text:null};f.exports=h;}),null);
__d("MessengerGamesCustomUpdateAdmin_gameInfo.graphql",[],(function a(b,c,d,e,f,g){'use strict';var h={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MessengerGamesCustomUpdateAdmin_gameInfo",selections:[{kind:"ScalarField",alias:"name",args:null,name:"game_name",storageKey:null},{kind:"ScalarField",alias:"iconURI",args:null,name:"icon_uri",storageKey:null}],type:"GamesInstantPlayStyleInfo"};f.exports=h;}),null);
__d('MessengerSharedPhoto.react',['React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$MessengerSharedPhoto1=function(q){q.preventDefault();this.props.onClick(this.props.fbid);}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('a',{className:this.props.className,href:this.props.uri,onClick:this.$MessengerSharedPhoto1,style:{backgroundImage:'url('+this.props.uri+')'}});};k.propTypes={className:j.string.isRequired,fbid:j.string.isRequired,onClick:j.func.isRequired,uri:j.string.isRequired};f.exports=k;}),null);
__d('ChatPhotoViewFooterHScroll.react',['cx','Animation','MessengerSharedPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=74,n=140,o=30;i=babelHelpers.inherits(p,c('React').Component);j=i&&i.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$ChatPhotoViewFooterHScroll1=null,this.state={currentPhoto:'',prevScrollLeft:0,scrollLeft:0},this.$ChatPhotoViewFooterHScroll2=function(v){return v?Math.ceil((v-n*2)/m):o;},r;}p.prototype.componentDidMount=function(){if(this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(this.props.width));this.$ChatPhotoViewFooterHScroll1=new (c('Animation'))(this.refs.childContainer).to('scrollLeft',0).duration(l).go();};p.prototype.componentWillReceiveProps=function(q){if(q.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==q.sharedPhotos.length){var r=q.width?(q.width-m)/2-n:0,s=q.sharedPhotos.findIndex(function(t){return t.node.id===q.photoID;});this.setState({currentPhoto:q.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:s*m-r});}if(q.width!=this.props.width)this.props.updateNumberInOneBatch(this.$ChatPhotoViewFooterHScroll2(q.width));};p.prototype.componentDidUpdate=function(){if(this.$ChatPhotoViewFooterHScroll1)this.$ChatPhotoViewFooterHScroll1.from('scrollLeft',this.state.prevScrollLeft).to('scrollLeft',this.state.scrollLeft).duration(l).go();};p.prototype.componentWillUnmount=function(){this.$ChatPhotoViewFooterHScroll1&&this.$ChatPhotoViewFooterHScroll1.stop();};p.prototype.shouldComponentUpdate=function(q,r){if(q.photoID!=this.state.currentPhoto||q.sharedPhotos.length!==this.props.sharedPhotos.length)return true;return false;};p.prototype.render=function(){var q=this.props.sharedPhotos,r=q.map(function(s){return c('React').createElement('div',{className:"_1oyb",key:s.node.legacy_attachment_id},c('React').createElement(c('MessengerSharedPhoto.react'),{className:"_1oyc"+(this.state.currentPhoto!==s.node.id?' '+"_1oyd":''),fbid:s.node.legacy_attachment_id,onClick:this.props.onScroll,photoID:s.node.id,uri:s.node.image1.uri}));}.bind(this));return c('React').createElement('div',{className:"_1oye"},c('React').createElement('div',{className:"_1oyf",ref:'childContainer'},c('React').createElement('div',{className:"_1oyh",ref:'scrollable'},r)));};p.propTypes={onScroll:k.func,photoID:k.string,sharedPhotos:k.array,updateNumberInOneBatch:k.func,width:k.number};f.exports=p;}),null);
__d("XForwardingNUXSeenController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/chat\/forwarding_nux_seen\/",{});}),null);
__d('MessagingForwardingButtonNUX.react',['AsyncRequest','ChatConfig','React','XForwardingNUXSeenController','XUIAmbientNUX.react'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={showNUX:!c('ChatConfig').get('seen_forwarding_nux')},this.$MessagingForwardingButtonNUX1=function(){if(!this.state.showNUX)return;c('ChatConfig').set('seen_forwarding_nux',true);new (c('AsyncRequest'))(c('XForwardingNUXSeenController').getURIBuilder().getURI()).send();this.setState({showNUX:false});}.bind(this),this.close=function(){this.$MessagingForwardingButtonNUX1();}.bind(this),m;}k.prototype.render=function(){'use strict';return c('React').createElement(c('XUIAmbientNUX.react'),{contextRef:this.props.contextRef,onCloseButtonClick:this.$MessagingForwardingButtonNUX1,position:'left',width:'auto',shown:this.state.showNUX},this.props.children);};k.propTypes={contextRef:j.func.isRequired};f.exports=k;}),null);
__d('MessengerPhotoViewCloseLink.react',['cx','fbt','React','TooltipLink.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=function l(m){var n=m.customTooltip!==undefined?m.customTooltip:c('React').createElement('span',null,i._("Press Esc to close"));return c('React').createElement(c('TooltipLink.react'),{className:"_51ok _50-m _51an",onClick:m.onClick,tooltip:n},c('React').createElement('div',{className:"_387s"}));};k.propTypes={onClick:j.func,customTooltip:j.element};f.exports=k;}),null);
__d('SpotlightViewerBottomBarLink',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l=this.props.className||"_4_8j _4_8k";return c('React').createElement(c('Link.react'),babelHelpers['extends']({},this.props,{className:l}),this.props.children);};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('ChatPhotoViewHeader.react',['cx','fbt','MessagingForwardingButtonNUX.react','MessengerPhotoViewCloseLink.react','React','SpotlightViewerBottomBarLink','WorkModeConfig'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$ChatPhotoViewHeader3=function(){this.$ChatPhotoViewHeader2();this.props.showForwardDialog&&this.props.showForwardDialog();}.bind(this),this.$ChatPhotoViewHeader4=function(){this.$ChatPhotoViewHeader2();this.props.showShareDialog&&this.props.showShareDialog();}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_51an _50-m _3h_t _5l-3",role:'banner'},this.$ChatPhotoViewHeader1(),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onClose}));};m.prototype.$ChatPhotoViewHeader2=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close();};m.prototype.$ChatPhotoViewHeader1=function(){var n=void 0,o=void 0,p=void 0;if(!this.props.disableForward){n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3h_u",onClick:this.$ChatPhotoViewHeader3,ref:'forwardButton'},c('React').createElement('div',{className:"_3h_v _3h_w"}),i._("Forward"));o=c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},i._("Send this image to other people in separate messages."));}if(this.props.enableShareToFB)p=c('React').createElement('div',{className:"_3h_u",onClick:this.$ChatPhotoViewHeader4,ref:'shareButton',role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3tth _3h_w"}),this.$ChatPhotoViewHeader5());return c('React').createElement('div',{key:'buttonsContainer',ref:'buttons'},c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3h_u",rel:'async',ajaxify:this.props.url,ref:'downloadButton'},c('React').createElement('div',{className:"_3h_x _3h_w"}),i._("Download")),n,o,p,c('React').createElement('div',{className:"_3h_u",onClick:this.props.openInfo,ref:'moreInfo',role:'link',tabIndex:'0'},c('React').createElement('div',{className:"_3h_y _3h_w"}),i._("Info")));};m.prototype.$ChatPhotoViewHeader5=function(){if(c('WorkModeConfig').is_work_user){return i._("Share to Workplace");}else return i._("Share to Facebook");};m.propTypes={disableForward:l.bool,enableShareToFB:l.bool,onClose:l.func,openInfo:l.func,showForwardDialog:l.func,showShareDialog:l.func,url:l.object};f.exports=m;}),null);
__d('ChatSpeakingSticker.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSpeakingSticker1=function(){var q=c('ReactDOM').findDOMNode(this.refs.stickerVideo);q.play();}.bind(this),m;}k.prototype.render=function(){return c('React').createElement('div',{onClick:this.$ChatSpeakingSticker1,role:'presentation'},c('React').createElement('video',{height:this.props.videoSize.height,ref:"stickerVideo",width:this.props.videoSize.width},c('React').createElement('source',{src:this.props.videoURI})));};k.propTypes={videoURI:j.string.isRequired,videoSize:j.shape({height:j.number,width:j.number}).isRequired};f.exports=k;}),null);
__d('MercuryLWARenderer',['MercuryConfig','MessengerTextWithEntities.react','MessengerLightweightActionUtils','React','TextWithEntities.react'],(function a(b,c,d,e,f,g){'use strict';var h={renderCollapsedText:function i(j){var k=null;if(c('MercuryConfig').MessengerNewEmojiGK){k=c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:c('MessengerLightweightActionUtils').getCollapsedLWAText(j)});}else k=c('React').createElement(c('TextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:c('MessengerLightweightActionUtils').getCollapsedLWAText(j)});return c('React').createElement('span',null,k);}};f.exports=h;}),null);
__d('EmojiSticker.react',['cx','Image.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad();};l.prototype.render=function(){var m=this.props.emojiImage?this.props.emojiImage:c('React').createElement(c('Image.react'),{src:this.props.sourceURI});return c('React').createElement('div',{'aria-label':this.props.emoji,className:c('joinClasses')(this.props.className,"_383m"),tabIndex:'0'},m);};function l(){i.apply(this,arguments);}l.propTypes={emoji:k.string,emojiImage:k.any,onAttachmentLoad:k.func,sourceURI:k.string.isRequired};f.exports=l;}),null);
__d('MercuryShareAttachmentReactShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({share_id:h.string,description:h.string,media:h.shape({image:h.string,image_size:h.shape({height:h.number,width:h.number}),duration:h.number,playable:h.bool,source:h.string}),source:h.string,style_list:h.arrayOf(h.string),subattachments:h.array,target:h.object,title:h.string,properties:h.object,uri:h.string,action_links:h.array,messaging_attribution:h.shape({attribution_type:h.string,attribution_id:h.string,name:h.string,icon_url:h.string}),messenger_ctas:h.arrayOf(h.shape({id:h.string,action_title:h.string,action_url:h.string,action_open_type:h.number,is_high_confidence:h.bool,is_mutable_by_server:h.bool,user_confirmation:h.bool,native_url:h.string,is_disabled:h.bool,nested_ctas:h.array,webview_metadata:h.object}))}).isRequired;f.exports=i;}),null);
__d('MercuryAnimatedShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a GIF."):i._("{sender name} sent a GIF.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("81849")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryCrisisListingShareSnippet.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',null,this.props.isViewerSender?h._("You shared a post."):h._("{sender_name} shared a post.",[h.param('sender_name',this.props.senderName)]));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MercuryFallbackShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a link.");}else o=i._("{sender name} sent a link.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("86988")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryFundraiserShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You shared a fundraiser"):i._("{sender name} shared a fundraiser",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("40052")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryMessageLiveLocationShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a live location.");}else o=i._("{sender name} sent a live location.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("87068")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryMessageLocationShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=void 0;if(this.props.isViewerSender){o=i._("You sent a location.");}else o=i._("{sender name} sent a location.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("87068")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryMessengerInviteShareAttachmentSnippet.react',['cx','React','MercuryShareAttachmentReactShape'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:"_3l6h"},this.props.attachment.title);};function k(){i.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=k;}),null);
__d('MercuryMusicIntegrationAttachmentSnippet.react',['fbt','MercuryFallbackShareAttachmentSnippet.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=void 0,n=this.props.attachment.target;if(!n)return c('React').createElement(c('MercuryFallbackShareAttachmentSnippet.react'),this.props);var o=n.title,p=n.app_name;if(this.props.isViewerSender){m=h._("You shared \"{music title}\" from {music servvice}.",[h.param('music title',o),h.param('music servvice',p)]);}else m=h._("{sender name} shared \"{music title}\" from {music servvice}.",[h.param('sender name',this.props.senderName),h.param('music title',o),h.param('music servvice',p)]);return c('React').createElement('span',null,m);};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object,isViewerSender:k.bool,senderName:k.oneOfType([k.string,k.object])};f.exports=l;}),null);
__d('MercuryPaymentPlatformSnippet.react',['cx','ix','Image.react','MercuryShareAttachmentReactShape','React','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n,o=(n=this.props)!=null?(n=n.attachment)!=null?(n=n.target)!=null?(n=n.payment_snippet)!=null?n.text:n:n:n:n;if(!o)return null;return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:i("86988")}),o);};function m(){j.apply(this,arguments);}m.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSenderViewer:l.bool,senderName:l.oneOfType([l.string,l.object])};f.exports=m;}),null);
__d('MercuryPhotoShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a photo."):i._("{sender name} sent a photo.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("81849")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryPromotionShareAttachmentSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.attachment,p=o&&o.target,q=null;if(this.props.isViewerSender){q=i._("You sent an attachment.");}else q=i._("{sender name} sent an attachment.",[i.param('sender name',this.props.senderName)]);var r=p&&p.message||q;return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("86988")}),r);};function n(){k.apply(this,arguments);}n.propTypes={senderName:m.oneOfType([m.string,m.object]),attachment:m.object,isViewerSender:m.bool};f.exports=n;}),null);
__d('MercurySaleGroupProductItemShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a for sale item."):i._("{sender name} sent a for sale item.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("86988")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryTransactionInvoiceShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent an invoice"):i._("Page {sender name} sent you an invoice.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("86988")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MercuryVideoShareSnippet.react',['cx','fbt','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isViewerSender?i._("You sent a video."):i._("{sender name} sent a video.",[i.param('sender name',this.props.senderName)]);return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("82423")}),o);};function n(){k.apply(this,arguments);}n.propTypes={isViewerSender:m.bool,senderName:m.oneOfType([m.string,m.object])};f.exports=n;}),null);
__d('MessengerLightweightActionSnippet.react',['cx','MercuryShareAttachmentReactShape','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:"_3l6h"},this.props.attachment.title);};function k(){i.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=k;}),null);
__d('MessengerMomentsAppSnippet.react',['cx','fbt','ix','Image.react','MercuryShareAttachmentReactShape','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.attachment;if(!o||!o.target)return null;return c('React').createElement('span',{className:"uiIconText _3l6h"},c('React').createElement(c('Image.react'),{src:j("86988")}),o.target.snippet);};function n(){k.apply(this,arguments);}n.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=n;}),null);
__d('MercuryAttachmentSnippetType',['keyMirror'],(function a(b,c,d,e,f,g){var h=c('keyMirror')({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,SHARE:null,ERROR:null,MIXED:null,GIFT:null,THIRDPARTYSTICKER:null,FILE:null,LIKE_STICKER:null});f.exports=h;}),null);
__d('P2PSnippetStringUtils',['fbt','P2PPaymentRequestStatus','P2PTransferStatus'],(function a(b,c,d,e,f,g,h){var i={getRequestCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your request for {payment request amount} from {receiver's name} was canceled.",[h.param('payment request amount',o),h.param('receiver\'s name',n)]);}else if(l){return h._("{requester's name}'s request for {payment request amount} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{requester's name}'s request for {payment request amount} from {receiver's name} was canceled.",[h.param('requester\'s name',m),h.param('payment request amount',o),h.param('receiver\'s name',n)]);},getRequestDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver's name} declined your request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('payment request amount',o)]);}else if(l){return h._("You declined {requester's name}'s request for {payment request amount}.",[h.param('requester\'s name',m),h.param('payment request amount',o)]);}else return h._("{receiver's name} declined {sender's name}'s request for {payment request amount}.",[h.param('receiver\'s name',n),h.param('sender\'s name',m),h.param('payment request amount',o)]);},getRequestSentSnippet:function j(k,l,m,n,o){if(k){return h._("You requested {amount} from {requestee name}.",[h.param('amount',o),h.param('requestee name',n)]);}else if(l){return h._("{requester name} requested {amount} from you.",[h.param('requester name',m),h.param('amount',o)]);}else return h._("{name} requested {amount} from {requestee name}.",[h.param('name',m),h.param('amount',o),h.param('requestee name',n)]);},getRequestSnippetByStatus:function j(k,l,m,n,o,p){var q=k||c('P2PPaymentRequestStatus').INITED,r=[l,m,n,o,p];switch(q){case c('P2PPaymentRequestStatus').DECLINED:return this.getRequestDeclinedSnippet.apply(this,r);case c('P2PPaymentRequestStatus').TRANSFER_FAILED:case c('P2PPaymentRequestStatus').CANCELED:return this.getRequestCanceledSnippet.apply(this,r);}return this.getRequestSentSnippet.apply(this,r);},getTransferCanceledSnippet:function j(k,l,m,n,o){if(k){return h._("Your {amount} payment to {receiver_name} was canceled.",[h.param('amount',o),h.param('receiver_name',n)]);}else if(l){return h._("{sender name}'s {amount} payment was canceled.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{sender_name}'s {amount} payment to {receiver_name} was canceled.",[h.param('sender_name',m),h.param('amount',o),h.param('receiver_name',n)]);},getTransferDeclinedSnippet:function j(k,l,m,n,o){if(k){return h._("{receiver_name} didn't accept your {amount} payment.",[h.param('receiver_name',n),h.param('amount',o)]);}else if(l){return h._("You didn't accept {sender name}'s {amount} payment.",[h.param('sender name',m),h.param('amount',o)]);}else return h._("{receiver_name} didn't accept {sender_name}'s {amount} payment.",[h.param('receiver_name',n),h.param('sender_name',m),h.param('amount',o)]);},getTransferSentSnippet:function j(k,l,m,n,o){if(k){return h._("You sent {receiver name} {amount}.",[h.param('receiver name',n),h.param('amount',o)]);}else if(l){return h._("{name} sent you {amount}.",[h.param('name',m),h.param('amount',o)]);}else return h._("{sender name} sent {receiver name} {amount}.",[h.param('sender name',m),h.param('receiver name',n),h.param('amount',o)]);},getTransferSnippetByStatus:function j(k,l,m,n,o,p){var q=[l,m,n,o,p],r=k||c('P2PTransferStatus').PENDING_SENDER_INITED;switch(r){case c('P2PTransferStatus').CANCELED_DECLINED:return this.getTransferDeclinedSnippet.apply(this,q);case c('P2PTransferStatus').CANCELED_SENDER_RISK:case c('P2PTransferStatus').CANCELED_RECIPIENT_RISK:case c('P2PTransferStatus').CANCELED_SYSTEM_FAIL:case c('P2PTransferStatus').CANCELED_EXPIRED:case c('P2PTransferStatus').CANCELED_SAME_CARD:return this.getTransferCanceledSnippet.apply(this,q);}return this.getTransferSentSnippet.apply(this,q);}};f.exports=i;}),null);
__d('MercuryAttachmentSnippetRenderer',['fbt','CurrentUser','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryAudioType','MercuryGiftSnippetRenderer','P2PSnippetStringUtils','StickerConstants','StoryAttachmentStyle'],(function a(b,c,d,e,f,g,h){'use strict';var i={getAttachmentSnippetType:function j(k){if(this._hasOnlyPhotos(k))return c('MercuryAttachmentSnippetType').PHOTO;if(this._hasOnlyAnimatedImages(k))return c('MercuryAttachmentSnippetType').GIF;if(this._hasOnlyVideo(k))return c('MercuryAttachmentSnippetType').VIDEO;if(this._hasAudioClip(k))return c('MercuryAttachmentSnippetType').AUDIO_CLIP;if(this._hasLikeSticker(k))return c('MercuryAttachmentSnippetType').LIKE_STICKER;if(this._hasSticker(k))return c('MercuryAttachmentSnippetType').STICKER;if(this._hasThirdPartySticker(k))return c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER;if(this._hasShare(k))return c('MercuryAttachmentSnippetType').SHARE;if(this._hasGift(k))return c('MercuryAttachmentSnippetType').GIFT;if(this._hasError(k))return c('MercuryAttachmentSnippetType').ERROR;if(this._hasFile(k))return c('MercuryAttachmentSnippetType').FILE;return c('MercuryAttachmentSnippetType').MIXED;},renderAttachmentSnippetText:function j(k,l,m,n){switch(k){case c('MercuryAttachmentSnippetType').PHOTO:return this._renderPhotoAttachmentSnippetText(l,m,this._getPhotoAttachments(n));case c('MercuryAttachmentSnippetType').GIF:return this._renderAnimatedImagesAttachmentSnippetText(l,m,this._getAnimatedImageAttachments(n));case c('MercuryAttachmentSnippetType').VIDEO:return l?h._("You sent a video."):h._("{sender name} sent a video.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return l?h._("You sent a voice message."):h._("{name} sent a voice message.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').STICKER:case c('MercuryAttachmentSnippetType').LIKE_STICKER:case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return l?h._("You sent a sticker."):h._("{name} sent a sticker.",[h.param('name',m)]);case c('MercuryAttachmentSnippetType').SHARE:if(n&&this._hasP2PPayment(n))return this._renderP2PPaymentSnippetText(n[0]);if(n&&this._hasP2PPaymentRequest(n))return this._renderP2PPaymentRequestSnippetText(n[0]);if(n&&this._hasBusinessMessage(n))return this._renderBusinessMessageSnippetText(n[0],m);if(n&&this._hasLocation(n))return l?h._("You sent a location."):h._("{sender name} sent a location.",[h.param('sender name',m)]);if(n&&this._hasLiveLocation(n))return l?h._("You sent a live location."):h._("{sender name} sent a live location.",[h.param('sender name',m)]);return l?h._("You sent a link."):h._("{sender name} sent a link.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').GIFT:return c('MercuryGiftSnippetRenderer').renderText(l,m);case c('MercuryAttachmentSnippetType').FILE:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);case c('MercuryAttachmentSnippetType').ERROR:return l?h._("You sent an attachment."):h._("{sender name} sent an attachment.",[h.param('sender name',m)]);default:return '';}},_hasOnlyPhotos:function j(k){return this._getPhotoAttachments(k).length===k.length;},_hasThirdPartySticker:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER;},_hasOnlyAnimatedImages:function j(k){return this._getAnimatedImageAttachments(k).length===k.length;},_hasOnlyVideo:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').VIDEO;},_hasAudioClip:function j(k){var l=k[0].metadata&&k[0].metadata.type;return k.length===1&&(l===c('MercuryAudioType').AudioClip||l===c('MercuryAudioType').VoiceMessageWithTranscript);},_hasBusinessMessage:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').BUSINESS_MESSAGE_ITEMS);},_hasSticker:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').STICKER;},_hasLikeSticker:function j(k){if(k.length<1)return false;var l=k[0].metadata&&k[0].metadata.stickerID;return k.length===1&&(l==c('StickerConstants').LIKE_STICKER_ID||l==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||l==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||l==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID);},_hasLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LOCATION);},_hasLiveLocation:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').MESSAGE_LIVE_LOCATION);},_hasP2PPayment:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION);},_hasP2PPaymentRequest:function j(k){return this._hasSingleShareAttachmentOfStyle(k,c('StoryAttachmentStyle').ORION_REQUEST);},_hasSingleShareAttachmentOfStyle:function j(k,l){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE&&k[0].share.style_list.indexOf(l)>=0;},_hasShare:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').SHARE;},_hasError:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').ERROR;},_hasGift:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').GIFT;},_hasFile:function j(k){return k.length===1&&k[0].attach_type===c('MercuryAttachmentType').FILE;},_getPhotoAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').PHOTO;});},_getAnimatedImageAttachments:function j(k){if(!k)return [];return k.filter(function(l){return l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a photo.");}else return h._("{name} sent a photo.",[h.param('name',l)]);}else if(k){return h._({"*":"You sent {num_photos} photos."},[h.param('num_photos',m.length,[0])]);}else return h._({"*":"{name} sent {num_photos} photos."},[h.param('name',l),h.param('num_photos',m.length,[0])]);},_renderAnimatedImagesAttachmentSnippetText:function j(k,l,m){if(m.length===1){if(k){return h._("You sent a GIF.");}else return h._("{name} sent a GIF.",[h.param('name',l)]);}else if(k){return h._("You sent {num_animated_images} GIFs.",[h.param('num_animated_images',m.length)]);}else return h._("{name} sent {num_animated_images} GIFs.",[h.param('name',l),h.param('num_animated_images',m.length)]);},_renderBusinessMessageSnippetText:function j(k,l){var m=k.share.target,n=m&&m.message||h._("{sender name} sent an attachment.",[h.param('sender name',l)]);return n;},_renderP2PPaymentSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentSnippetText(c('CurrentUser').getID()===l.sender.id,l.sender.name,l.amountWithSymbol,l.status,c('CurrentUser').getID()===l.receiver.id,l.receiver.name);},_renderP2PPaymentRequestSnippetText:function j(k){var l=k.share.target;return this.renderP2PPaymentRequestSnippetText(c('CurrentUser').getID()===l.requester.id,l.requester.name,l.amountWithSymbol,l.currentStatus,c('CurrentUser').getID()===l.requestee.id,l.requestee.name);},renderP2PPaymentSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getTransferSnippetByStatus(n,k,o||false,l||'',p||'',m);},renderP2PPaymentRequestSnippetText:function j(k,l,m,n,o,p){return c('P2PSnippetStringUtils').getRequestSnippetByStatus(n,k,o||false,l||'',p||'',m);}};f.exports=i;}),null);
__d('P2PMercuryAttachmentSnippetRendererBase.react',['cx','ix','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){return c('React').createElement('span',{className:"uiIconText _3l6h _3_io"},c('React').createElement(c('Image.react'),{height:12,src:i("94348"),width:12}),this.props.text);};function m(){j.apply(this,arguments);}m.propTypes={text:l.node};f.exports=m;}),null);
__d('P2PMercuryAttachmentSnippet.react',['CurrentUser','MercuryAttachmentSnippetRenderer','P2PMercuryAttachmentSnippetRendererBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryAttachmentSnippetRenderer').renderP2PPaymentSnippetText(c('CurrentUser').getID()===this.props.sender.id,this.props.sender.name,this.props.amountWithSymbol,this.props.status,c('CurrentUser').getID()===this.props.receiver.id,this.props.receiver.name);return c('React').createElement(c('P2PMercuryAttachmentSnippetRendererBase.react'),{text:l});};function k(){h.apply(this,arguments);}k.propTypes={amountWithSymbol:j.string,receiver:j.object,sender:j.object,status:j.number};k.defaultProps={sender:{},receiver:{}};f.exports=k;}),null);
__d('P2PMercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','P2PMercuryAttachmentSnippet.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.attachment?this.props.attachment.target:{};return c('React').createElement(c('P2PMercuryAttachmentSnippet.react'),k);};function j(){h.apply(this,arguments);}j.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=j;}),null);
__d('P2PPaymentRequestMercuryAttachmentSnippet.react',['CurrentUser','MercuryAttachmentSnippetRenderer','P2PMercuryAttachmentSnippetRendererBase.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryAttachmentSnippetRenderer').renderP2PPaymentRequestSnippetText(c('CurrentUser').getID()===this.props.requester.id,this.props.requester.name,this.props.formattedAmount,this.props.status,c('CurrentUser').getID()===this.props.requestee.id,this.props.requestee.name);return c('React').createElement(c('P2PMercuryAttachmentSnippetRendererBase.react'),{text:l});};function k(){h.apply(this,arguments);}k.propTypes={formattedAmount:j.string.isRequired,requestee:j.object.isRequired,requester:j.object.isRequired,status:j.number.isRequired};f.exports=k;}),null);
__d('P2PPaymentRequestMercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','P2PPaymentRequestMercuryAttachmentSnippet.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=this.props.attachment?this.props.attachment.target:{};return c('React').createElement(c('P2PPaymentRequestMercuryAttachmentSnippet.react'),{formattedAmount:k.amountWithSymbol,requestee:k.requestee,requester:k.requester,status:k.currentStatus});};function j(){h.apply(this,arguments);}j.propTypes={attachment:c('MercuryShareAttachmentReactShape')};f.exports=j;}),null);
__d('MercuryShareStyleMap',['cx','JSResource','Map','MercuryConfig','MercuryShareAttachmentRenderLocations','StoryAttachmentStyle','emptyFunction','MercuryFallbackShareAttachmentSnippet.react','P2PMercuryShareAttachmentSnippet.react','P2PPaymentRequestMercuryShareAttachmentSnippet.react','MercuryPromotionShareAttachmentSnippet.react','MessengerMomentsAppSnippet.react','MercuryPhotoShareSnippet.react','MercuryVideoShareSnippet.react','MercuryMessageLocationShareAttachmentSnippet.react','MercuryMessageLiveLocationShareAttachmentSnippet.react','MercuryAnimatedShareSnippet.react','MercurySaleGroupProductItemShareSnippet.react','MercuryTransactionInvoiceShareSnippet.react','MercuryPaymentPlatformSnippet.react','MercuryMusicIntegrationAttachmentSnippet.react','MercuryFundraiserShareSnippet.react','MercuryCrisisListingShareSnippet.react','MercuryMessengerInviteShareAttachmentSnippet.react','MessengerLightweightActionSnippet.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=new (c('Map'))();i.set(c('StoryAttachmentStyle').FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:c('JSResource')('MercuryFallbackShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').EVENT,{componentName:'MercuryEventShareAttachment.react',componentLoader:c('JSResource')('MercuryEventShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');}});i.set(c('StoryAttachmentStyle').ORION,{componentName:'P2PMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('P2PMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('P2PMercuryShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _3-50"]])});i.set(c('StoryAttachmentStyle').ORION_REQUEST,{componentName:'P2PPaymentRequestMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('P2PPaymentRequestMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('P2PPaymentRequestMercuryShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _3-50"]])});i.set(c('StoryAttachmentStyle').RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceReceiptMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceCancelationMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceShippingMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceShippingMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_NOW_IN_STOCK,{componentName:'MNCommerceProductSubscriptionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceProductSubscriptionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RETAIL_PROMOTION,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});if(c('MercuryConfig').MessengerGamesGK){i.set(c('StoryAttachmentStyle').INSTANT_GAMES_SHARE_MESSAGE,{componentName:'MessengerGamesShareAttachment.react',componentLoader:c('JSResource')('MessengerGamesShareContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _4niv _205d _28rg"]])});i.set(c('StoryAttachmentStyle').INSTANT_GAMES_SHARE_SCORE_MESSAGE,{componentName:'MessengerGamesScoreShareContainer.react',componentLoader:c('JSResource')('MessengerGamesScoreShareContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _4niv _205d _28rg"]])});}i.set(c('StoryAttachmentStyle').RETAIL_ITEM,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').BUSINESS_MESSAGE_ITEMS,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_MEDIA_ATTACHMENT,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _28rg"]])});i.set(c('StoryAttachmentStyle').H_SCROLL,{componentName:'MNCommerceHScrollMessageAttachment.react',componentLoader:c('JSResource')('MNCommerceHScrollMessageAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8ka"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_COMPACT_ITEM,{componentName:'MessengerPlatformVerticalListItemAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListItemAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_COVER_ITEM,{componentName:'MessengerPlatformVerticalListItemAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListItemAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').MESSENGER_PLATFORM_BUTTON_LIST,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommercePromotionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d _28rg"]])});i.set(c('StoryAttachmentStyle').VERTICAL_ATTACHMENT_LIST,{componentName:'MessengerPlatformVerticalListAttachment.react',componentLoader:c('JSResource')('MessengerPlatformVerticalListAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_205d"]])});if(c('MercuryConfig').WWWMessengerTransportationGK){i.set(c('StoryAttachmentStyle').RIDE_ORDERED,{componentName:'MNTransportationRideConfirmationMercuryAttachment.react',componentLoader:c('JSResource')('MNTransportationRideConfirmationMercuryAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').RIDE_RECEIPT,{componentName:'MNTransportationRideReceiptMercuryAttachment.react',componentLoader:c('JSResource')('MNTransportationRideReceiptMercuryAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPromotionShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});}i.set(c('StoryAttachmentStyle').AIRLINE_UPDATE,{componentName:'MNAirlineUpdateMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineUpdateMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_ITINERARY,{componentName:'MNAirlineItineraryMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineItineraryMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_CHECKIN_REMINDER,{componentName:'MNAirlineCheckInMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineCheckInMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});i.set(c('StoryAttachmentStyle').AIRLINE_BOARDING_PASS,{componentName:'MNAirlineBoardingPassMercuryAttachment.react',componentLoader:c('JSResource')('MNAirlineBoardingPassMercuryAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d _8kb"]])});if(c('MercuryConfig').WWWMessengerMoneyPennyGK)i.set(c('StoryAttachmentStyle').RETAIL_AGENT_ITEM_SUGGESTION,{componentName:'MNCommerceAgentItemSuggestionMercuryShareAttachment.react',componentLoader:c('JSResource')('MNCommerceAgentItemSuggestionMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});var j={componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:c('JSResource')('MessengerMomentsAppShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MessengerMomentsAppSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])};i.set(c('StoryAttachmentStyle').MOMENTS_APP_INVITATION,j);i.set(c('StoryAttachmentStyle').MOMENTS_APP_PHOTO_REQUEST,j);i.set(c('StoryAttachmentStyle').GENIE_MESSAGE,{componentName:'GenieMessageShareAttachment.react',componentLoader:c('JSResource')('GenieMessageShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_2wrf"]]),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');}});i.set(c('StoryAttachmentStyle').MOVIE_BOT_MOVIE_LIST,{componentName:'MovieBotMovieListShareAttachment.react',componentLoader:c('JSResource')('MovieBotMovieListShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').MOVIE_BOT_MOVIE_SHOWTIME_LIST,{componentName:'MovieBotMovieShowtimeListShareAttachment.react',componentLoader:c('JSResource')('MovieBotMovieShowtimeListShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').SHARE_LARGE_IMAGE,{componentName:'MercuryShareLargeImageAttachment.react',componentLoader:c('JSResource')('MercuryShareLargeImageAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPhotoShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:c('JSResource')('MercuryImageShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPhotoShareSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:c('JSResource')('MercuryVideoShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryVideoShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_3duc"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:c('JSResource')('MercuryMessageLocationShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').MESSAGE_LIVE_LOCATION,{componentName:'MercuryMessageLiveLocationShareAttachment.react',componentLoader:c('JSResource')('MercuryMessageLiveLocationShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryMessageLiveLocationShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:c('JSResource')('MercuryAnimatedShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryAnimatedShareSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsFalse});i.set(c('StoryAttachmentStyle').GROUP_SELL_PRODUCT_ITEM,{componentName:'MercurySaleGroupProductItemShareAttachment.react',componentLoader:c('JSResource')('MercurySaleGroupProductItemShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercurySaleGroupProductItemShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').COMMERCE_PRODUCT_ITEM,{componentName:'MercuryCommerceProductItemShareAttachment.react',componentLoader:c('JSResource')('MercuryCommerceProductItemShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFallbackShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').TRANSACTION_INVOICE,{componentName:'MercuryTransactionInvoiceShareAttachment.react',componentLoader:c('JSResource')('MercuryTransactionInvoiceShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryTransactionInvoiceShareSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').PAYMENT_PLATFORM,{componentName:'MercuryPaymentPlatformShareAttachment.react',componentLoader:c('JSResource')('MercuryPaymentPlatformShareAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryPaymentPlatformSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').FINANCIAL_BILL_PAYMENT_REQUEST,{componentName:'MNBillPaymentRequestMercuryShareAttachment.react',componentLoader:c('JSResource')('MNBillPaymentRequestMercuryShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _205d"]])});i.set(c('StoryAttachmentStyle').MUSIC_AGGREGATION,{componentName:'MercuryMusicAttachment.react',componentLoader:c('JSResource')('MercuryMusicAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryConfig').MEMI?c('MercuryMusicIntegrationAttachmentSnippet.react'):c('MercuryFallbackShareAttachmentSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"+(c('MercuryConfig').MEMI?' '+"_4p_r":'')]])});i.set(c('StoryAttachmentStyle').VIDEO_SHARE_YOUTUBE,{componentName:'MercuryVideoShareYoutubeAttachment.react',componentLoader:c('JSResource')('MercuryVideoShareYoutubeAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').RTC_CALL_LOG,{componentName:'MercuryRTCShareAttachment.react',componentLoader:c('JSResource')('MercuryRTCShareAttachment.react').__setRef('MercuryShareStyleMap')});i.set(c('StoryAttachmentStyle').FUNDRAISER_PERSON_FOR_PERSON,{componentName:'MercuryFundraiserAttachment.react',componentLoader:c('JSResource')('MercuryFundraiserAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFundraiserShareSnippet.react');}});i.set(c('StoryAttachmentStyle').FUNDRAISER_PERSON_TO_CHARITY,{componentName:'MercuryFundraiserAttachment.react',componentLoader:c('JSResource')('MercuryFundraiserAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryFundraiserShareSnippet.react');}});i.set(c('StoryAttachmentStyle').CRISIS_LISTING,{componentName:'MercuryCrisisListingAttachment.react',componentLoader:c('JSResource')('MercuryCrisisListingAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MercuryCrisisListingShareSnippet.react');}});i.set(c('StoryAttachmentStyle').MESSENGER_TEAM_BOT_SHARE,{componentName:'MessengerTeamBotShareAttachment.react',componentLoader:c('JSResource')('MessengerTeamBotShareAttachment.react').__setRef('MercuryShareStyleMap')});i.set(c('StoryAttachmentStyle').MESSENGER_INVITE,{componentName:'MercuryMessengerInviteShareAttachment.react',componentLoader:c('JSResource')('MercuryMessengerInviteShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_3thf"]]),getSnippetComponent:function l(){return c('MercuryMessengerInviteShareAttachmentSnippet.react');},unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').PAGES_PLATFORM_BOOKING_MESSAGE,{componentName:'PagesPlatformBookingMessageAttachment.react',componentLoader:c('JSResource')('PagesPlatformBookingMessageAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _3fk6"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').FRIEND_REQUEST,{componentName:'MercuryMessengerFriendRequestAttachment.react',componentLoader:c('JSResource')('MercuryMessengerFriendRequestAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').CULTURAL_MOMENT_HOLIDAY_CARD,{componentName:'MercuryCulturalMomentHolidayCardAttachment.react',componentLoader:c('JSResource')('MercuryCulturalMomentHolidayCardAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_3duc"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').PAGES_PLATFORM_LEAD_GEN,{componentName:'PagesPlatformLeadGenMercuryShareAttachmentContainer.react',componentLoader:c('JSResource')('PagesPlatformLeadGenMercuryShareAttachmentContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_b4_"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').LIGHTWEIGHT_ACTION,{componentName:'MessengerLightweightActionAttachment.react',componentLoader:c('JSResource')('MessengerLightweightActionAttachment.react').__setRef('MercuryShareStyleMap'),getSnippetComponent:function l(){return c('MessengerLightweightActionSnippet.react');},cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d"]])});i.set(c('StoryAttachmentStyle').JOB_SEARCH_JOB_APPLICATION,{componentName:'JobApplicationAttachmentContainer.react',componentLoader:c('JSResource')('JobApplicationAttachmentContainer.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _1zrz"]]),unwrapInStory:c('emptyFunction').thatReturnsTrue});i.set(c('StoryAttachmentStyle').EVENT_REMINDER,{componentName:'MercuryLightweightEventShareAttachment.react',componentLoader:c('JSResource')('MercuryLightweightEventShareAttachment.react').__setRef('MercuryShareStyleMap'),cx:new (c('Map'))([[c('MercuryShareAttachmentRenderLocations').MESSENGER,"_5i_d _1z7j"]])});var k={getStyleFactory:function l(m){if(!m||!m.style_list)return null;if(m.style_list[0]===c('StoryAttachmentStyle').ATTACHED_STORY){var n=m.subattachments,o=n&&n.length?n[0].style_list:[],p=o.length?this._getStyleMapEntry(o):null,q=n[0];if(Array.isArray(o)&&o.find(function(t){return t===c('StoryAttachmentStyle').VIDEO;})){var r={video_title:m.title,description:m.description,source:m.source};q=Object.assign({},n[0],r);}if(p&&p.unwrapInStory&&p.unwrapInStory())return {attachment:q,factory:p};}var s=this._getStyleMapEntry(m.style_list);if(!s)return null;return {attachment:m,factory:s};},_getStyleMapEntry:function l(m){for(var n=0;n<m.length;n++){var o=i.get(m[n]);if(o)return o;}return null;}};f.exports=k;}),null);
__d('MessengerErrorBoundary.react',['cx','fbt','ChatReliabilityInstrumentation','ErrorBoundary.react','LogHistory','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('LogHistory').getInstance('messenger_error_boundary'),m=function p(q){return i._({"conversation list":"Could not display conversation list.","conversation":"Could not display conversation.","composer":"Could not display composer.","conversation information":"Could not display conversation information.","attachment":"Could not display attachment."},[i['enum'](q,{'conversation list':'conversation list',conversation:'conversation',composer:'composer','conversation information':'conversation information',attachment:'attachment'})]);},n=function p(q,r){return function(){return c('React').createElement('div',{className:c('joinClasses')("_5jpt",r)},q);};};j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerErrorBoundary1=function(u,v){var w='React error in '+v+' got '+u.message;l.error(w,JSON.stringify(u));c('ChatReliabilityInstrumentation').logERROR(w);this.props.onHandleError&&this.props.onHandleError(u,v);}.bind(this),q;}o.prototype.render=function(){var p=this.props,q=p.className,r=p.component,s=babelHelpers.objectWithoutProperties(p,['className','component']);return c('React').createElement(c('ErrorBoundary.react'),babelHelpers['extends']({},s,{fallbackComponent:n(m(r),q),onHandleError:this.$MessengerErrorBoundary1,bigRedBox:true}));};f.exports=o;}),null);
__d('MercuryShareAttachment.react',['cx','BootloadedComponent.react','DOM','Event','MercuryShareAttachmentReactShape','MercuryShareStyleMap','MessengerErrorBoundary.react','React','ReactDOM','MercuryShareAttachmentRenderLocations','emptyFunction','idx','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryShareAttachment4=function(r){this.$MercuryShareAttachment1(r);c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(s){var t=c('Event').listen(s,'load',function(){this.$MercuryShareAttachment1(s.height);t.remove();}.bind(this));}.bind(this));}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MercuryShareAttachment1();};l.prototype.$MercuryShareAttachment2=function(){var m=this.props.messageBubble;if(!m)return null;return c('React').cloneElement(m,{className:null,notBubblish:true});};l.prototype.$MercuryShareAttachment3=function(m,n){var o=this.$MercuryShareAttachment2();if(this.props.location===c('MercuryShareAttachmentRenderLocations').MESSENGER&&!this.props.isSubattachment)n=c('joinClasses')("_52mr _2poz _ui9",(!!o?"_5i_d":'')+(!!o?' '+"_4ikk":''),"_4skb",n);return c('React').createElement('div',{className:n},o,m,this.props.afterDecorators);};l.prototype.render=function(){var m,n=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(!n)return null;var o=n.attachment,p=n.factory;return this.$MercuryShareAttachment3(c('React').createElement(c('MessengerErrorBoundary.react'),babelHelpers['extends']({},this.props,{component:'attachment'}),c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({},this.props,{attachment:o,bootloadLoader:p.componentLoader,bootloadPlaceholder:c('React').createElement('div',null),key:(m=this)!=null?(m=m.props)!=null?(m=m.attachment)!=null?m.share_id:m:m:m,module:p.componentName,onComponentLoad:this.$MercuryShareAttachment4}))),p.cx&&p.cx.get(this.props.location));};l.prototype.$MercuryShareAttachment1=function(m){this.props.onComponentLoaded(m);};l.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSponsored:k.bool,isSubattachment:k.bool,isVisible:k.bool,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),messageBubble:k.object,messageID:k.string,onComponentLoaded:k.func.isRequired,onSelect:k.func,pageID:k.string,threadID:k.string.isRequired,afterDecorators:k.array};l.defaultProps={onComponentLoaded:c('emptyFunction')};f.exports=l;}),null);
__d('MessagingFlowerBorderChecker',['MercuryConfig','MercuryMessageCustomizations','MessageBorderType','MessageCustomizationType'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRenderWithFlowerBorder:function i(j){return c('MercuryConfig').WWWMessengerFlowerBorderViewer&&c('MercuryMessageCustomizations').getCustomizationValue(j,c('MessageCustomizationType').BORDER)===c('MessageBorderType').FLOWERS;}};f.exports=h;}),null);
__d('MessengerErrorAttachment.react',['cx','fbt','CurrentUser','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){var m=this.props.attachment.error_msg||i._("This attachment could not be loaded.");return c('React').createElement('div',{className:"_1o12 _52mr"},c('React').createElement('div',{className:"_1o13"},m,this.$MessengerErrorAttachment1()));};l.prototype.$MessengerErrorAttachment1=function(){if(!this.props.attachment.error_msg&&c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser()&&!c('CurrentUser').isWorkUser())return c('React').createElement('div',null,i._("It was probably meant for your \u0040workplace account."));return null;};f.exports=l;}),null);
__d('MessengerFileAttachment.react',['cx','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('Link.react'),{className:"_4pcn _2uf4",target:'_blank',href:this.props.attachment.url},c('React').createElement('div',{className:"_2uf5"}),this.props.attachment.name);};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired};f.exports=l;}),null);
__d('MessengerFromViewerUtils',['CurrentUser','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.author===c('MercuryIDs').getParticipantIDFromUserID(c('CurrentUser').getID());}f.exports={isFromViewer:h};}),null);
__d('MessengerHotLikePreview.react',['cx','Animation','EmojiLikeConstants','HotLikeSound','MessengerHotLikePreviewEvents','MessengerHotLikeSVG.react','MessengerHotLikeUtils','MessengerSupportedEmojiUtils','React','ReactDOM','StickerConstants','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerHotLikePreview5=function(){this.$MessengerHotLikePreview6=new (c('Animation'))(c('ReactDOM').findDOMNode(this));this.$MessengerHotLikePreview7(-2,2,150,1000);this.$MessengerHotLikePreview7(-4,4,100,1000);this.$MessengerHotLikePreview7(-10,10,75,1000);this.$MessengerHotLikePreview6.go();}.bind(this),this.$MessengerHotLikePreview7=function(r,s,t,u){var v=Math.floor(u/t),w=null;for(var x=0;x<v;x++){w=x%2?r:s;this.$MessengerHotLikePreview6.to('rotateZ',w).duration(t).checkpoint();}}.bind(this),this.$MessengerHotLikePreview2=function(r,s){var t=s?c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION:c('MessengerHotLikePreviewEvents').FINISH_ANIMATION;if(this.$MessengerHotLikePreview8)return;this.$MessengerHotLikePreview8=true;var u=Date.now()-this.props.since,v=null;if(this.props.customLike)v=c('MessengerHotLikeUtils').getEmojiSizeForTime(u);var w=c('MessengerHotLikeUtils').getStickerIDForTime(u);c('HotLikeSound').snap(w);var x=c('MessengerHotLikeUtils').getMetadataForHotLike(v||w);this.$MessengerHotLikePreview6.stop();var y=30,z=-10;if(w===c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID){y=0;z=0;}this.$MessengerHotLikePreview4.stop().to('width',x.width*1.2).to('height',x.height*1.2).to('rotateZ',y).duration(100).checkpoint().to('width',x.width*.9).to('height',x.height*.9).to('rotateZ',z).duration(100).checkpoint().to('width',x.width).to('height',x.height).to('rotateZ',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(t,r,w,v);}).go();}.bind(this),this.$MessengerHotLikePreview3=function(r){c('HotLikeSound').pop();this.$MessengerHotLikePreview4.stop().to('width',0).to('height',0).duration(100).ondone(function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').REMOVE,r);}).go();}.bind(this),n;}l.prototype.componentDidMount=function(){this.$MessengerHotLikePreview1=new (c('SubscriptionsHandler'))();this.$MessengerHotLikePreview1.addSubscriptions(c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,this.$MessengerHotLikePreview2),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').POP,this.$MessengerHotLikePreview3));c('HotLikeSound').start();this.$MessengerHotLikePreview4=new (c('Animation'))(c('ReactDOM').findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this.$MessengerHotLikePreview5();};l.prototype.componentWillUnmount=function(){this.$MessengerHotLikePreview1&&this.$MessengerHotLikePreview1.release();};l.prototype.render=function(){if(this.props.customLike){var m=this.props.customLike,n=c('MessengerSupportedEmojiUtils').getNewEmojiData(m.emoji,c('EmojiLikeConstants').size.LARGE),o=n?n.url:this.props.customLike.large;if(m.uri)o=m.uri;return c('React').createElement('div',{className:"_4a9g _383m",style:{backgroundImage:'url('+o+')'}});}return c('React').createElement('div',{className:"_4a9g _576q"},c('React').createElement(c('MessengerHotLikeSVG.react'),{color:this.props.customColor}));};l.propTypes={customLike:k.object,since:k.number};f.exports=l;}),null);
__d('MessengerAttachmentViewer',['Bootloader','MessagesViewer','React','Run','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h={renderVideo:function i(j){c('Bootloader').loadModules(["MessagingVideoViewer.react","messengerForwardAttachmentDialogReact"],function(k,l){var m=l.comp;c('MessagesViewer').renderVideo(c('React').createElement(k,babelHelpers['extends']({},j,{forwardDialogComponent:m})));},'MessengerAttachmentViewer');},bootstrapWithConfig:function i(j,k){c('Bootloader').loadModules(["SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],function(l,m){var n=m.comp;c('MessagesViewer').renderSpotlight(j,k,l,n);},'MessengerAttachmentViewer');},preload:function i(){c('Run').onAfterLoad(function(){c('Bootloader').loadModules(["MessagingVideoViewer.react","SpotlightMessagesViewer","messengerForwardAttachmentDialogReact"],c('emptyFunction'),'MessengerAttachmentViewer');});}};f.exports=h;}),null);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1611092932240778";};j.getQueryID=function(){"use strict";return "719742774850735";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1268180893260151";};j.getQueryID=function(){"use strict";return "393804677650619";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1597236330294464";};j.getQueryID=function(){"use strict";return "728987990612546";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('MessengerSharedMediaReducer',['MessengerSharedMediaActions','MessengerThreadSharedMediaHelper','Set'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessengerSharedMediaActions').Types;function i(r,s){switch(s.type){case h.LOAD_CURRENT:var t=r.get('sharedMedia').get(s.threadFBID);if(t){var u=t.edges.find(function(x){return x.node.legacy_attachment_id===s.photoID;});if(u)return r;}var v=r.get('isLoading').get(s.threadFBID);if(!!v&&v.curr)return r;var w=q(r,s.threadFBID,'curr',true);c('MessengerThreadSharedMediaHelper').search(s.threadFBID,s.photoID,function(x){return c('MessengerSharedMediaActions').currentLoaded(x);});return w;}return r;}function j(r,s){switch(s.type){case h.LOAD_MORE_PREVIOUS:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.prev)return r;var u=q(r,s.threadFBID,'prev',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMorePrevious(s.threadFBID,s.afterCursor,s.first,function(v){return c('MessengerSharedMediaActions').previousLoaded(v);});return u;}return r;}function k(r,s){switch(s.type){case h.LOAD_MORE_LATEST:var t=r.get('isLoading').get(s.threadFBID);if(!!t&&t.latest)return r;var u=q(r,s.threadFBID,'latest',true);if(u===null)return r;c('MessengerThreadSharedMediaHelper').loadMoreLatest(s.threadFBID,s.beforeCursor,s.last,function(v){return c('MessengerSharedMediaActions').latestLoaded(v);});return u;}return r;}function l(r,s){switch(s.type){case h.CURRENT_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=v.edges.length,x=q(r,u,'curr',false);if(w!==0){var y=p(r.get('sharedMedia').get(u),v,0),z=r.get('sharedMedia').set(u,y);x=x.set('sharedMedia',z);var aa=v.edges[0];c('MessengerThreadSharedMediaHelper').loadMorePrevious(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').previousLoaded(ba);});c('MessengerThreadSharedMediaHelper').loadMoreLatest(u,aa.cursor,10,function(ba){return c('MessengerSharedMediaActions').latestLoaded(ba);});}return x;}return r;}function m(r,s){switch(s.type){case h.PREVIOUS_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'prev',false),x=p(r.get('sharedMedia').get(u),v,1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function n(r,s){switch(s.type){case h.LATEST_LOADED:var t=s.data,u=Object.keys(t)[0],v=t[u].message_shared_media,w=q(r,u,'latest',false),x=p(r.get('sharedMedia').get(u),v,-1),y=r.get('sharedMedia').set(u,x);w=w.set('sharedMedia',y);return w;}return r;}function o(r,s){switch(s.type){case h.DELETE_PHOTOS:var t=s.threadFBID,u=s.photoFBIDs,v=r.get('sharedMedia').get(t),w=new (c('Set'))(u.map(function(z){return z.toString();}));v.edges=v.edges.filter(function(z){return !w.has(z.node.legacy_attachment_id);});var x=r.get('sharedMedia').set(t,v),y=r.set('sharedMedia',x);return y;}return r;}function p(r,s,t){var u={};u.count=s.count;if(t===1&&r){var v=r.edges;u.has_previous_page=r.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0){u.edges=v.concat(s.edges);}else u.edges=v;}else if(t===-1&&r){var w=r.edges;u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=r.has_next_page;if(s.edges.length>0){u.edges=s.edges.concat(w);}else u.edges=w;}else{u.has_previous_page=s.page_info.has_previous_page;u.has_next_page=s.page_info.has_next_page;if(s.edges.length>0)u.edges=s.edges;}return u;}function q(r,s,t,u){var v=r.get('isLoading').get(s);if(v===undefined){v={};v[t]=u;}else v[t]=u;var w=r.set('isLoading',r.get('isLoading').set(s,v));return w;}f.exports={currentLoaded:l,deletePhotos:o,latestLoaded:n,loadCurrent:i,loadMoreLatest:k,loadMorePrevious:j,previousLoaded:m};}),null);
__d('MessengerSharedMediaState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={sharedMedia:c('immutable').Map({}),isLoading:c('immutable').Map({})};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerSharedMediaStore',['MessengerFluxReduceDispatcher','MessengerSharedMediaActions','MessengerSharedMediaReducer','MessengerSharedMediaState','FluxReduceStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=[].concat(Object.values(c('MessengerSharedMediaReducer')));h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return new (c('MessengerSharedMediaState'))();};k.prototype.reduce=function(l,m){if(m.namespace!==c('MessengerSharedMediaActions').Namespace)return l;return j.reduce(function(n,o){return o(n,m);},l);};function k(){h.apply(this,arguments);}f.exports=new k(c('MessengerFluxReduceDispatcher'));}),null);
__d('reasonReact',['bs_curry','React','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(ca,da,ea){var fa=[ca,da].concat(ea);return c('React').createElement.apply(null,fa);}var i=null;function j(){return 0;}function k(ca,da,ea){c('bs_curry')._1(ca,ea);return c('bs_curry')._1(da,ea);}var l=[j,k];function m(ca,da){return 0;}function n(ca,da,ea){return 0;}function o(ca,da,ea){return 0;}function p(ca,da){return 0;}function q(ca,da,ea){return 1;}function r(ca,da){return ca;}function s(ca,da){return "RenderNotImplemented";}function t(){return 0;}function u(ca,da,ea){var fa=ca.reasonProps;if(fa!==undefined){return fa;}else if(da){return [c('bs_curry')._1(da[0],ca)];}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"A JS component called the Reason component "+(ea+" which didn't implement the JS->Reason React props conversion.")];}function v(ca){return c('React').createClass({displayName:ca,self:function da(){var ea=this;return [ea.enqueueMethod,ea.handleMethod,ea.updateMethod];},transitionNextTotalState:function da(ea,fa){if(typeof fa==="number"){return ea;}else if(fa.tag){return {reasonState:fa[0],reasonStateVersion:ea.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ea.reasonStateVersionUsedToComputeSubelements+1|0};}else return {reasonState:fa[0],reasonStateVersion:ea.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:ea.reasonStateVersionUsedToComputeSubelements};},getInitialState:function da(){var ea=this,fa=u(ea.props,ea.jsPropsToReason,ca),ga=c('bs_curry')._1(fa[0][10],0);return {reasonState:ga,reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1};},componentDidMount:function da(){var ea=this,fa=this,ga=u(fa.props,fa.jsPropsToReason,ca),ha=ga[0];if(ha[4]!==m){var ia=ea.self();return fa.setState(function(ja,ka){var la=ja.reasonState,ma=c('bs_curry')._2(ha[4],la,ia);return ea.transitionNextTotalState(ja,ma);});}else return 0;},componentDidUpdate:function da(ea,fa){var ga=this,ha=this,ia=u(ha.props,ha.jsPropsToReason,ca),ja=ia[0];if(ja[5]!==o){var ka=ga.self(),la=ha.state,ma=fa.reasonState,na=la.reasonState;return c('bs_curry')._3(ja[5],ma,na,ka);}else return 0;},componentWillUnmount:function da(){var ea=this,fa=this,ga=u(fa.props,fa.jsPropsToReason,ca),ha=ga[0];if(ha[6]!==p){var ia=ea.self(),ja=fa.state,ka=ja.reasonState;return c('bs_curry')._2(ha[6],ka,ia);}else return 0;},componentWillUpdate:function da(ea,fa){var ga=this,ha=this,ia=u(ha.props,ha.jsPropsToReason,ca),ja=ia[0];if(ja[7]!==n){var ka=ha.state,la=ga.self(),ma=ka.reasonState,na=fa.reasonState;return c('bs_curry')._3(ja[7],ma,na,la);}else return 0;},componentWillReceiveProps:function da(ea){var fa=this,ga=this,ha=u(ea,ga.jsPropsToReason,ca),ia=ha[0];if(ia[3]!==r){var ja=fa.self();return ga.setState(function(ka,la){var ma=ka.reasonState,na=ka.reasonStateVersion,oa=c('bs_curry')._2(ia[3],ma,ja),pa=+(oa!==ma),qa=pa!==0?na+1|0:na;if(qa!==na){return {reasonState:oa,reasonStateVersion:qa,reasonStateVersionUsedToComputeSubelements:ka.reasonStateVersionUsedToComputeSubelements};}else return ka;});}else return 0;},shouldComponentUpdate:function da(ea,fa,ga){var ha=this,ia=ha.props,ja=+(ea!==ia),ka=fa.reasonStateVersion,la=fa.reasonStateVersionUsedToComputeSubelements,ma=+(la!==ka),na=ja||ma;fa.reasonStateVersionUsedToComputeSubelements=ka;return na;},enqueueMethod:function da(ea){var fa=this,ga=this;return function(ha){var ia=c('bs_curry')._1(ea,ha);return ga.setState(function(ja,ka){var la=ja.reasonState,ma=c('bs_curry')._2(ia,la,fa.self());if(ma){var na=fa.transitionNextTotalState(ja,ma);if(na.reasonStateVersion!==ja.reasonStateVersion){return na;}else return i;}else return i;});};},handleMethod:function da(ea){var fa=this,ga=this;return function(ha){var ia=ga.state,ja=ia.reasonState;return c('bs_curry')._3(ea,ha,ja,fa.self());};},updateMethod:function da(ea){var fa=this,ga=this;return function(ha){var ia=ga.state,ja=ia.reasonState,ka=c('bs_curry')._3(ea,ha,ja,fa.self());if(ka){var la=fa.transitionNextTotalState(ia,ka);if(la.reasonStateVersion!==ia.reasonStateVersion){return ga.setState(la);}else return 0;}else return i;};},render:function da(){var ea=this,fa=this,ga=u(fa.props,fa.jsPropsToReason,ca),ha=ea.self(),ia=fa.state,ja=ia.reasonState;return c('bs_curry')._2(ga[0][9],ja,ha);}});}function w(ca){return [ca,v(ca),[0],r,m,o,p,n,q,s,t,0];}var x=w;function y(ca,da,ea){var fa=ca?ca[0]:undefined,ga=da?da[0]:undefined,ha=[ea],ia=ea[11];if(ia){return c('bs_curry')._2(ia[0],fa,ga);}else return c('React').createElement(ea[1],{key:fa,ref:ga,reasonProps:ha});}function z(ca,da){var ea=ca[1].prototype;ea.jsPropsToReason=[da];return ca[1];}var aa=w("interop");function ba(ca,da,ea){var fa=[function(ha,ia){var ja=ca,ka=da,la=ea,ma=ha,na=ia,oa=Object.assign(Object.assign({},ka),{ref:na,key:ma}),pa=[ja,oa].concat(la);return c('React').createElement.apply(null,pa);}],ga=aa.slice();ga[11]=fa;return ga;}g.Callback=l;g.statefulComponent=w;g.statelessComponent=x;g.element=y;g.wrapReasonForJs=z;g.createDomElement=h;g.wrapJsForReason=ba;}),null);
__d('messengerSharedPhotosAlbumViewPhotoReact',['bs_curry','React','reasonReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerSharedPhotosAlbumViewPhotoReact");function i(j,k,l,m,n){var o=h.slice();o[9]=function(p,q){return c('React').createElement("a",{className:j,style:{backgroundImage:"url("+(m+")")},href:"#",onClick:function r(){return c('bs_curry')._1(l,k);}});};return o;}g.component=h;g.make=i;}),null);
__d('messengerSharedPhotosAlbumViewVScrollReact',['cx','bs_array','bs_block','bs_curry','React','ReactDOM','Animation','bs_caml_array','reasonReact','bs_caml_builtin_exceptions','MessengerSharedMediaActions','messengerSharedPhotosAlbumViewPhotoReact'],(function a(b,c,d,e,f,g,h){'use strict';function i(ca){var da=ca[5],ea=da.length;if(ea<48){c('MessengerSharedMediaActions').loadMorePrevious(ca[4],c('bs_caml_array').caml_array_get(da,da.length-1|0).cursor,48);return 0;}else return 0;}function j(ca){if(ca){var da=ca[0];return +((da.scrollTop+da.clientHeight|0)>=(da.scrollHeight-20|0));}else throw c('bs_caml_builtin_exceptions').not_found;}function k(ca){if(ca){return +(ca[0].scrollTop<=20);}else throw c('bs_caml_builtin_exceptions').not_found;}function l(ca){if(ca){return ca[0].clientHeight;}else throw c('bs_caml_builtin_exceptions').not_found;}function m(ca,da){if(ca){new (c('Animation'))(ca[0]).to("scrollTop",da).duration(200).go();return 0;}else return 0;}function n(ca){var da=ca[2];if(da){return m(ca[1],c('ReactDOM').findDOMNode(da[0]).offsetTop-70|0);}else return 0;}function o(ca,da,ea){var fa=da[1],ga=da[7],ha=da[5],ia=da[4],ja=ha.length;if(j(fa)){if(ja<da[6]&&!ga.prev){c('MessengerSharedMediaActions').loadMorePrevious(ia,c('bs_caml_array').caml_array_get(ha,ha.length-1|0).cursor,48);return 0;}else return 0;}else if(k(fa)&&!ga.latest){c('MessengerSharedMediaActions').loadMoreLatest(ia,c('bs_caml_array').caml_array_get(ha,0).cursor,48);return 0;}else return 0;}function p(ca,da){i(ca);var ea=ca[1],fa;if(ea){var ga=c('bs_curry')._1(da[1],o);ea[0].addEventListener("scroll",ga);fa=[ga];}else fa=0;var ha=function ja(ka,la,ma){if(l(la[3])>0){n(la);var na=la[0];if(na){clearInterval(na[0]);var oa=la.slice();return c('bs_block').__(1,[(oa[0]=0,oa)]);}else return 0;}else return 0;},ia=ca.slice();return c('bs_block').__(0,[(ia[0]=[setInterval(c('bs_curry')._1(da[2],ha),200)],ia[8]=fa,ia)]);}function q(ca,da){var ea=ca[1],fa=ca[8];if(ea)if(fa)ea[0].removeEventListener("scroll",fa[0]);var ga=ca[0];if(ga){clearInterval(ga[0]);return 0;}else return 0;}var r=c('reasonReact').statefulComponent("MessengerSharedPhotosAlbumViewVScrollReact");function s(ca,da,ea){da[1]=ca===null?0:[ca];return 0;}function t(ca,da,ea){da[3]=ca===null?0:[ca];return 0;}function u(ca,da,ea){da[2]=ca===null?0:[ca];return 0;}function v(ca,da,ea,fa,ga,ha,ia){var ja=function ka(la){return c('bs_array').map(function(ma){var na=ma.node,oa=+(na.legacy_attachment_id===ha);return c('reasonReact').element([na.legacy_attachment_id],oa!==0?[c('bs_curry')._1(la[1],u)]:0,c('messengerSharedPhotosAlbumViewPhotoReact').make("_3bly",na.legacy_attachment_id,da,na.image1.uri,[]));},ea);};return [r[0],r[1],r[2],function(ka,la){return [ka[0],ka[1],ka[2],ka[3],fa,ea,ga,ca,ka[8]];},p,r[5],q,r[7],r[8],function(ka,la){return c('React').createElement("div",{ref:c('bs_curry')._1(la[1],s),className:"_3xo8",onScroll:c('bs_curry')._1(la[1],o)},c('React').createElement("div",{ref:c('bs_curry')._1(la[1],t),className:"_3xoa"},ja(la)));},function(){return [0,0,0,0,fa,ea,ga,ca,0];},r[11]];}var w=c('reasonReact').wrapReasonForJs(r,function(ca){return v(ca.isLoading,ca.onClick,ca.sharedPhotos,ca.threadID,ca.totalCount,ca.viewedPhoto,[]);}),x=200,y=48,z=6,aa=20,ba=70;g.animationDuration=x;g.imagesToLoad=y;g.photosPerRow=z;g.scrollToEdgeTolerance=aa;g.headerHeight=ba;g.graduallyLoadPhotos=i;g.isScrolledToBottom=j;g.isScrolledToTop=k;g.getScrollHeight=l;g.scrollTo=m;g.autoScrollWhenLoaded=n;g.handleScroll=o;g.didMount=p;g.willUnmount=q;g.component=r;g.setRefChildContainer=s;g.setRefScrollable=t;g.setRefChild=u;g.make=v;g.comp=w;}),null);
__d('MessengerSharedPhotosAlbumView.react',['cx','fbt','messengerSharedPhotosAlbumViewVScrollReact','MessengerPhotoViewCloseLink.react','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerSharedPhotosAlbumViewVScrollReact').comp,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerSharedPhotosAlbumView2=function(){this.props.onClick(this.props.viewedPhoto);}.bind(this),this.$MessengerSharedPhotosAlbumView1=function(){return c('React').createElement('div',{className:"_3bm0 _5l-3",ref:'header'},c('React').createElement(c('ShimButton.react'),{className:"_3bm2",onClick:this.$MessengerSharedPhotosAlbumView2},c('React').createElement('div',{className:"_3bm3"}),i._("Back to photo")),c('React').createElement('div',{className:"_3bm4"},i._("Shared Photos")),c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onCloseSharedPhotos}));}.bind(this),p;}n.prototype.render=function(){return c('React').createElement('div',{className:"_3bl- _5l-3",ref:'window'},this.$MessengerSharedPhotosAlbumView1(),c('React').createElement(l,{isLoading:this.props.isLoading,onClick:this.props.onClick,sharedPhotos:this.props.sharedPhotos,threadID:this.props.threadID,totalCount:this.props.totalCount,viewedPhoto:this.props.viewedPhoto}));};n.propTypes={onClick:m.func.isRequired,onCloseSharedPhotos:m.func.isRequired,sharedPhotos:m.arrayOf(m.object).isRequired,totalCount:m.number.isRequired,viewedPhoto:m.string.isRequired,threadID:m.string.isRequired,isLoading:m.object.isRequired};f.exports=n;}),null);
__d('MessengerSharedPhotosAlbumViewContainer.react',['FluxContainer','MessengerSharedMediaStore','React','MessengerSharedPhotosAlbumView.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={edges:[],count:0,isLoading:{}},m;}k.getStores=function(){return [c('MessengerSharedMediaStore')];};k.calculateState=function(l,m){var n=c('MessengerSharedMediaStore').getState(),o=n.sharedMedia;return {edges:o.get(m.threadID).edges,count:o.get(m.threadID).count,isLoading:n.isLoading.get(m.threadID)};};k.prototype.render=function(){if(this.state.edges.length===0)return null;return c('React').createElement(c('MessengerSharedPhotosAlbumView.react'),{onClick:this.props.onClick,onCloseSharedPhotos:this.props.onCloseSharedPhotos,sharedPhotos:this.state.edges,totalCount:this.state.count,viewedPhoto:this.props.viewedPhoto,threadID:this.props.threadID,isLoading:this.state.isLoading});};k.propTypes={onClick:j.func.isRequired,onCloseSharedPhotos:j.func.isRequired,viewedPhoto:j.string.isRequired,threadID:j.string};f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('bs_js_null_undefined',['bs_js_primitive'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){if(c('bs_js_primitive').is_nil_undef(k)){return k;}else return l(k);}function i(k,l){if(c('bs_js_primitive').is_nil_undef(k)){return 0;}else return l(k);}function j(k){if(k){return k[0];}else return undefined;}g.bind=h;g.iter=i;g.from_opt=j;}),null);
__d('messengerProfileImageWrapperReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerProfileImageWrapper.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('MessengerProfileImageWrapper.react'),{className:c('bs_js_null_undefined').from_opt(i),isMessengerUser:c('utilsRe').optionBoolToNullUndefinedBoolean(j),size:c('bs_js_null_undefined').from_opt(k),customBadge:c('bs_js_null_undefined').from_opt(l),renderOnlineStatus:c('utilsRe').optionBoolToNullUndefinedBoolean(m),tooltipContent:c('bs_js_null_undefined').from_opt(n),threadColor:c('bs_js_null_undefined').from_opt(o),threadType:c('bs_js_null_undefined').from_opt(p),showBadge:c('utilsRe').optionBoolToNullUndefinedBoolean(q)},r);}g.make=h;}),null);
__d('bs_caml_int32',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(n,o){if(o===0){throw c('bs_caml_builtin_exceptions').division_by_zero;}else return n/o|0;}function i(n,o){if(o===0){throw c('bs_caml_builtin_exceptions').division_by_zero;}else return n%o;}function j(n){return (n&255)<<8|(n&65280)>>>8;}function k(n){return (n&255)<<24|(n&65280)<<8|(n&16711680)>>>8|(n&4278190080)>>>24;}var l=Math.imul||function(n,o){o|=0;return ((n>>16)*o<<16)+(n&65535)*o|0;},m=k;g.div=h;g.mod_=i;g.caml_bswap16=j;g.caml_int32_bswap=k;g.caml_nativeint_bswap=m;g.imul=l;}),null);
__d('bs_caml_utils',[],(function a(b,c,d,e,f,g){'use strict';var h=String.prototype.repeat&&function(i,j){return j.repeat(i);}||function(i,j){if(j.length==0||i==0)return '';if(j.length*i>=1<<28)throw new RangeError('repeat count must not overflow maximum string size');var k='';for(;;){if((i&1)==1)k+=j;i>>>=1;if(i==0)break;j+=j;}return k;};g.repeat=h;}),null);
__d('bs_caml_int64',['bs_caml_obj','bs_caml_int32','bs_caml_utils','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';var h=[-2147483648,0],i=[134217727,1],j=[0,1],k=[0,0],l=[-1,4294967295];function m(wa){return +((wa&2147483648)!==0);}function n(wa,xa){var ya=xa[1],za=wa[1],ab=za+ya&4294967295,bb=m(za)&&(m(ya)||!m(ab))||m(ya)&&!m(ab)?1:0,cb=wa[0]+xa[0]+bb&4294967295;return [cb,ab>>>0];}function o(wa){var xa=wa[0]^-1,ya=wa[1]^-1;return [xa,ya>>>0];}function p(wa,xa){if(wa[0]===xa[0]){return +(wa[1]===xa[1]);}else return 0;}function q(wa){if(p(wa,h)){return h;}else return n(o(wa),j);}function r(wa,xa){return n(wa,q(xa));}function s(wa,xa){if(xa){var ya=wa[1];if(xa>=32){return [ya<<(xa-32|0),0];}else{var za=ya>>>(32-xa|0)|wa[0]<<xa;return [za,ya<<xa>>>0];}}else return wa;}function t(wa,xa){if(xa){var ya=wa[0],za=xa-32|0;if(za){if(za>0){var ab=ya>>>za;return [0,ab>>>0];}else{var bb=ya>>>xa,cb=ya<<(-za|0)|wa[1]>>>xa;return [bb,cb>>>0];}}else return [0,ya>>>0];}else return wa;}function u(wa,xa){if(xa){var ya=wa[0];if(xa<32){var za=ya>>xa,ab=ya<<(32-xa|0)|wa[1]>>>xa;return [za,ab>>>0];}else{var bb=ya>>(xa-32|0);return [ya>=0?0:-1,bb>>>0];}}else return wa;}function v(wa){if(wa[0]!==0||wa[1]!==0){return 0;}else return 1;}function w(wa,xa){while(true){var ya=xa,za=wa,ab=0,bb,cb=za[0],db=0,eb=0,fb=0;if(cb!==0){fb=4;}else if(za[1]!==0){fb=4;}else return k;if(fb===4)if(ya[0]!==0){eb=3;}else if(ya[1]!==0){eb=3;}else return k;if(eb===3)if(cb!==-2147483648){db=2;}else if(za[1]!==0){db=2;}else{bb=ya[1];ab=1;}if(db===2){var gb=ya[0],hb=za[1],ib=0;if(gb!==-2147483648){ib=3;}else if(ya[1]!==0){ib=3;}else{bb=hb;ab=1;}if(ib===3){var jb=ya[1];if(cb<0){if(gb<0){xa=q(ya);wa=q(za);continue;}else return q(w(q(za),ya));}else if(gb<0){return q(w(za,q(ya)));}else{var kb=cb>>>16,lb=cb&65535,mb=hb>>>16,nb=hb&65535,ob=gb>>>16,pb=gb&65535,qb=jb>>>16,rb=jb&65535,sb=0,tb=0,ub=0,vb=nb*rb;ub=(vb>>>16)+mb*rb;tb=ub>>>16;ub=(ub&65535)+nb*qb;tb=tb+(ub>>>16)+lb*rb;sb=tb>>>16;tb=(tb&65535)+mb*qb;sb+=tb>>>16;tb=(tb&65535)+nb*pb;sb+=tb>>>16;tb=tb&65535;sb=sb+(kb*rb+lb*qb+mb*pb+nb*ob)&65535;var wb=tb|sb<<16,xb=vb&65535|(ub&65535)<<16;return [wb,xb>>>0];}}}if(ab===1)if((bb&1)===0){return k;}else return h;}}function x(wa){var xa=c('bs_caml_int32').caml_int32_bswap(wa[1]),ya=c('bs_caml_int32').caml_int32_bswap(wa[0]);return [xa,ya>>>0];}function y(wa,xa){return [wa[0]^xa[0],(wa[1]^xa[1])>>>0];}function z(wa,xa){return [wa[0]|xa[0],(wa[1]|xa[1])>>>0];}function aa(wa,xa){return [wa[0]&xa[0],(wa[1]&xa[1])>>>0];}function ba(wa,xa){var ya=xa[0],za=wa[0];if(za>ya){return 1;}else if(za<ya){return 0;}else return +(wa[1]>=xa[1]);}function ca(wa,xa){return 1-p(wa,xa);}function da(wa,xa){return 1-ba(wa,xa);}function ea(wa,xa){if(wa[0]>xa[0]){return 1;}else if(wa[0]<xa[0]){return 0;}else return +(wa[1]>xa[1]);}function fa(wa,xa){return 1-ea(wa,xa);}function ga(wa){return wa[0]*4294967296+wa[1];}var ha=Math.pow(2,32),ia=Math.pow(2,63),ja=-Math.pow(2,63);function ka(wa){if(isNaN(wa)||!isFinite(wa)){return k;}else if(wa<=ja){return h;}else if(wa+1>=ia){return i;}else if(wa<0){return q(ka(-wa));}else{var xa=wa/ha|0,ya=wa%ha|0;return [xa,ya>>>0];}}function la(wa,xa){while(true){var ya=xa,za=wa,ab=za[0],bb=0,cb=0;if(ya[0]!==0){cb=2;}else if(ya[1]!==0){cb=2;}else throw c('bs_caml_builtin_exceptions').division_by_zero;if(cb===2)if(ab!==-2147483648){if(ab!==0){bb=1;}else if(za[1]!==0){bb=1;}else return k;}else if(za[1]!==0){bb=1;}else if(p(ya,j)||p(ya,l)){return za;}else if(p(ya,h)){return j;}else{var db=ya[0],eb=u(za,1),fb=s(la(eb,ya),1),gb=0;if(fb[0]!==0){gb=3;}else if(fb[1]!==0){gb=3;}else if(db<0){return j;}else return q(j);if(gb===3){var hb=w(ya,fb),ib=n(za,q(hb));return n(fb,la(ib,ya));}}if(bb===1){var jb=ya[0],kb=0;if(jb!==-2147483648){kb=2;}else if(ya[1]!==0){kb=2;}else return k;if(kb===2)if(ab<0){if(jb<0){xa=q(ya);wa=q(za);continue;}else return q(la(q(za),ya));}else if(jb<0){return q(la(za,q(ya)));}else{var lb=k,mb=za;while(ba(mb,ya)){var nb=Math.max(1,Math.floor(ga(mb)/ga(ya))),ob=Math.ceil(Math.log(nb)/Math.LN2),pb=ob<=48?1:Math.pow(2,ob-48),qb=ka(nb),rb=w(qb,ya);while(rb[0]<0||ea(rb,mb)){nb-=pb;qb=ka(nb);rb=w(qb,ya);}if(v(qb))qb=j;lb=n(lb,qb);mb=n(mb,q(rb));}return lb;}}}}function ma(wa,xa){var ya=w(la(wa,xa),xa);return n(wa,q(ya));}function na(wa,xa){var ya=la(wa,xa),za=w(ya,xa);return [ya,n(wa,q(za))];}function oa(wa,xa){var ya=c('bs_caml_obj').caml_nativeint_compare(wa[0],xa[0]);if(ya){return ya;}else return c('bs_caml_obj').caml_nativeint_compare(wa[1],xa[1]);}function pa(wa){return [wa<0?-1:0,wa>>>0];}function qa(wa){return wa[1]|0;}function ra(wa){var xa=function db(eb){return (eb>>>0).toString(16);},ya=wa[0],za=wa[1],ab=0;if(ya!==0){ab=1;}else if(za!==0){ab=1;}else return "0";if(ab===1)if(za!==0){if(ya!==0){var bb=xa(wa[1]),cb=8-bb.length|0;if(cb<=0){return xa(wa[0])+bb;}else return xa(wa[0])+(c('bs_caml_utils').repeat(cb,"0")+bb);}else return xa(wa[1]);}else return xa(wa[0])+"00000000";}function sa(wa){return [2147483647&wa[0],wa[1]];}function ta(wa){var xa=new Int32Array([wa[1],wa[0]]);return new Float64Array(xa.buffer)[0];}function ua(wa){var xa=new Float64Array([wa]),ya=new Int32Array(xa.buffer),za=ya[1],ab=za,bb=ya[0],cb=bb;return [ab,cb>>>0];}function va(wa,xa){var ya=wa.charCodeAt(xa+4|0)<<32|wa.charCodeAt(xa+5|0)<<40|wa.charCodeAt(xa+6|0)<<48|wa.charCodeAt(xa+7|0)<<56,za=wa.charCodeAt(xa)|wa.charCodeAt(xa+1|0)<<8|wa.charCodeAt(xa+2|0)<<16|wa.charCodeAt(xa+3|0)<<24;return [ya,za>>>0];}g.min_int=h;g.max_int=i;g.one=j;g.zero=k;g.not=o;g.of_int32=pa;g.to_int32=qa;g.add=n;g.neg=q;g.sub=r;g.lsl_=s;g.lsr_=t;g.asr_=u;g.is_zero=v;g.mul=w;g.xor=y;g.or_=z;g.and_=aa;g.swap=x;g.ge=ba;g.eq=p;g.neq=ca;g.lt=da;g.gt=ea;g.le=fa;g.to_float=ga;g.of_float=ka;g.div=la;g.mod_=ma;g.div_mod=na;g.compare=oa;g.to_hex=ra;g.discard_sign=sa;g.float_of_bits=ta;g.bits_of_float=ua;g.get64=va;}),null);
__d('bs_caml_format',['bs_curry','bs_caml_int32','bs_caml_int64','bs_caml_utils','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(aa){throw [c('bs_caml_builtin_exceptions').failure,aa];}function i(aa){if(aa>=65){if(aa>=97){if(aa>=123){return -1;}else return aa-87|0;}else if(aa>=91){return -1;}else return aa-55|0;}else if(aa>57||aa<48){return -1;}else return aa-48|0;}function j(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2;}}function k(aa){var ba=1,ca=2,da=0;if(aa[da]==="-"){ba=-1;da=da+1|0;}var ea=aa.charCodeAt(da),fa=aa.charCodeAt(da+1|0);if(ea===48)if(fa>=89){if(fa!==98){if(fa!==111){if(fa===120){ca=1;da=da+2|0;}}else{ca=0;da=da+2|0;}}else{ca=3;da=da+2|0;}}else if(fa!==66){if(fa!==79){if(fa>=88){ca=1;da=da+2|0;}}else{ca=0;da=da+2|0;}}else{ca=3;da=da+2|0;}return [da,ba,ca];}function l(aa){var ba=k(aa),ca=ba[0],da=j(ba[2]),ea=4294967295,fa=aa.length,ga=ca<fa?aa.charCodeAt(ca):0,ha=i(ga);if(ha<0||ha>=da)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];var ia=function la(ma,na){while(true){var oa=na,pa=ma;if(oa===fa){return pa;}else{var qa=aa.charCodeAt(oa);if(qa===95){na=oa+1|0;continue;}else{var ra=i(qa);if(ra<0||ra>=da){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];}else{var sa=da*pa+ra;if(sa>ea){throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];}else{na=oa+1|0;ma=sa;continue;}}}}}},ja=ba[1]*ia(ha,ca+1|0),ka=ja|0;if(da===10&&ja!==ka)throw [c('bs_caml_builtin_exceptions').failure,"int_of_string"];return ka;}function m(aa){var ba=k(aa),ca=ba[2],da=ba[0],ea=c('bs_caml_int64').of_int32(j(ca)),fa=c('bs_caml_int64').of_int32(ba[1]),ga;switch(ca){case 0:ga=[536870911,4294967295];break;case 1:ga=[268435455,4294967295];break;case 2:ga=[429496729,2576980377];break;case 3:ga=[2147483647,4294967295];break;}var ha=aa.length,ia=da<ha?aa.charCodeAt(da):0,ja=c('bs_caml_int64').of_int32(i(ia));if(c('bs_caml_int64').lt(ja,[0,0])||c('bs_caml_int64').ge(ja,ea))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];var ka=function na(oa,pa){while(true){var qa=pa,ra=oa;if(qa===ha){return ra;}else{var sa=aa.charCodeAt(qa);if(sa===95){pa=qa+1|0;continue;}else{var ta=c('bs_caml_int64').of_int32(i(sa));if(c('bs_caml_int64').lt(ta,[0,0])||c('bs_caml_int64').ge(ta,ea)||c('bs_caml_int64').gt(ra,ga)){throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];}else{var ua=c('bs_caml_int64').add(c('bs_caml_int64').mul(ea,ra),ta);pa=qa+1|0;oa=ua;continue;}}}}},la=c('bs_caml_int64').mul(fa,ka(ja,da+1|0)),ma=c('bs_caml_int64').or_(la,[0,0]);if(c('bs_caml_int64').eq(ea,[0,10])&&c('bs_caml_int64').neq(la,ma))throw [c('bs_caml_builtin_exceptions').failure,"int64_of_string"];return ma;}function n(aa){switch(aa){case 0:return 8;case 1:return 16;case 2:return 10;}}function o(aa){if(aa>=65&&aa<=90||aa>=192&&aa<=214||aa>=216&&aa<=222){return aa+32|0;}else return aa;}function p(aa){var ba=aa.length;if(ba>31)throw [c('bs_caml_builtin_exceptions').invalid_argument,"format_int: format too long"];var ca=["+","-"," ",0,2,0,0,0,1,-1,"f"],da=0;while(true){var ea=da;if(ea>=ba){return ca;}else{var fa=aa.charCodeAt(ea),ga=0;if(fa>=69){if(fa>=88){if(fa>=121){ga=1;}else switch(fa-88|0){case 0:ca[4]=1;ca[7]=1;da=ea+1|0;continue;case 13:case 14:case 15:ga=5;break;case 12:case 17:ga=4;break;case 23:ca[4]=0;da=ea+1|0;continue;case 29:ca[4]=2;da=ea+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:ga=1;break;case 32:ca[4]=1;da=ea+1|0;continue;}}else if(fa>=72){ga=1;}else{ca[5]=1;ca[7]=1;ca[10]=String.fromCharCode(o(fa));da=ea+1|0;continue;}}else{var ha=fa-32|0;if(ha>25||ha<0){ga=1;}else switch(ha){case 3:ca[3]=1;da=ea+1|0;continue;case 0:case 11:ga=2;break;case 13:ca[0]="-";da=ea+1|0;continue;case 14:ca[9]=0;var ia=ea+1|0;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9);};}(ia)()){ca[9]=(c('bs_caml_int32').imul(ca[9],10)+aa.charCodeAt(ia)|0)-48|0;ia=ia+1|0;}da=ia;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:ga=1;break;case 16:ca[2]="0";da=ea+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:ga=3;break;}}switch(ga){case 1:da=ea+1|0;continue;case 2:ca[1]=String.fromCharCode(fa);da=ea+1|0;continue;case 3:ca[6]=0;var ja=ea;while(function(ka){return function(){var la=aa.charCodeAt(ka)-48|0;return +(la>=0&&la<=9);};}(ja)()){ca[6]=(c('bs_caml_int32').imul(ca[6],10)+aa.charCodeAt(ja)|0)-48|0;ja=ja+1|0;}da=ja;continue;case 4:ca[5]=1;ca[4]=2;da=ea+1|0;continue;case 5:ca[5]=1;ca[10]=String.fromCharCode(fa);da=ea+1|0;continue;}}}}function q(aa,ba){var ca=aa[0],da=aa[1],ea=aa[2],fa=aa[3],ga=aa[4],ha=aa[5],ia=aa[6],ja=aa[7],ka=aa[8],la=ba.length;if(ha&&(ka<0||da!=="-"))la=la+1|0;if(fa)if(ga){if(ga===1)la=la+2|0;}else la=la+1|0;var ma="";if(ca==="+"&&ea===" ")for(var na=la,oa=ia-1|0;na<=oa;++na)ma=ma+ea;if(ha)if(ka<0){ma=ma+"-";}else if(da!=="-")ma=ma+da;if(fa&&ga===0)ma=ma+"0";if(fa&&ga===1)ma=ma+"0x";if(ca==="+"&&ea==="0")for(var pa=la,qa=ia-1|0;pa<=qa;++pa)ma=ma+ea;ma=ja?ma+ba.toUpperCase():ma+ba;if(ca==="-")for(var ra=la,sa=ia-1|0;ra<=sa;++ra)ma=ma+" ";return ma;}function r(aa,ba){if(aa==="%d"){return String(ba);}else{var ca=p(aa),da=ca,ea=ba,fa=ea<0?da[5]?(da[8]=-1,-ea):ea>>>0:ea,ga=fa.toString(n(da[4]));if(da[9]>=0){da[2]=" ";var ha=da[9]-ga.length|0;if(ha>0)ga=c('bs_caml_utils').repeat(ha,"0")+ga;}return q(da,ga);}}function s(aa,ba){var ca=p(aa),da=ca[5]&&c('bs_caml_int64').lt(ba,[0,0])?(ca[8]=-1,c('bs_caml_int64').neg(ba)):ba,ea="",fa=ca[4];switch(fa){case 0:var ga=[0,8],ha="01234567";if(c('bs_caml_int64').lt(da,[0,0])){var ia=c('bs_caml_int64').discard_sign(da),ja=c('bs_caml_int64').div_mod(ia,ga),ka=c('bs_caml_int64').add([268435456,0],ja[0]),la=ja[1];ea=String.fromCharCode(ha.charCodeAt(la[1]|0))+ea;while(c('bs_caml_int64').neq(ka,[0,0])){var ma=c('bs_caml_int64').div_mod(ka,ga);ka=ma[0];la=ma[1];ea=String.fromCharCode(ha.charCodeAt(la[1]|0))+ea;}}else{var na=c('bs_caml_int64').div_mod(da,ga),oa=na[0],pa=na[1];ea=String.fromCharCode(ha.charCodeAt(pa[1]|0))+ea;while(c('bs_caml_int64').neq(oa,[0,0])){var qa=c('bs_caml_int64').div_mod(oa,ga);oa=qa[0];pa=qa[1];ea=String.fromCharCode(ha.charCodeAt(pa[1]|0))+ea;}}break;case 1:ea=c('bs_caml_int64').to_hex(da)+ea;break;case 2:var ra=[0,10],sa="0123456789";if(c('bs_caml_int64').lt(da,[0,0])){var ta=c('bs_caml_int64').discard_sign(da),ua=c('bs_caml_int64').div_mod(ta,ra),va=c('bs_caml_int64').div_mod(c('bs_caml_int64').add([0,8],ua[1]),ra),wa=c('bs_caml_int64').add(c('bs_caml_int64').add([214748364,3435973836],ua[0]),va[0]),xa=va[1];ea=String.fromCharCode(sa.charCodeAt(xa[1]|0))+ea;while(c('bs_caml_int64').neq(wa,[0,0])){var ya=c('bs_caml_int64').div_mod(wa,ra);wa=ya[0];xa=ya[1];ea=String.fromCharCode(sa.charCodeAt(xa[1]|0))+ea;}}else{var za=c('bs_caml_int64').div_mod(da,ra),ab=za[0],bb=za[1];ea=String.fromCharCode(sa.charCodeAt(bb[1]|0))+ea;while(c('bs_caml_int64').neq(ab,[0,0])){var cb=c('bs_caml_int64').div_mod(ab,ra);ab=cb[0];bb=cb[1];ea=String.fromCharCode(sa.charCodeAt(bb[1]|0))+ea;}}break;}if(ca[9]>=0){ca[2]=" ";var db=ca[9]-ea.length|0;if(db>0)ea=c('bs_caml_utils').repeat(db,"0")+ea;}return q(ca,ea);}function t(aa,ba){var ca=p(aa),da=ca[9]<0?6:ca[9],ea=ba<0?(ca[8]=-1,-ba):ba,fa="";if(isNaN(ea)){fa="nan";ca[2]=" ";}else if(isFinite(ea)){var ga=ca[10];switch(ga){case "e":fa=ea.toExponential(da);var ha=fa.length;if(fa[ha-3|0]==="e")fa=fa.slice(0,ha-1|0)+("0"+fa.slice(ha-1|0));break;case "f":fa=ea.toFixed(da);break;case "g":var ia=da!==0?da:1;fa=ea.toExponential(ia-1|0);var ja=fa.indexOf("e"),ka=Number(fa.slice(ja+1|0))|0;if(ka<-4||ea>=1e+21||ea.toFixed().length>ia){var la=ja-1|0;while(fa[la]==="0")la=la-1|0;if(fa[la]===".")la=la-1|0;fa=fa.slice(0,la+1|0)+fa.slice(ja);var ma=fa.length;if(fa[ma-3|0]==="e")fa=fa.slice(0,ma-1|0)+("0"+fa.slice(ma-1|0));}else{var na=ia;if(ka<0){na=na-(ka+1|0)|0;fa=ea.toFixed(na);}else while(function(){fa=ea.toFixed(na);return +(fa.length>(ia+1|0));}())na=na-1|0;if(na!==0){var oa=fa.length-1|0;while(fa[oa]==="0")oa=oa-1|0;if(fa[oa]===".")oa=oa-1|0;fa=fa.slice(0,oa+1|0);}}break;default:}}else{fa="inf";ca[2]=" ";}return q(ca,fa);}var u=function aa(ba,ca){var da=+ba;if(ba.length>0&&da===da)return da;ba=ba.replace(/_/g,"");da=+ba;if(ba.length>0&&da===da||/^[+-]?nan$/i.test(ba))return da;if(/^ *0x[0-9a-f_]+p[+-]?[0-9_]+/i.test(ba)){var ea=ba.indexOf('p');ea=ea==-1?ba.indexOf('P'):ea;var fa=+ba.substring(ea+1);da=+ba.substring(0,ea);return da*Math.pow(2,fa);}if(/^\+?inf(inity)?$/i.test(ba))return Infinity;if(/^-inf(inity)?$/i.test(ba))return -Infinity;ca("float_of_string");};function v(aa){return c('bs_curry')._2(u,aa,h);}var w=r,x=r,y=l,z=l;g.caml_format_float=t;g.caml_format_int=r;g.caml_nativeint_format=w;g.caml_int32_format=x;g.caml_float_of_string=v;g.caml_int64_format=s;g.caml_int_of_string=l;g.caml_int32_of_string=y;g.caml_int64_of_string=m;g.caml_nativeint_of_string=z;}),null);
__d('bs_caml_io',['bs_curry','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(u,v){return u+v;}var i=undefined,j=["",function(u,v){var w=v.length-1|0;if(typeof process!=="undefined"&&process.stdout&&process.stdout.write){return process.stdout.write(v);}else if(v[w]==="\n"){return 0;}else return 0;}],k=["",function(u,v){var w=v.length-1|0;if(v[w]==="\n"){return 0;}else return 0;}];function l(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_in not implemented"];}function m(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_open_descriptor_out not implemented"];}function n(u){if(u[0]!==""){c('bs_curry')._2(u[1],u,u[0]);u[0]="";return 0;}else return 0;}var o=function u(v){return typeof process!=="undefined"&&process.stdout&&(process.stdout.write(v),true);};function p(u,v,w,x){var y=w===0&&x===v.length?v:v.slice(w,x);if(typeof process!=="undefined"&&process.stdout&&process.stdout.write&&u===j){return process.stdout.write(y);}else{var z=y.lastIndexOf("\n");if(z<0){u[0]=u[0]+y;return 0;}else{u[0]=u[0]+y.slice(0,z+1|0);n(u);u[0]=u[0]+y.slice(z+1|0);return 0;}}}function q(u,v){return p(u,String.fromCharCode(v),0,1);}function r(u,v,w,x){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input ic not implemented"];}function s(){throw [c('bs_caml_builtin_exceptions').failure,"caml_ml_input_char not implemnted"];}function t(){return [j,[k,0]];}g.$caret=h;g.stdin=i;g.stdout=j;g.stderr=k;g.caml_ml_open_descriptor_in=l;g.caml_ml_open_descriptor_out=m;g.caml_ml_flush=n;g.node_std_output=o;g.caml_ml_output=p;g.caml_ml_output_char=q;g.caml_ml_input=r;g.caml_ml_input_char=s;g.caml_ml_out_channels_list=t;}),null);
__d('bs_caml_missing_polyfill',[],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){throw new Error(j);};g.not_implemented=h;}),null);
__d('bs_caml_string',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(v){return String.fromCharCode(v);}function i(v,w){if(w>=v.length||w<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"];}else return v.charCodeAt(w);}function j(v){if(v<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"String.create"];}else return new Array(v);}function k(v,w){if(v===w){return 0;}else if(v<w){return -1;}else return 1;}function l(v,w,x,y){if(x>0){for(var z=w,aa=(x+w|0)-1|0;z<=aa;++z)v[z]=y;return 0;}else return 0;}function m(v,w,x,y,z){if(z>0){var aa=v.length-w|0;if(z<=aa){for(var ba=0,ca=z-1|0;ba<=ca;++ba)x[y+ba|0]=v.charCodeAt(w+ba|0);return 0;}else{for(var da=0,ea=aa-1|0;da<=ea;++da)x[y+da|0]=v.charCodeAt(w+da|0);for(var fa=aa,ga=z-1|0;fa<=ga;++fa)x[y+fa|0]=0;return 0;}}else return 0;}function n(v,w,x,y,z){if(z>0){if(v===x){var aa=v,ba=w,ca=y,da=z;if(ba<ca){var ea=(aa.length-ca|0)-1|0,fa=da-1|0,ga=ea>fa?fa:ea;for(var ha=ga;ha>=0;--ha)aa[ca+ha|0]=aa[ba+ha|0];return 0;}else if(ba>ca){var ia=(aa.length-ba|0)-1|0,ja=da-1|0,ka=ia>ja?ja:ia;for(var la=0;la<=ka;++la)aa[ca+la|0]=aa[ba+la|0];return 0;}else return 0;}else{var ma=v.length-w|0;if(z<=ma){for(var na=0,oa=z-1|0;na<=oa;++na)x[y+na|0]=v[w+na|0];return 0;}else{for(var pa=0,qa=ma-1|0;pa<=qa;++pa)x[y+pa|0]=v[w+pa|0];for(var ra=ma,sa=z-1|0;ra<=sa;++ra)x[y+ra|0]=0;return 0;}}}else return 0;}function o(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v.charCodeAt(y);return x;}function p(v){var w=v,x=0,y=v.length,z="",aa=y;if(x===0&&y<=4096&&y===w.length){return String.fromCharCode.apply(null,w);}else{var ba=0;while(aa>0){var ca=aa<1024?aa:1024,da=new Array(ca);n(w,ba,da,0,ca);z=z+String.fromCharCode.apply(null,da);aa=aa-ca|0;ba=ba+ca|0;}return z;}}function q(v){var w=v.length,x=new Array(w);for(var y=0,z=w-1|0;y<=z;++y)x[y]=v[y];return p(x);}function r(v){if(v>31){return +(v<127);}else return 0;}function s(v,w){return v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0;}function t(v,w){return ((v.charCodeAt(w)+(v.charCodeAt(w+1|0)<<8)|0)+(v.charCodeAt(w+2|0)<<16)|0)+(v.charCodeAt(w+3|0)<<24)|0;}function u(v,w){if(w<0||w>=v.length){throw [c('bs_caml_builtin_exceptions').invalid_argument,"index out of bounds"];}else return v.charCodeAt(w);}g.bytes_of_string=o;g.bytes_to_string=p;g.caml_is_printable=r;g.caml_string_of_char_array=q;g.caml_string_get=i;g.caml_string_compare=k;g.caml_create_string=j;g.caml_fill_string=l;g.caml_blit_string=m;g.caml_blit_bytes=n;g.caml_string_get16=s;g.caml_string_get32=t;g.string_of_char=h;g.get=u;}),null);
__d('bs_caml_sys',['bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){var s=r.env[q];if(s!==undefined){return s;}else throw c('bs_caml_builtin_exceptions').not_found;}else throw c('bs_caml_builtin_exceptions').not_found;}function i(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return q.uptime();}else return -1;}function j(){return [((Date.now()|0)^4294967295)*Math.random()|0];}function k(){return 127;}function l(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return q.cwd();}else return "/";}function m(){var q=typeof process==="undefined"?undefined:process;if(q!==undefined){return [q.argv[0],q.argv];}else return ["",[""]];}function n(q){var r=typeof process==="undefined"?undefined:process;if(r!==undefined){return r.exit(q);}else return 0;}function o(){throw [c('bs_caml_builtin_exceptions').failure,"caml_sys_is_directory not implemented"];}function p(){throw [c('bs_caml_builtin_exceptions').failure,"caml_sys_file_exists not implemented"];}g.caml_sys_getenv=h;g.caml_sys_time=i;g.caml_sys_random_seed=j;g.caml_sys_system_command=k;g.caml_sys_getcwd=l;g.caml_sys_get_argv=m;g.caml_sys_exit=n;g.caml_sys_is_directory=o;g.caml_sys_file_exists=p;}),null);
__d('bs_camlinternalFormatBasics',['bs_block'],(function a(b,c,d,e,f,g){'use strict';function h(k){if(typeof k==="number"){return 0;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[h(k[0])]);case 1:return c('bs_block').__(1,[h(k[0])]);case 2:return c('bs_block').__(2,[h(k[0])]);case 3:return c('bs_block').__(3,[h(k[0])]);case 4:return c('bs_block').__(4,[h(k[0])]);case 5:return c('bs_block').__(5,[h(k[0])]);case 6:return c('bs_block').__(6,[h(k[0])]);case 7:return c('bs_block').__(7,[h(k[0])]);case 8:return c('bs_block').__(8,[k[0],h(k[1])]);case 9:var l=k[0];return c('bs_block').__(9,[l,l,h(k[2])]);case 10:return c('bs_block').__(10,[h(k[0])]);case 11:return c('bs_block').__(11,[h(k[0])]);case 12:return c('bs_block').__(12,[h(k[0])]);case 13:return c('bs_block').__(13,[h(k[0])]);case 14:return c('bs_block').__(14,[h(k[0])]);}}function i(k,l){if(typeof k==="number"){return l;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[i(k[0],l)]);case 1:return c('bs_block').__(1,[i(k[0],l)]);case 2:return c('bs_block').__(2,[i(k[0],l)]);case 3:return c('bs_block').__(3,[i(k[0],l)]);case 4:return c('bs_block').__(4,[i(k[0],l)]);case 5:return c('bs_block').__(5,[i(k[0],l)]);case 6:return c('bs_block').__(6,[i(k[0],l)]);case 7:return c('bs_block').__(7,[i(k[0],l)]);case 8:return c('bs_block').__(8,[k[0],i(k[1],l)]);case 9:return c('bs_block').__(9,[k[0],k[1],i(k[2],l)]);case 10:return c('bs_block').__(10,[i(k[0],l)]);case 11:return c('bs_block').__(11,[i(k[0],l)]);case 12:return c('bs_block').__(12,[i(k[0],l)]);case 13:return c('bs_block').__(13,[i(k[0],l)]);case 14:return c('bs_block').__(14,[i(k[0],l)]);}}function j(k,l){if(typeof k==="number"){return l;}else switch(k.tag|0){case 0:return c('bs_block').__(0,[j(k[0],l)]);case 1:return c('bs_block').__(1,[j(k[0],l)]);case 2:return c('bs_block').__(2,[k[0],j(k[1],l)]);case 3:return c('bs_block').__(3,[k[0],j(k[1],l)]);case 4:return c('bs_block').__(4,[k[0],k[1],k[2],j(k[3],l)]);case 5:return c('bs_block').__(5,[k[0],k[1],k[2],j(k[3],l)]);case 6:return c('bs_block').__(6,[k[0],k[1],k[2],j(k[3],l)]);case 7:return c('bs_block').__(7,[k[0],k[1],k[2],j(k[3],l)]);case 8:return c('bs_block').__(8,[k[0],k[1],k[2],j(k[3],l)]);case 9:return c('bs_block').__(9,[j(k[0],l)]);case 10:return c('bs_block').__(10,[j(k[0],l)]);case 11:return c('bs_block').__(11,[k[0],j(k[1],l)]);case 12:return c('bs_block').__(12,[k[0],j(k[1],l)]);case 13:return c('bs_block').__(13,[k[0],k[1],j(k[2],l)]);case 14:return c('bs_block').__(14,[k[0],k[1],j(k[2],l)]);case 15:return c('bs_block').__(15,[j(k[0],l)]);case 16:return c('bs_block').__(16,[j(k[0],l)]);case 17:return c('bs_block').__(17,[k[0],j(k[1],l)]);case 18:return c('bs_block').__(18,[k[0],j(k[1],l)]);case 19:return c('bs_block').__(19,[j(k[0],l)]);case 20:return c('bs_block').__(20,[k[0],k[1],j(k[2],l)]);case 21:return c('bs_block').__(21,[k[0],j(k[1],l)]);case 22:return c('bs_block').__(22,[j(k[0],l)]);case 23:return c('bs_block').__(23,[k[0],j(k[1],l)]);case 24:return c('bs_block').__(24,[k[0],k[1],j(k[2],l)]);}}g.concat_fmtty=i;g.erase_rel=h;g.concat_fmt=j;}),null);
__d('bs_pervasives',['bs_curry','bs_caml_io','bs_caml_obj','bs_caml_sys','bs_caml_format','bs_caml_string','bs_caml_exceptions','bs_caml_missing_polyfill','bs_caml_builtin_exceptions','bs_camlinternalFormatBasics'],(function a(b,c,d,e,f,g){'use strict';function h(wc){throw [c('bs_caml_builtin_exceptions').failure,wc];}function i(wc){throw [c('bs_caml_builtin_exceptions').invalid_argument,wc];}var j=c('bs_caml_exceptions').create("Pervasives.Exit");function k(wc,xc){if(c('bs_caml_obj').caml_lessequal(wc,xc)){return wc;}else return xc;}function l(wc,xc){if(c('bs_caml_obj').caml_greaterequal(wc,xc)){return wc;}else return xc;}function m(wc){if(wc>=0){return wc;}else return -wc|0;}function n(wc){return wc^-1;}var o=-2147483648;function p(wc,xc){return wc+xc;}function q(wc){if(wc<0||wc>255){throw [c('bs_caml_builtin_exceptions').invalid_argument,"char_of_int"];}else return wc;}function r(wc){if(wc){return "true";}else return "false";}function s(wc){switch(wc){case "false":return 0;case "true":return 1;default:throw [c('bs_caml_builtin_exceptions').invalid_argument,"bool_of_string"];}}function t(wc){return ""+wc;}function u(wc){var xc=wc.length,yc=0;while(true){var zc=yc;if(zc>=xc){return p(wc,".");}else{var ad=c('bs_caml_string').get(wc,zc);if(ad>=48){if(ad>=58){return wc;}else{yc=zc+1|0;continue;}}else if(ad!==45){return wc;}else{yc=zc+1|0;continue;}}}}function v(wc){return u(c('bs_caml_format').caml_format_float("%.12g",wc));}function w(wc,xc){if(wc){return [wc[0],w(wc[1],xc)];}else return xc;}var x=c('bs_caml_io').stdin,y=c('bs_caml_io').stdout,z=c('bs_caml_io').stderr;function aa(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_out(c('bs_caml_missing_polyfill').not_implemented("caml_sys_open not implemented by bucklescript yet\n"));}function ba(wc){return aa([1,[3,[4,[7,0]]]],438,wc);}function ca(wc){return aa([1,[3,[4,[6,0]]]],438,wc);}function da(){var wc=c('bs_caml_io').caml_ml_out_channels_list(0);while(true){var xc=wc;if(xc){try{c('bs_caml_io').caml_ml_flush(xc[0]);}catch(yc){}wc=xc[1];continue;}else return 0;}}function ea(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length);}function fa(wc,xc){return c('bs_caml_io').caml_ml_output(wc,xc,0,xc.length);}function ga(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output"];}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ha(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"output_substring"];}else return c('bs_caml_io').caml_ml_output(wc,xc,yc,zc);}function ia(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_output_value not implemented by bucklescript yet\n");}function ja(wc){c('bs_caml_io').caml_ml_flush(wc);return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n");}function ka(wc){try{c('bs_caml_io').caml_ml_flush(wc);}catch(xc){}try{return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n");}catch(xc){return 0;}}function la(wc,xc,yc){return c('bs_caml_io').caml_ml_open_descriptor_in(c('bs_caml_missing_polyfill').not_implemented("caml_sys_open not implemented by bucklescript yet\n"));}function ma(wc){return la([0,[7,0]],0,wc);}function na(wc){return la([0,[6,0]],0,wc);}function oa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"input"];}else return c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");}function pa(wc,xc,yc,zc){while(true){var ad=zc,bd=yc;if(ad<=0){return 0;}else{var cd=c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");if(cd){zc=ad-cd|0;yc=bd+cd|0;continue;}else throw c('bs_caml_builtin_exceptions').end_of_file;}}}function qa(wc,xc,yc,zc){if(yc<0||zc<0||yc>(xc.length-zc|0)){throw [c('bs_caml_builtin_exceptions').invalid_argument,"really_input"];}else return pa(wc,xc,yc,zc);}function ra(wc,xc){var yc=c('bs_caml_string').caml_create_string(xc);qa(wc,yc,0,xc);return c('bs_caml_string').bytes_to_string(yc);}function sa(wc){var xc=function zc(ad,bd,cd){while(true){var dd=cd,ed=bd;if(dd){var fd=dd[0],gd=fd.length;c('bs_caml_string').caml_blit_bytes(fd,0,ad,ed-gd|0,gd);cd=dd[1];bd=ed-gd|0;continue;}else return ad;}},yc=function zc(ad,bd){while(true){var cd=bd,dd=ad,ed=c('bs_caml_missing_polyfill').not_implemented("caml_ml_input_scan_line not implemented by bucklescript yet\n");if(ed){if(ed>0){var fd=c('bs_caml_string').caml_create_string(ed-1|0);c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");c('bs_caml_io').caml_ml_input_char(wc);if(dd){var gd=(cd+ed|0)-1|0;return xc(c('bs_caml_string').caml_create_string(gd),gd,[fd,dd]);}else return fd;}else{var hd=c('bs_caml_string').caml_create_string(-ed|0);c('bs_caml_missing_polyfill').not_implemented("caml_ml_input not implemented by bucklescript yet\n");bd=cd-ed|0;ad=[hd,dd];continue;}}else if(dd){return xc(c('bs_caml_string').caml_create_string(cd),cd,dd);}else throw c('bs_caml_builtin_exceptions').end_of_file;}};return c('bs_caml_string').bytes_to_string(yc(0,0));}function ta(){try{return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n");}catch(wc){return 0;}}function ua(wc){return c('bs_caml_io').caml_ml_output_char(y,wc);}function va(wc){return fa(y,wc);}function wa(wc){return ea(y,wc);}function xa(wc){return fa(y,""+wc);}function ya(wc){return fa(y,u(c('bs_caml_format').caml_format_float("%.12g",wc)));}function za(wc){return 0;}function ab(){c('bs_caml_io').caml_ml_output_char(y,10);return c('bs_caml_io').caml_ml_flush(y);}function bb(wc){return c('bs_caml_io').caml_ml_output_char(z,wc);}function cb(wc){return fa(z,wc);}function db(wc){return ea(z,wc);}function eb(wc){return fa(z,""+wc);}function fb(wc){return fa(z,u(c('bs_caml_format').caml_format_float("%.12g",wc)));}function gb(wc){return 0;}function hb(){c('bs_caml_io').caml_ml_output_char(z,10);return c('bs_caml_io').caml_ml_flush(z);}function ib(){c('bs_caml_io').caml_ml_flush(y);return sa(x);}function jb(){return c('bs_caml_format').caml_int_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)));}function kb(){return c('bs_caml_format').caml_float_of_string((c('bs_caml_io').caml_ml_flush(y),sa(x)));}function lb(wc){return wc[1];}function mb(wc,xc){return [c('bs_camlinternalFormatBasics').concat_fmt(wc[0],xc[0]),p(wc[1],p("%,",xc[1]))];}var nb=[da];function ob(wc){var xc=nb[0];nb[0]=function(){c('bs_curry')._1(wc,0);return c('bs_curry')._1(xc,0);};return 0;}function pb(){return c('bs_curry')._1(nb[0],0);}function qb(wc){pb(0);return c('bs_caml_sys').caml_sys_exit(wc);}var rb=2147483647,sb=Infinity,tb=-Infinity,ub=NaN,vb=Number.MAX_VALUE,wb=Number.MIN_VALUE,xb=2.220446049250313e-16,yb=c('bs_caml_io').caml_ml_flush,zb=c('bs_caml_io').caml_ml_output_char,ac=c('bs_caml_io').caml_ml_output_char;function bc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_output_int not implemented by bucklescript yet\n");}function cc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_out not implemented by bucklescript yet\n");}function dc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_out not implemented by bucklescript yet\n");}function ec(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n");}function fc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n");}var gc=c('bs_caml_io').caml_ml_input_char,hc=c('bs_caml_io').caml_ml_input_char;function ic(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_input_int not implemented by bucklescript yet\n");}function jc(){return c('bs_caml_missing_polyfill').not_implemented("caml_input_value not implemented by bucklescript yet\n");}function kc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_in not implemented by bucklescript yet\n");}function lc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_in not implemented by bucklescript yet\n");}function mc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size not implemented by bucklescript yet\n");}function nc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_close_channel not implemented by bucklescript yet\n");}function oc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_set_binary_mode not implemented by bucklescript yet\n");}function pc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_out_64 not implemented by bucklescript yet\n");}function qc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_out_64 not implemented by bucklescript yet\n");}function rc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n");}function sc(wc,xc){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_seek_in_64 not implemented by bucklescript yet\n");}function tc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_pos_in_64 not implemented by bucklescript yet\n");}function uc(){return c('bs_caml_missing_polyfill').not_implemented("caml_ml_channel_size_64 not implemented by bucklescript yet\n");}var vc=[pc,qc,rc,sc,tc,uc];g.invalid_arg=i;g.failwith=h;g.Exit=j;g.min=k;g.max=l;g.abs=m;g.max_int=rb;g.min_int=o;g.lnot=n;g.infinity=sb;g.neg_infinity=tb;g.nan=ub;g.max_float=vb;g.min_float=wb;g.epsilon_float=xb;g.$caret=p;g.char_of_int=q;g.string_of_bool=r;g.bool_of_string=s;g.string_of_int=t;g.string_of_float=v;g.$at=w;g.stdin=x;g.stdout=y;g.stderr=z;g.print_char=ua;g.print_string=va;g.print_bytes=wa;g.print_int=xa;g.print_float=ya;g.print_endline=za;g.print_newline=ab;g.prerr_char=bb;g.prerr_string=cb;g.prerr_bytes=db;g.prerr_int=eb;g.prerr_float=fb;g.prerr_endline=gb;g.prerr_newline=hb;g.read_line=ib;g.read_int=jb;g.read_float=kb;g.open_out=ba;g.open_out_bin=ca;g.open_out_gen=aa;g.flush=yb;g.flush_all=da;g.output_char=zb;g.output_string=fa;g.output_bytes=ea;g.output=ga;g.output_substring=ha;g.output_byte=ac;g.output_binary_int=bc;g.output_value=ia;g.seek_out=cc;g.pos_out=dc;g.out_channel_length=ec;g.close_out=ja;g.close_out_noerr=ka;g.set_binary_mode_out=fc;g.open_in=ma;g.open_in_bin=na;g.open_in_gen=la;g.input_char=gc;g.input_line=sa;g.input=oa;g.really_input=qa;g.really_input_string=ra;g.input_byte=hc;g.input_binary_int=ic;g.input_value=jc;g.seek_in=kc;g.pos_in=lc;g.in_channel_length=mc;g.close_in=nc;g.close_in_noerr=ta;g.set_binary_mode_in=oc;g.LargeFile=vc;g.string_of_format=lb;g.$caret$caret=mb;g.exit=qb;g.at_exit=ob;g.valid_float_lexem=u;g.unsafe_really_input=pa;g.do_at_exit=pb;}),null);
__d('bs_list',['bs_curry','bs_caml_obj','bs_pervasives','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g){'use strict';function h(bb){var cb=0,db=bb;while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=fb+1|0;continue;}else return fb;}}function i(bb){if(bb){return bb[0];}else throw [c('bs_caml_builtin_exceptions').failure,"hd"];}function j(bb){if(bb){return bb[1];}else throw [c('bs_caml_builtin_exceptions').failure,"tl"];}function k(bb,cb){if(cb<0){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.nth"];}else{var db=bb,eb=cb;while(true){var fb=eb,gb=db;if(gb){if(fb){eb=fb-1|0;db=gb[1];continue;}else return gb[0];}else throw [c('bs_caml_builtin_exceptions').failure,"nth"];}}}function l(bb,cb){while(true){var db=cb,eb=bb;if(eb){cb=[eb[0],db];bb=eb[1];continue;}else return db;}}function m(bb){return l(bb,0);}function n(bb){if(bb){return c('bs_pervasives').$at(bb[0],n(bb[1]));}else return 0;}function o(bb,cb){if(cb){var db=c('bs_curry')._1(bb,cb[0]);return [db,o(bb,cb[1])];}else return 0;}function p(bb,cb,db){if(db){var eb=c('bs_curry')._2(cb,bb,db[0]);return [eb,p(bb+1|0,cb,db[1])];}else return 0;}function q(bb,cb){return p(0,bb,cb);}function r(bb,cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){eb=fb[1];db=[c('bs_curry')._1(bb,fb[0]),gb];continue;}else return gb;}}function s(bb,cb){while(true){var db=cb;if(db){c('bs_curry')._1(bb,db[0]);cb=db[1];continue;}else return 0;}}function t(bb,cb){var db=0,eb=bb,fb=cb;while(true){var gb=fb,hb=db;if(gb){c('bs_curry')._2(eb,hb,gb[0]);fb=gb[1];db=hb+1|0;continue;}else return 0;}}function u(bb,cb,db){while(true){var eb=db,fb=cb;if(eb){db=eb[1];cb=c('bs_curry')._2(bb,fb,eb[0]);continue;}else return fb;}}function v(bb,cb,db){if(cb){return c('bs_curry')._2(bb,cb[0],v(bb,cb[1],db));}else return db;}function w(bb,cb,db){if(cb){if(db){var eb=c('bs_curry')._2(bb,cb[0],db[0]);return [eb,w(bb,cb[1],db[1])];}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.map2"];}else return 0;}function x(bb,cb,db){var eb=0,fb=cb,gb=db;while(true){var hb=gb,ib=fb,jb=eb;if(ib){if(hb){gb=hb[1];fb=ib[1];eb=[c('bs_curry')._2(bb,ib[0],hb[0]),jb];continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"];}else if(hb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.rev_map2"];}else return jb;}}function y(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){c('bs_curry')._2(bb,fb[0],eb[0]);db=eb[1];cb=fb[1];continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.iter2"];}else return 0;}}function z(bb,cb,db,eb){while(true){var fb=eb,gb=db,hb=cb;if(gb){if(fb){eb=fb[1];db=gb[1];cb=c('bs_curry')._3(bb,hb,gb[0],fb[0]);continue;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"];}else if(fb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_left2"];}else return hb;}}function aa(bb,cb,db,eb){if(cb){if(db){return c('bs_curry')._3(bb,cb[0],db[0],aa(bb,cb[1],db[1],eb));}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"];}else if(db){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.fold_right2"];}else return eb;}function ba(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){cb=db[1];continue;}else return 0;}else return 1;}}function ca(bb,cb){while(true){var db=cb;if(db){if(c('bs_curry')._1(bb,db[0])){return 1;}else{cb=db[1];continue;}}else return 0;}}function da(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){db=eb[1];cb=fb[1];continue;}else return 0;}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.for_all2"];}else return 1;}}function ea(bb,cb,db){while(true){var eb=db,fb=cb;if(fb){if(eb){if(c('bs_curry')._2(bb,fb[0],eb[0])){return 1;}else{db=eb[1];cb=fb[1];continue;}}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"];}else if(eb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.exists2"];}else return 0;}}function fa(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0],bb)){cb=db[1];continue;}else return 1;}else return 0;}}function ga(bb,cb){while(true){var db=cb;if(db){if(db[0]===bb){return 1;}else{cb=db[1];continue;}}else return 0;}}function ha(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){cb=db[1];continue;}else return eb[1];}else throw c('bs_caml_builtin_exceptions').not_found;}}function ia(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(eb[0]===bb){return eb[1];}else{cb=db[1];continue;}}else throw c('bs_caml_builtin_exceptions').not_found;}}function ja(bb,cb){while(true){var db=cb;if(db){if(c('bs_caml_obj').caml_compare(db[0][0],bb)){cb=db[1];continue;}else return 1;}else return 0;}}function ka(bb,cb){while(true){var db=cb;if(db){if(db[0][0]===bb){return 1;}else{cb=db[1];continue;}}else return 0;}}function la(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(c('bs_caml_obj').caml_compare(eb[0],bb)){return [eb,la(bb,db)];}else return db;}else return 0;}function ma(bb,cb){if(cb){var db=cb[1],eb=cb[0];if(eb[0]===bb){return db;}else return [eb,ma(bb,db)];}else return 0;}function na(bb,cb){while(true){var db=cb;if(db){var eb=db[0];if(c('bs_curry')._1(bb,eb)){return eb;}else{cb=db[1];continue;}}else throw c('bs_caml_builtin_exceptions').not_found;}}function oa(bb){return function(cb){var db=0,eb=cb;while(true){var fb=eb,gb=db;if(fb){var hb=fb[1],ib=fb[0];if(c('bs_curry')._1(bb,ib)){eb=hb;db=[ib,gb];continue;}else{eb=hb;continue;}}else return l(gb,0);}};}function pa(bb,cb){var db=0,eb=0,fb=cb;while(true){var gb=fb,hb=eb,ib=db;if(gb){var jb=gb[1],kb=gb[0];if(c('bs_curry')._1(bb,kb)){fb=jb;db=[kb,ib];continue;}else{fb=jb;eb=[kb,hb];continue;}}else return [l(ib,0),l(hb,0)];}}function qa(bb){if(bb){var cb=bb[0],db=qa(bb[1]);return [[cb[0],db[0]],[cb[1],db[1]]];}else return [0,0];}function ra(bb,cb){if(bb){if(cb){return [[bb[0],cb[0]],ra(bb[1],cb[1])];}else throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"];}else if(cb){throw [c('bs_caml_builtin_exceptions').invalid_argument,"List.combine"];}else return 0;}function sa(bb,cb,db){if(cb){if(db){var eb=db[0],fb=cb[0];if(c('bs_curry')._2(bb,fb,eb)<=0){return [fb,sa(bb,cb[1],db)];}else return [eb,sa(bb,cb,db[1])];}else return cb;}else return db;}function ta(bb,cb){while(true){var db=cb,eb=bb;if(eb){if(db){cb=db[1];bb=eb-1|0;continue;}else throw [c('bs_caml_builtin_exceptions').assert_failure,["list.ml",223,11]];}else return db;}}function ua(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)<=0){if(c('bs_curry')._2(bb,nb,mb)<=0){return [ob,[nb,[mb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)<=0){return [nb,[ob,[mb,0]]];}else if(c('bs_curry')._2(bb,nb,mb)<=0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)<=0){return [rb,[qb,0]];}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=eb(sb,ib),wb=eb(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)>0){zb=[ec,ac];xb=cc[1];continue;}else{zb=[dc,ac];yb=bc[1];continue;}}else return l(cc,ac);}else return l(bc,ac);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0];if(c('bs_curry')._2(bb,ob,nb)>0){if(c('bs_curry')._2(bb,nb,mb)>0){return [ob,[nb,[mb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)>0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else if(c('bs_curry')._2(bb,ob,mb)>0){return [nb,[ob,[mb,0]]];}else if(c('bs_curry')._2(bb,nb,mb)>0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else jb=1;}else jb=1;}else jb=1;}else if(ib){var pb=ib[1];if(pb){var qb=pb[0],rb=ib[0];if(c('bs_curry')._2(bb,rb,qb)>0){return [rb,[qb,0]];}else return [qb,[rb,0]];}else jb=1;}else jb=1;if(jb===1){var sb=hb>>1,tb=hb-sb|0,ub=ta(sb,ib),vb=db(sb,ib),wb=db(tb,ub),xb=vb,yb=wb,zb=0;while(true){var ac=zb,bc=yb,cc=xb;if(cc){if(bc){var dc=bc[0],ec=cc[0];if(c('bs_curry')._2(bb,ec,dc)<=0){zb=[ec,ac];xb=cc[1];continue;}else{zb=[dc,ac];yb=bc[1];continue;}}else return l(cc,ac);}else return l(bc,ac);}}},fb=h(cb);if(fb<2){return cb;}else return db(fb,cb);}function va(bb,cb){var db=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb<0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb<0){return [ob,[nb,[mb,0]]];}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb<0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb<0){return [nb,[ob,[mb,0]]];}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb<0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub<0){return [nb,[mb,0]];}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb<0){return [xb,[wb,0]];}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=eb(zb,ib),dc=eb(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc>0){gc=[nc,hc];ec=mc;continue;}else{gc=[lc,hc];fc=kc;continue;}}else{gc=[nc,hc];fc=kc;ec=mc;continue;}}else return l(jc,hc);}else return l(ic,hc);}}},eb=function gb(hb,ib){var jb=0;if(hb!==2){if(hb!==3){jb=1;}else if(ib){var kb=ib[1];if(kb){var lb=kb[1];if(lb){var mb=lb[0],nb=kb[0],ob=ib[0],pb=c('bs_curry')._2(bb,ob,nb);if(pb){if(pb>0){var qb=c('bs_curry')._2(bb,nb,mb);if(qb){if(qb>0){return [ob,[nb,[mb,0]]];}else{var rb=c('bs_curry')._2(bb,ob,mb);if(rb){if(rb>0){return [ob,[mb,[nb,0]]];}else return [mb,[ob,[nb,0]]];}else return [ob,[nb,0]];}}else return [ob,[nb,0]];}else{var sb=c('bs_curry')._2(bb,ob,mb);if(sb){if(sb>0){return [nb,[ob,[mb,0]]];}else{var tb=c('bs_curry')._2(bb,nb,mb);if(tb){if(tb>0){return [nb,[mb,[ob,0]]];}else return [mb,[nb,[ob,0]]];}else return [nb,[ob,0]];}}else return [nb,[ob,0]];}}else{var ub=c('bs_curry')._2(bb,nb,mb);if(ub){if(ub>0){return [nb,[mb,0]];}else return [mb,[nb,0]];}else return [nb,0];}}else jb=1;}else jb=1;}else jb=1;}else if(ib){var vb=ib[1];if(vb){var wb=vb[0],xb=ib[0],yb=c('bs_curry')._2(bb,xb,wb);if(yb){if(yb>0){return [xb,[wb,0]];}else return [wb,[xb,0]];}else return [xb,0];}else jb=1;}else jb=1;if(jb===1){var zb=hb>>1,ac=hb-zb|0,bc=ta(zb,ib),cc=db(zb,ib),dc=db(ac,bc),ec=cc,fc=dc,gc=0;while(true){var hc=gc,ic=fc,jc=ec;if(jc){if(ic){var kc=ic[1],lc=ic[0],mc=jc[1],nc=jc[0],oc=c('bs_curry')._2(bb,nc,lc);if(oc){if(oc<0){gc=[nc,hc];ec=mc;continue;}else{gc=[lc,hc];fc=kc;continue;}}else{gc=[nc,hc];fc=kc;ec=mc;continue;}}else return l(jc,hc);}else return l(ic,hc);}}},fb=h(cb);if(fb<2){return cb;}else return db(fb,cb);}var wa=c('bs_pervasives').$at,xa=n,ya=oa,za=ua,ab=ua;g.length=h;g.hd=i;g.tl=j;g.nth=k;g.rev=m;g.append=wa;g.rev_append=l;g.concat=xa;g.flatten=n;g.iter=s;g.iteri=t;g.map=o;g.mapi=q;g.rev_map=r;g.fold_left=u;g.fold_right=v;g.iter2=y;g.map2=w;g.rev_map2=x;g.fold_left2=z;g.fold_right2=aa;g.for_all=ba;g.exists=ca;g.for_all2=da;g.exists2=ea;g.mem=fa;g.memq=ga;g.find=na;g.filter=ya;g.find_all=oa;g.partition=pa;g.assoc=ha;g.assq=ia;g.mem_assoc=ja;g.mem_assq=ka;g.remove_assoc=la;g.remove_assq=ma;g.split=qa;g.combine=ra;g.sort=za;g.stable_sort=ua;g.fast_sort=ab;g.sort_uniq=va;g.merge=sa;}),null);
__d('messengerDialogsRe',['bs_list','bs_curry'],(function a(b,c,d,e,f,g){'use strict';var h=[0],i=[0];function j(){var o=i[0],p=h[0];if(o){var q=o[0];if(c('bs_list').length(p)>0){return c('bs_curry')._1(q,[p]);}else return c('bs_curry')._1(q,0);}else return 0;}function k(o){i[0]=[o];return j(0);}function l(o){h[0]=[o,h[0]];return j(0);}function m(){var o=h[0];h[0]=o?o[1]:0;return j(0);}function n(){h[0]=0;return j(0);}g.visibleDialogs=h;g.setDialogComponentState=i;g.updateComponent=j;g.addHandler=k;g.showDialog=l;g.removeDialog=m;g.removeAllDialogs=n;}),null);
__d('MessengerPhotoInfoDialog.react',['cx','fbt','MessengerEnvironment','messengerContactImageReact','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','messengerDialogsRe','MessengerSpinner.react','MercuryIDs','MercuryTimestamp','MercuryParticipants','React','Relay','RelayQL','XUIDialog.react','XUIDialogHeader.react','XUIDialogHeaderTitle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactImageReact').comp,m=c('React').PropTypes,n=54;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MessengerPhotoInfoDialog6=function(){var u=this.props.fullMedia.exif_data,v='';if(u){if(u.aperture)v=u.aperture+' ';if(u.focal_length){var w=u.focal_length.split('/'),x=parseInt(w[0],10)/(parseInt(w[1],10)||1);v+=x+'mm ';}if(u.iso)v+='ISO '+u.iso;}if(!v.length)return null;return c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Camera")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},u.model||'Camera'),c('React').createElement('div',{className:"_2zn6"},v)));}.bind(this),this.$MessengerPhotoInfoDialog5=function(){var u=this.props.fullMedia,v='';if(u.filesize>1e+06){v=(u.filesize/1e+06).toFixed(2)+'MB';}else if(u.filesize>1000){v=(u.filesize/1000).toFixed(2)+'KB';}else if(u.filesize>0)v=u.filesize+'B';var w=u.__typename==='MessageImage'?(u.original_dimensions.x*u.original_dimensions.y/1e+06).toFixed(2)+'MP':'';return c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Details")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},u.filename),c('React').createElement('div',{className:"_2zn6"},w+' '+u.original_dimensions.x+' x '+u.original_dimensions.y+' '+v)));}.bind(this),this.$MessengerPhotoInfoDialog4=function(event){event.preventDefault();this.props.showHeader&&this.props.showHeader();c('messengerDialogsRe').removeDialog();}.bind(this),this.$MessengerPhotoInfoDialog3=function(u){if(!u){this.props.showHeader&&this.props.showHeader();this.props.closeInfo();}}.bind(this),q;}o.prototype.render=function(){if(!this.props.fullMedia)return null;return c('MessengerEnvironment').messengerui?this.$MessengerPhotoInfoDialog1():this.$MessengerPhotoInfoDialog2();};o.prototype.$MessengerPhotoInfoDialog1=function(){var p=this.props.fullMedia;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerPhotoInfoDialog3,ref:'dialog',type:'default',width:504},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Info")),c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:i._("Done"),onClick:this.$MessengerPhotoInfoDialog4,type:'primary'})),c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Uploaded by")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},p.creator.name),c('React').createElement('div',{className:"_2zn6"},c('MercuryTimestamp').getPreciseTimestamp(p.creation_time*1000))),c('React').createElement('div',{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6());};o.prototype.$MessengerPhotoInfoDialog2=function(){var p=this.props.fullMedia;return c('React').createElement(c('XUIDialog.react'),{onToggle:this.$MessengerPhotoInfoDialog3,shown:this.props.infoOpen,ref:'dialog',type:'serif',width:504},c('React').createElement(c('XUIDialogHeader.react'),null,c('React').createElement(c('XUIDialogHeaderTitle.react'),null,i._("Info"))),c('React').createElement('div',{className:"_2zn1"},c('React').createElement('div',{className:"_2zn2"},i._("Uploaded by")),c('React').createElement('div',{className:"_2zn4"},c('React').createElement('div',{className:"_2zn5"},p.creator.name),c('React').createElement('div',{className:"_2zn6"},c('MercuryTimestamp').getPreciseTimestamp(p.creation_time*1000))),c('React').createElement('div',{className:"_2zn7"},this.showProfilePic())),this.$MessengerPhotoInfoDialog5(),this.$MessengerPhotoInfoDialog6());};o.prototype.showProfilePic=function(){var p=this.props.fullMedia;if(!p){return c('React').createElement(c('MessengerSpinner.react'),null);}else{var q=c('MercuryIDs').getParticipantIDFromUserID(p.creator.id),r=c('MercuryParticipants').getNow(q);if(r)return c('React').createElement(l,{isMessengerUser:r.is_messenger_user,size:n,src:r.big_image_src||r.image_src});return c('React').createElement(c('MessengerSpinner.react'),null);}};o.propTypes={closeInfo:m.func,fullMedia:m.object,infoOpen:m.bool,photoID:m.string,showHeader:m.func};f.exports=c('Relay').createContainer(o,{fragments:{fullMedia:function p(q){return function(){return {children:[{fieldName:'__typename',kind:'Field',metadata:{isRequisite:true},type:'String'},{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{children:[{fieldName:'creation_time',kind:'Field',metadata:{},type:'Time'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'creator',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'filesize',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'iso',kind:'Field',metadata:{},type:'Int'},{fieldName:'aperture',kind:'Field',metadata:{},type:'String'},{fieldName:'focal_length',kind:'Field',metadata:{},type:'String'},{fieldName:'model',kind:'Field',metadata:{},type:'String'}],fieldName:'exif_data',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageImageExifData'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'creation_time',kind:'Field',metadata:{},type:'Time'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],fieldName:'creator',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'Actor'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'MessengerPhotoInfoDialog_react_FullMediaRelayQL',type:'Node'};}();}}});}),null);
__d('SpotlightMessagesViewerContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='SpotlightMessagesViewerContainerRoute';j.paramDefinition={photoID:{type:'String',required:true}};j.queries={fullMedia:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'photoID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(m)]),fieldName:'node',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'id',identifyingArgType:'ID!'},name:'SpotlightMessagesViewerContainerRoute',type:'Node'};}(l.getFragment('fullMedia'));}};f.exports=j;}),null);
__d('MessengerPhotoInfoDialogContainer.react',['MessengerPhotoInfoDialog.react','RelayRootContainer','SpotlightMessagesViewerContainerRoute','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerPhotoInfoDialogContainer',proptypes:{photoID:h.string.isRequired,showHeader:h.func},render:function j(){var k=new (c('SpotlightMessagesViewerContainerRoute'))({photoID:this.props.photoID});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerPhotoInfoDialog.react'),route:k,renderFetched:function(l){return c('React').createElement(c('MessengerPhotoInfoDialog.react'),babelHelpers['extends']({},l,{closeInfo:this.props.closeInfo,photoID:this.props.photoID,infoOpen:this.props.infoOpen,showHeader:this.props.showHeader}));}.bind(this)});}});f.exports=i;}),null);
__d('MessengerPhotoViewBottomBar.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement('div',{className:"_51an _50-m _16zz"},k.children);};f.exports=i;}),null);
__d('MessengerPhotoViewHScroll.react',['cx','Animation','MessengerSharedPhoto.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=200,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerPhotoViewHScroll1=null,p;}n.prototype.componentDidMount=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentDidUpdate=function(){this.$MessengerPhotoViewHScroll2();};n.prototype.componentWillUnmount=function(){this.$MessengerPhotoViewHScroll1&&this.$MessengerPhotoViewHScroll1.stop();this.$MessengerPhotoViewHScroll1=null;};n.prototype.render=function(){var o=this.props.sharedPhotos,p=o.reduce(function(r,s){var t=s.node.image1===null?s.node.image:s.node.image1;if(t)r.push(c('React').createElement('div',{className:"_4dy9",key:s.node.legacy_attachment_id},c('React').createElement(c('MessengerSharedPhoto.react'),{className:"_42rl"+(this.props.photoID!==s.node.legacy_attachment_id?' '+"_q1a":''),fbid:s.node.legacy_attachment_id,onClick:this.props.onScroll,uri:t.uri})));return r;}.bind(this),[]),q=(this.props.width-m)/2;return c('React').createElement('div',{className:"_463g"},c('React').createElement('div',{className:"_463h",ref:'childContainer'},c('React').createElement('div',{className:"_463j",style:{paddingLeft:q,paddingRight:q},ref:'scrollable'},p)));};n.prototype.$MessengerPhotoViewHScroll2=function(){var o=this.refs.childContainer?this.refs.childContainer.scrollLeft:0,p=this.props.sharedPhotos.findIndex(function(r){return r.node.legacy_attachment_id===this.props.photoID;}.bind(this)),q=p*m;if(!this.$MessengerPhotoViewHScroll1)this.$MessengerPhotoViewHScroll1=new (c('Animation'))(this.refs.childContainer);this.$MessengerPhotoViewHScroll1.from('scrollLeft',o).to('scrollLeft',q).duration(l).go();};f.exports=n;}),null);
__d('MessengerPhotoViewHeader.react',['cx','fbt','MessagingForwardingButtonNUX.react','MessengerActions','MessengerPhotoInfoDialogContainer.react','React','SpotlightViewerBottomBarLink','MessengerPhotoViewCloseLink.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerPhotoViewHeader3=function(){if(this.refs.forwardNUX)this.refs.forwardNUX.close();this.props.showForwardDialog&&this.props.showForwardDialog();}.bind(this),this.$MessengerPhotoViewHeader2=function(){return c('React').createElement(c('MessengerPhotoViewCloseLink.react'),{onClick:this.props.onClose});}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('div',{className:"_51an _50-m _3c1i _5l-3",role:'banner'},this.$MessengerPhotoViewHeader1(),this.$MessengerPhotoViewHeader2());};m.prototype.$MessengerPhotoViewHeader1=function(){var n=void 0,o=void 0;if(!this.props.disableForward){n=c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",onClick:this.$MessengerPhotoViewHeader3,ref:'forwardButton'},c('React').createElement('div',{className:"_2msr _3oo2"}),i._("Forward"));o=c('React').createElement(c('MessagingForwardingButtonNUX.react'),{contextRef:function(){return this.refs.forwardButton;}.bind(this),ref:'forwardNUX'},i._("Send this image to other people in separate messages."));}return c('React').createElement('div',{key:'buttonsContainer',ref:'buttons'},c('React').createElement(c('SpotlightViewerBottomBarLink'),{ajaxify:this.props.url,className:"_3c1o",rel:'async'},c('React').createElement('div',{className:"_3ooo _2msr"}),i._("Download")),n,o,c('React').createElement(c('SpotlightViewerBottomBarLink'),{className:"_3c1o",href:'#',onClick:this.props.openInfo,ref:'moreInfo'},c('React').createElement('div',{className:"_3c1k _2msr"}),i._("Info")));};m.propTypes={disableForward:l.bool,onClose:l.func,openInfo:l.func,photoID:l.string,showForwardDialog:l.func,url:l.object};f.exports=m;}),null);
__d("XMessagingVideoAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/attachments\/video\/",{video_id:{type:"String",required:true},video_container_id:{type:"String",required:true},width:{type:"Int",required:true},height:{type:"Int",required:true},start_muted:{type:"Bool",defaultValue:false},no_fullscreen:{type:"Bool",defaultValue:false},load_player_controller:{type:"Bool",defaultValue:false},hide_controls_on_finish:{type:"Bool",defaultValue:false},hide_url_menu_option:{type:"Bool",defaultValue:false},is_share:{type:"Bool",defaultValue:false},render_play_button:{type:"Bool",defaultValue:false},start_timestamp:{type:"Int",defaultValue:0}});}),null);
__d('MessengerVideoPlayer.react',['cx','ActorURI','AsyncRequest','BackgroundImage.react','Event','FullScreen','MessengerSpinner.react','React','ShimButton.react','VideoPlayerReason','VideoPlayerStates','Vector','XMessagingVideoAttachmentController','SpotlightMercurySharedMediaViewer.react','SubscriptionsHandler','MercuryConfig','getFullScreenElement','guid','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l="_ox1";i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$MessengerVideoPlayer2=true;this.$MessengerVideoPlayer3=[];this.$MessengerVideoPlayer4=-1;this.$MessengerVideoPlayer5=false;this.$MessengerVideoPlayer6=false;this.$MessengerVideoPlayer10=function(o){if(!c('MercuryConfig').WWWSpotlightViewVideo&&!this.props.onClick||!this.isVideoClicked(o))return;o.preventDefault();if(c('MercuryConfig').WWWSpotlightViewVideo&&this.props.isOnStage){o.stopPropagation();this.isState(c('VideoPlayerStates').PLAYING)?this.pause(c('VideoPlayerReason').USER):this.play(c('VideoPlayerReason').USER);}else{this.pause(c('VideoPlayerReason').USER);this.props.onClick&&this.props.onClick();}}.bind(this);this.$MessengerVideoPlayer11=function(o){if(!this.isRightClick(o))return;o.stopPropagation();o.preventDefault();c('setImmediate')(function(){this.props.onSelect&&this.props.onSelect();}.bind(this));}.bind(this);this.$MessengerVideoPlayer8=function(){if(!this.$MessengerVideoPlayer2||this.state.forcePause)return;if(this.$MessengerVideoPlayer6){this.play();this.$MessengerVideoPlayer6=false;}}.bind(this);this.$MessengerVideoPlayer7=function(){if(!this.$MessengerVideoPlayer2||this.state.forcePause||!(this.state.playerAPI&&this.state.playerAPI.isMuted()))return;this.$MessengerVideoPlayer6=!!this.state.playerAPI&&this.state.playerAPI.isState(c('VideoPlayerStates').PLAYING);this.pause();}.bind(this);this.state={playerAPI:null,forcePause:false};this.$MessengerVideoPlayer1=c('guid')();if(this.props.isInThread){this.listeners=new (c('SubscriptionsHandler'))();this.listeners.addSubscriptions(c('Event').listen(window,'blur',this.$MessengerVideoPlayer7),c('Event').listen(window,'focus',this.$MessengerVideoPlayer8));}}m.prototype.shouldComponentUpdate=function(n){var o=document.getElementById(this.$MessengerVideoPlayer1.toString()),p=c('FullScreen').isFullScreen();if(o!=null&&p&&o.children[0].children[0]===c('getFullScreenElement')())return false;var q=!!(n.stageDimensions&&n.stageDimensions!==this.props.stageDimensions);if(q){this.$MessengerVideoPlayer4=this.getCurrentTimePosition();this.$MessengerVideoPlayer5=!this.isState(c('VideoPlayerStates').PLAYING);}return !this.props.videoData||n.videoData.id!==this.props.videoData.id||q;};m.prototype.componentWillReceiveProps=function(n){if(!this.$MessengerVideoPlayer2)return;if(this.props.isInThread&&n.isVisible!==this.props.isVisible)n.isVisible&&!this.state.forcePause?this.play():this.pause();};m.prototype.componentDidMount=function(){if(this.props.videoData)this.$MessengerVideoPlayer9();};m.prototype.componentDidUpdate=function(){this.$MessengerVideoPlayer3.forEach(function(n){return n.abandon();});this.$MessengerVideoPlayer3=[];if(this.props.videoData)this.$MessengerVideoPlayer9();};m.prototype.componentWillUnmount=function(){this.pause(c('VideoPlayerReason').UNLOADED);this.seek(0);this.$MessengerVideoPlayer3.forEach(function(n){return n.abandon();});this.listeners&&this.listeners.release();if(this.state.playerAPI)this.state.playerAPI.detachRootNode();};m.prototype.isVideoLoaded=function(){var n=!!this.state.playerAPI;!n;if(this.isState(c('VideoPlayerStates').FALLBACK))return false;return n;};m.prototype.isVideoClicked=function(n){if(n.target instanceof HTMLElement)return n.target.classList.contains(l);return false;};m.prototype.isRightClick=function(n){n=n||window.event;return n.button===2;};m.prototype.play=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.play(n);};m.prototype.pause=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.pause(n);};m.prototype.seek=function(n){if(!this.isVideoLoaded())return;if(this.state.playerAPI)this.state.playerAPI.seek(n);};m.prototype.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1;};m.prototype.render=function(){var n=this.props.videoData,o=c('React').createElement('div',{ref:'placeholder'},c('React').createElement(c('MessengerSpinner.react'),{color:'blue',size:c('MessengerSpinner.react').Sizes.LARGE})),p={};if(n&&n.url){var q=n.original_dimensions;p.backgroundImage='url('+n.url+')';o=c('React').createElement('div',{ref:'placeholder'},c('React').createElement(c('BackgroundImage.react'),{className:this.props.className,width:q.x,height:q.y,loadingIndicatorStyle:'large',backgroundSize:'cover',ref:'placeholder',style:p,src:n.url}));}return c('React').createElement(c('ShimButton.react'),{className:c('joinClasses')(this.props.className,"_4-od"),id:this.$MessengerVideoPlayer1,onClick:this.$MessengerVideoPlayer10,onMouseDown:this.$MessengerVideoPlayer11,style:p},o);};m.prototype.$MessengerVideoPlayer9=function(){var n=this.props.videoData;if(n){var o=n.original_dimensions;if(this.props.stageDimensions)o=c('SpotlightMercurySharedMediaViewer.react').getImageDimensionsForStage(new (c('Vector'))(n.original_dimensions.x,n.original_dimensions.y),this.props.stageDimensions);var p=c('XMessagingVideoAttachmentController').getURIBuilder().setString('video_id',n.legacy_attachment_id).setString('video_container_id',this.$MessengerVideoPlayer1).setInt('width',o.x).setInt('height',o.y).setInt('start_timestamp',this.$MessengerVideoPlayer4>0?Math.round(this.$MessengerVideoPlayer4):0).setBool('start_muted',n.start_muted).setBool('no_fullscreen',n.no_fullscreen).setBool('load_player_controller',true).setBool('hide_controls_on_finish',n.hide_controls_on_finish).setBool('hide_url_menu_option',Boolean(n.hide_url_menu_option)).setBool('is_share',n.is_share).setBool('render_play_button',this.props.isInThread).getURI(),q=this.props.attachment;if(q&&q.metadata&&q.metadata.pageid)p=c('ActorURI').create(p,q.metadata.pageid);var r=new (c('AsyncRequest'))();this.$MessengerVideoPlayer3.push(r);r.setMethod('GET').setStatusElement(this.refs.placeholder).setURI(p).setRelativeTo(this).setReadOnly(true).setHandler(function(s){}).send();}};m.prototype.$MessengerVideoPlayer12=function(){if(this.props.isVisible&&this.isState(c('VideoPlayerStates').FINISHED)){this.seek(0);this.play(c('VideoPlayerReason').LOOP);}else if(this.props.isVisible&&this.isState(c('VideoPlayerStates').PAUSED)&&!this.$MessengerVideoPlayer6){this.setState({forcePause:true});}else if(this.isState(c('VideoPlayerStates').PLAYING))this.setState({forcePause:false});};m.prototype.onVideoLoaded=function(){if(!this.$MessengerVideoPlayer2)return;this.state.playerAPI&&this.state.playerAPI.addListener('stateChange',function(){return this.$MessengerVideoPlayer12();}.bind(this));if(this.props.isVisible&&!this.$MessengerVideoPlayer5&&!this.state.forcePause){this.play(c('VideoPlayerReason').AUTOPLAY);}else this.pause();this.$MessengerVideoPlayer4=-1;this.$MessengerVideoPlayer5=false;};m.prototype.isState=function(n){return !!(this.state.playerAPI&&this.state.playerAPI.isState(n));};m.propTypes={attachment:k.object,className:k.string,isInThread:k.bool,isVisible:k.bool,isOnStage:k.bool,stageDimensions:k.instanceOf(c('Vector')),videoData:k.object,onClick:k.func,onSelect:k.func};m.invokeVideoLoaded=function(n,o,p){n.$MessengerVideoPlayer2=p;if(o.isState(c('VideoPlayerStates').LOADING)){n.stateChangeListener=o.addListener('stateChange',function(){if(!o.isState(c('VideoPlayerStates').LOADING)){if(n.state&&n.state.playerAPI)return;n.setState({playerAPI:o},n.onVideoLoaded);if(n.stateChangeListener)n.stateChangeListener.remove();}});}else n.setState({playerAPI:o},n.onVideoLoaded);};f.exports=m;}),null);
__d('MercuryThreadMetadataRawRenderer',['cx','fbt','Event','CSS','DOM','MercuryActionStatus','MercuryErrorInfo','MercuryStatusTemplates','TooltipData'],(function a(b,c,d,e,f,g,h,i){var j={renderParticipantListWithNoThreadName:function k(l,m,n,o,p,q){var r={callback:true,check_length:true,show_unread_count:true};q=q||{};var s={};for(var t in q)if(r[t]){s[t]=q[t];delete q[t];}var u=n.map(function(z){return o[z];}),v=this.renderRawParticipantList(l,u,n.length,q);v=this.renderRawTitleWithUnreadCount(v,s.show_unread_count?m.unread_count:0);var w=q.abbr_mode,x={};for(var y in q)x[y]=q[y];x.abbr_mode=true;p.forEach(function(z){var aa=p.length>1?this._cloneIfDOMElement(v):v;c('DOM').setContent(z,aa);if(s.check_length&&!w&&z.scrollWidth>z.clientWidth){var ba=this.renderRawParticipantList(l,u,n.length,x),ca=this.renderRawTitleWithUnreadCount(ba,s.show_unread_count?m.unread_count:0);c('DOM').setContent(z,ca);}}.bind(this));s.callback&&s.callback(v);},renderRawParticipantList:function k(l,m,n,o){var p={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};o=o||{};var q=null;if(o.names_renderer){q=o.names_renderer(m);}else q=m.map(function(s){return s.name;});var r=null;if(q.length===0){if(!l){r=i._("New Message");}else r=i._("No Participants");}else if(q.length==1){r=q[0];}else if(q.length==2){if(o.last_separator_uses_and){r=i._("{participant1} and {participant2}",[i.param('participant1',q[0]),i.param('participant2',q[1])]);}else r=i._("{participant1}, {participant2}",[i.param('participant1',q[0]),i.param('participant2',q[1])]);}else if(o.last_separator_uses_and){if(o.abbr_mode){r=i._("{participant1} and {others_link}",[i.param('participant1',q[0]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-1}))]);}else if(q.length==3){r=i._("{participant1}, {participant2} and {participant3}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2])]);}else r=i._("{participant1}, {participant2} and {others_link}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-2}))]);}else if(q.length==3){r=i._("{participant1}, {participant2}, {participant3}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2])]);}else r=i._("{participant1}, {participant2}, {participant3}, {others_link}",[i.param('participant1',q[0]),i.param('participant2',q[1]),i.param('participant3',q[2]),i.param('others_link',this.renderRawParticipantCount({render_subset:true,count:n-3}))]);if(Array.isArray(r))r=c('DOM').create('span',{},r);return r;},renderRawTitleWithUnreadCount:function k(l,m){var n=l;if(m&&m>1)n=c('DOM').create('span',{},i._("{conversation_title} ({unread_count})",[i.param('conversation_title',l),i.param('unread_count',m)]));return n;},renderRawParticipantCount:function k(l){var m=l.render_subset,n;if(!m){n=l.count>1?i._({"*":"{num} people"},[i.param('num',l.count,[0])]):i._("1 person");}else n=l.count>1?i._({"*":"{others_count} others"},[i.param('others_count',l.count,[0])]):i._("1 other");return n;},renderShortNames:function k(l){if(l.length==1)return [l[0].name];return l.map(function(m){return m.short_name;});},renderStatusIndicator:function k(l,m,n){var o;if(l==c('MercuryActionStatus').RESENDING){o=this.renderResendIndicator();}else if(l!==undefined&&l!=c('MercuryActionStatus').UNSENT&&l!=c('MercuryActionStatus').UNCONFIRMED&&l!=c('MercuryActionStatus').SUCCESS)o=this.renderErrorIndicator(m,n);return o;},renderResendIndicator:function k(){return c('MercuryStatusTemplates')[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function k(l,m){if(!l)return null;var n=c('MercuryStatusTemplates')[':fb:mercury:error-indicator'].render(),o=l.is_transient,p=c('MercuryErrorInfo').getMessage(l);if(o)if(c('MercuryErrorInfo').isConnectionError(l)){p=i._("{message} Check your internet connection and click to try again.",[i.param('message',p)]);}else p=i._("{message} Click to send again.",[i.param('message',p)]);c('TooltipData').set(n,p,'above','center');if(m&&o){c('Event').listen(n,'click',m);n.setAttribute('tabindex','0');c('CSS').addClass(n,"_55q-");}return n;},_cloneIfDOMElement:function k(l){if(l&&l.cloneNode){return l.cloneNode();}else return l;}};f.exports=j;}),null);
__d('MessagingRecipientTypeaheadItem.react',['cx','BackgroundImage.react','ChatTypeaheadConstants','ImageBlock.react','LeftRight.react','React','SplitImage.react','MercuryThreadMetadataRawRenderer','TypeaheadViewItem','joinClasses','Keys'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessagingRecipientTypeaheadItem',propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{imageSize:i.number.isRequired}),mixins:[c('TypeaheadViewItem').Mixin],isThreadRecipient:function k(){return this.props.entry.getType()===c('ChatTypeaheadConstants').THREAD_TYPE;},_getImage:function k(){var l=this.props.entry;if(l.getType()===c('ChatTypeaheadConstants').THREAD_TYPE&&!l.getPhoto()){var m=l.getAuxiliaryData();return c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize,srcs:m.participantsToRender.map(function(n){return n.image_src;})});}if(l.getPhoto())return c('React').createElement(c('BackgroundImage.react'),{width:this.props.imageSize,height:this.props.imageSize,backgroundSize:'cover',src:l.getPhoto()});return c('React').createElement('span',null);},_getThreadParticipantList:function k(){if(!this.isThreadRecipient())return null;var l=this.props.entry;return c('MercuryThreadMetadataRawRenderer').renderRawParticipantList(l.getUniqueID(),l.getAuxiliaryData().participantsToRender,l.getAuxiliaryData().thread.participants.length-1,{names_renderer:c('MercuryThreadMetadataRawRenderer').renderShortNames});},_getTitle:function k(){var l=this.props.entry;if(this.isThreadRecipient()&&!l.getTitle())return this._getThreadParticipantList();return l.getTitle();},_getSubtitle:function k(){var l=this.props.entry;if(this.isThreadRecipient()&&!l.getTitle())return this._getThreadParticipantList();return l.getSubtitle()?l.getSubtitle().split(' \u00b7 ')[0]:null;},_onKeyDown:function k(event){if(event.keyCode===c('Keys').SPACE||event.keyCode===c('Keys').RETURN){event.preventDefault();this._onSelect(event);}},render:function k(){var l=this._getSubtitle(),m=c('joinClasses')("_599m"+(' '+"_55xn")+(!l?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''),this.props.className);return c('React').createElement('li',{'aria-selected':this.props.selected,className:m,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,onKeyDown:this._onKeyDown,role:this.props.role},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},this._getImage(),c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null,c('React').createElement('div',{className:"_55xt _599p"},this._getTitle()),c('React').createElement('div',{className:"_55z3 _599q"},l)),this.props.children)));}});f.exports=j;}),null);
__d('MessagingRecipientSelectedList.react',['ix','cx','fbt','xuiglyph','Image.react','LeftRight.react','Map','MessagingRecipientTypeaheadItem.react','React'],(function a(b,c,d,e,f,g,h,i,j,k){var l,m,n=c('React').PropTypes;l=babelHelpers.inherits(o,c('React').Component);m=l&&l.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.$MessagingRecipientSelectedList1=function(u){var v=h("88982");return c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:u.getUniqueID(),entry:u,imageSize:24,onSelect:this.props.onSelect},c('React').createElement(c('Image.react'),{className:"_1jm4",src:v}));}.bind(this),q;}o.prototype.render=function(){'use strict';var p=j._("Send to:"),q=[];this.props.entries.forEach(function(r){return q.push(this.$MessagingRecipientSelectedList1(r));}.bind(this));return c('React').createElement('div',{className:"_1jm5"},c('React').createElement(c('LeftRight.react'),{className:"_1jm6 _2ph-"},c('React').createElement('span',null,p),c('React').createElement('span',null,this.props.entries.size)),c('React').createElement('ul',null,q));};o.propTypes={entries:n.instanceOf(c('Map')),onSelect:n.func.isRequired};f.exports=o;}),null);
__d('MessagingRecipientTypeaheadView.react',['cx','fbt','CenteredContainer.react','Link.react','Map','MessagingRecipientTypeaheadItem.react','React','TypeaheadViewPropTypes','XUISpinner.react'],(function a(b,c,d,e,f,g,h,i){var j,k,l=c('React').PropTypes,m=32;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessagingRecipientTypeaheadView1=function(t){var u=t===this.props.highlightedEntry,v=this.props.selectedEntries.has(t.getUniqueID());return c('React').createElement(c('MessagingRecipientTypeaheadItem.react'),{key:t.getUniqueID(),entry:t,highlighted:u,imageSize:m,selected:v,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight},c('React').createElement(c('Link.react'),{'aria-checked':v,className:"_2i83"+(v?' '+"_2i85":'')+(!v?' '+"_2i86":''),href:'#',role:'checkbox',tabIndex:'0'}));}.bind(this),p;}n.prototype.render=function(){'use strict';if(this.props.entries.length===0&&!this.props.loading)return c('React').createElement(c('CenteredContainer.react'),{className:"_2pi1"},i._("No results"));return c('React').createElement('ul',{id:this.props.ariaOwneeID,className:"_51do",role:this.props.role},this.props.entries.map(this.$MessagingRecipientTypeaheadView1),c('React').createElement('div',{className:"_51dq"},this.props.loading?c('React').createElement(c('XUISpinner.react'),null):null));};n.propTypes=babelHelpers['extends']({},c('TypeaheadViewPropTypes'),{selectedEntries:l.instanceOf(c('Map')),loading:l.bool});n.defaultProps={role:'listbox'};f.exports=n;}),null);
__d("XMessagingForwardAttachmentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/attachments\/forward\/",{});}),null);
__d("XMessengerPlatformShareCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/platform\/share\/",{});}),null);
__d('MessagingForwardAttachmentDialog.react',['ix','cx','fbt','AsyncRequest','ChatSearchSource','Image.react','LayerFadeOnHide','Layout.react','Map','MercuryLocalIDs','MessageShareType','MessagingRecipientSelectedList.react','MessagingRecipientTypeaheadView.react','React','SearchableTextInput.react','ScrollableArea.react','XMessagingForwardAttachmentController','XMessengerPlatformShareCTAController','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','fbglyph','requireWeak'],(function a(b,c,d,e,f,g,h,i,j){var k,l,m=c('Layout.react').Column,n=c('Layout.react').FillColumn,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={bootstrappedEntries:[],entries:[],loading:true,selectedEntries:new (c('Map'))(),sendError:null,sendErrorRecipientMap:null,sending:false,query:''},this.$MessagingForwardAttachmentDialog2=function(v){var w=v.getUniqueID(),x=new (c('Map'))(this.state.selectedEntries);if(x.has(w)){x['delete'](w);}else x.set(w,v);this.setState({selectedEntries:x,sendError:null,sendErrorRecipientMap:null});}.bind(this),this.$MessagingForwardAttachmentDialog3=function(v){var w=v.target.value;this.setState({loading:true,query:w});}.bind(this),this.$MessagingForwardAttachmentDialog4=function(v){this.setState({entries:v});}.bind(this),this.$MessagingForwardAttachmentDialog5=function(v){v===this.state.query&&this.setState({loading:false});}.bind(this),this.$MessagingForwardAttachmentDialog6=function(){var v={};if(this.state.sendError){v=this.state.sendErrorRecipientMap;}else this.state.selectedEntries.forEach(function(y){var z=c('MercuryLocalIDs').generateOfflineThreadingID();v[z]=y.getUniqueID();});var w=this.$MessagingForwardAttachmentDialog7.bind(this,v);if(this.props.shareType===c('MessageShareType').PLATFORM_SHARE_CTA){var x=c('XMessengerPlatformShareCTAController').getURIBuilder().getURI();new (c('AsyncRequest'))(x).setMethod('POST').setHandler(this.$MessagingForwardAttachmentDialog8).setErrorHandler(w).setData({cta_id:this.props.attachmentID,message_id:this.props.messageID,recipient_map:v}).send();}else{x=c('XMessagingForwardAttachmentController').getURIBuilder().getURI();new (c('AsyncRequest'))(x).setMethod('POST').setHandler(this.$MessagingForwardAttachmentDialog8).setErrorHandler(w).setData({attachment_id:this.props.attachmentID,recipient_map:v}).send();}this.setState({sending:true,sendError:null});}.bind(this),this.$MessagingForwardAttachmentDialog8=function(v){this.setState({bootstrappedEntries:[],selectedEntries:new (c('Map'))(),sending:false,query:''},this.props.onClose);}.bind(this),this.$MessagingForwardAttachmentDialog7=function(v,w){this.setState({sending:false,sendError:w.errorSummary,sendErrorRecipientMap:v});}.bind(this),this.$MessagingForwardAttachmentDialog9=function(v){if(!v)this.props.onClose();}.bind(this),r;}p.prototype.componentWillMount=function(){'use strict';this.$MessagingForwardAttachmentDialog1=new (c('ChatSearchSource'))({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});};p.prototype.componentDidMount=function(){'use strict';c('requireWeak')('OrderedFriendsList',function(q){return q.getSearchableEntries(20,function(r){this.setState({bootstrappedEntries:r,loading:false});}.bind(this));}.bind(this));};p.prototype.render=function(){'use strict';var q=j._("Send"),r=null;if(this.state.sending){r=c('React').createElement('div',null,c('React').createElement(c('XUISpinner.react'),null),c('React').createElement('span',{className:"_5s0d _3-99"},j._("Sending")));}else if(this.state.sendError){var s=h("141787");r=c('React').createElement('div',{className:"_5s0d"},c('React').createElement(c('Image.react'),{src:s}),c('React').createElement('span',{className:"_3-99"},this.state.sendError));}var t=j._("Search for people and groups");return c('React').createElement(c('XUIDialog.react'),{behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},hideOnEscape:true,onToggle:this.$MessagingForwardAttachmentDialog9,shown:this.props.shown,width:560},c('React').createElement(c('XUIDialogTitle.react'),null,this.props.title),c('React').createElement(c('XUIDialogBody.react'),{useCustomPadding:true},c('React').createElement(c('Layout.react'),null,c('React').createElement(m,{className:"_5s0e"},c('React').createElement('div',{className:"_2ph_"},c('React').createElement(c('SearchableTextInput.react'),{className:"_5s0f autofocus",onChange:this.$MessagingForwardAttachmentDialog3,onEntriesFound:this.$MessagingForwardAttachmentDialog4,placeholder:t,queryString:this.state.query,searchSource:this.$MessagingForwardAttachmentDialog1,searchSourceOptions:{onQueryFinished:this.$MessagingForwardAttachmentDialog5}})),c('React').createElement(c('ScrollableArea.react'),{className:"_5s0g",height:400,width:360},c('React').createElement(c('MessagingRecipientTypeaheadView.react'),{entries:this.state.query?this.state.entries:this.state.bootstrappedEntries,loading:this.state.loading,selectedEntries:this.state.selectedEntries,onSelect:this.$MessagingForwardAttachmentDialog2}))),c('React').createElement(n,{className:"_5s0h"},c('React').createElement(c('ScrollableArea.react'),{height:457,shadow:false},c('React').createElement(c('MessagingRecipientSelectedList.react'),{entries:this.state.selectedEntries,onSelect:this.$MessagingForwardAttachmentDialog2}))))),c('React').createElement(c('XUIDialogFooter.react'),{leftContent:r},c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this.props.onClose}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',disabled:!this.state.selectedEntries.size||this.state.sending,label:q,onClick:this.$MessagingForwardAttachmentDialog6})));};p.propTypes={attachmentID:o.string.isRequired,messageID:o.string,onClose:o.func,shown:o.bool.isRequired,title:o.string.isRequired,shareType:o.string};p.defaultProps={shareType:c('MessageShareType').IMAGE};f.exports=p;}),null);
__d('PhotoUtils',['Event','URI'],(function a(b,c,d,e,f,g){var h={getImagesFromData:function i(j){var k=[];for(var l in j)if(l.indexOf('image')===0)k.push(j[l]);return k;},getFBIDFromData:function i(j){return j&&j.id;},getOriginalImageFromData:function i(j){return j.original||j.download_image;},getDownloadURLFromData:function i(j){var k=this.getOriginalImageFromData(j);if(!k)return null;var l=new (c('URI'))(k.uri);l.addQueryData({dl:1});return l;},getPermalinkFromData:function i(j){return j.permalink;},canViewerMakeCoverPhoto:function i(j){return !!j.can_viewer_make_cover_photo;},getCoverPhotoURLFromData:function i(j){return new (c('URI'))('/profile.php').addQueryData({preview_cover:h.getFBIDFromData(j)});},preload:function i(j,k,l){var m=j.getDimensions();for(var n=0;n<k.length;++n){var o=m.getBestFitImageFromPhoto(k[n],m.getMaxStageDimensions()),p=new Image();l&&c('Event').listen(p,'load',l.bind(null,k[n]));j.getLogger().log(o.uri);p.src=o.uri;}}};f.exports=h;}),null);
__d('SpotlightMessagesViewerPagers.react',['cx','LeftRight.react','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){return c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('Link.react'),{className:"_322u"+(!k.disablePrevArrow?' '+"_2bbb":'')+(' '+"_50-m")},c('React').createElement('div',{className:(!k.disablePrevArrow?"_4ksl":'')+(!k.disablePrevArrow?' '+"_4ksm":'')})),c('React').createElement(c('Link.react'),{className:"_322u"+(!k.disableNextArrow?' '+"_2bbc":'')+(' '+"_50-m")},c('React').createElement('div',{className:(!k.disableNextArrow?"_4ksl":'')+(!k.disableNextArrow?' '+"_4kso":'')})));};f.exports=i;}),null);
__d('SpotlightViewer',['cx','React','Spotlight.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';if(!this.props.open)return null;var l="_n3";if(this.props.className)l+=' '+this.props.className;return c('React').createElement(c('Spotlight.react'),{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open,key:'photoLayer'},c('React').createElement('div',{className:l,onClick:this.props.onClick,role:'presentation'},this.props.children));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('SpotlightViewerImage',['cx','Image.react','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){'use strict';j.constructor.call(this,l);this.$SpotlightViewerImage3=function(){this.setState({loading:false});}.bind(this);this.state={loading:true};}k.prototype.componentWillReceiveProps=function(l){'use strict';if(l.src!==this.props.src)this.setState({loading:true});};k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_4-od"},this.$SpotlightViewerImage1(),this.$SpotlightViewerImage2());};k.prototype.$SpotlightViewerImage1=function(){'use strict';if(!this.state.loading)return null;return c('React').createElement(c('XUISpinner.react'),{className:"_enh",size:'large'});};k.prototype.$SpotlightViewerImage2=function(){'use strict';return c('React').createElement('div',{className:this.state.loading?"_eni":''},c('React').createElement(c('Image.react'),{onLoad:this.$SpotlightViewerImage3,src:this.props.src,style:{width:this.props.dimensions.x,height:this.props.dimensions.y}}));};f.exports=k;}),null);
__d('SpotlightViewport',['csx','cx','Locale','Parent','React','ReactDOM','Vector','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('React').createClass({displayName:'SpotlightViewport',propTypes:{stageDimensions:j.object.isRequired,useWidth:j.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},timer:null,getInitialState:function l(){return {currentActiveSection:this.sections.NONE,active:true};},componentDidMount:function l(){this._onMouseEnter();},componentWillUnmount:function l(){if(this.props.fadeInNOut)clearTimeout(this.timer);},_onMouseMove:function l(event){var m=c('ReactDOM').findDOMNode(this),n=c('Vector').getEventPosition(event.nativeEvent),o=c('Vector').getElementPosition(m),p=this.props.useWidth?this.props.stageDimensions.x:c('Vector').getElementDimensions(m).x;if(this.props.fadeInNOut)if(this._isMouseOverActionBars(n)){clearTimeout(this.timer);}else this._onMouseEnter();var q,r=n.x-o.x,s=r/p;if(c('Locale').isRTL()){q=s>1-this.PAGE_TO_PREV_PERCENTAGE;}else q=s<this.PAGE_TO_PREV_PERCENTAGE;if(q){this.setState({currentActiveSection:this.sections.BACKWARD});}else this.setState({currentActiveSection:this.sections.FORWARD});},_onClick:function l(event){var m=this.state.currentActiveSection==this.sections.FORWARD,n=event.target;if(!c('Parent').bySelector(n,"._51an"))this.props.onClick&&this.props.onClick(m,event);},_isMouseOverActionBars:function l(m){return m.y<70||m.y>this.props.stageDimensions.y-70;},_onMouseEnter:function l(){this.setState({active:true});if(this.props.fadeInNOut){clearTimeout(this.timer);this.timer=setTimeout(this._onMouseLeave,1000);}},_onMouseLeave:function l(){this.setState({active:false});},makeActive:function l(){this._onMouseEnter();},render:function l(){var m="_4-of"+(!this.state.active&&!this.props.active?' '+"_50-l":'')+(this.state.currentActiveSection===this.sections.BACKWARD?' '+"_516a":'')+(this.state.currentActiveSection===this.sections.FORWARD?' '+"_516b":'')+(this.props.showLoadingIndicator?' '+"_51jp":'');if(this.props.className)m=c('joinClasses')(m,this.props.className);var n={};if(this.props.stageDimensions){n={height:this.props.stageDimensions.y};if(this.props.useWidth)n.width=this.props.stageDimensions.x;}return c('React').createElement('div',{className:m,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,role:'presentation',style:n},this.props.children,c('React').createElement('div',{className:"_4-og"},c('React').createElement('span',{className:"_4-oh"}),this.props.media,c('React').createElement('div',{className:"_4-oi"})));}});f.exports=k;}),null);
__d("XMessagingPhotoDownloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/attachments\/photo\/",{photo_id:{type:"String",required:true}});}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/attachments\/share\/dialog\/",{__asyncDialog:{type:"Int"}});}),null);
__d('SpotlightMercurySharedMediaViewer.react',['csx','cx','fbt','invariant','ActorURI','AsyncDialog','AsyncRequest','ChatPhotoViewFooterHScroll.react','ChatPhotoViewHeader.react','Event','FunnelLogger','KeyEventController','MessagingForwardAttachmentDialog.react','MessengerPhotoInfoDialogContainer.react','MessengerThreadSharedMediaHelper','MessengerVideoPlayer.react','Parent','PhotoUtils','React','SpotlightViewer','SpotlightViewerImage','SpotlightMessagesViewerPagers.react','SpotlightViewport','SubscriptionsHandler','Vector','XMessagingPhotoDownloadController','XMessagingShareAttachmentDialogController'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=88,p=30,q='WWW_MESSENGER_SHARE_TO_FB_FUNNEL',r="_4-og";l=babelHelpers.inherits(s,c('React').Component);m=l&&l.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=m.constructor).call.apply(t,[this].concat(w)),this.$SpotlightMercurySharedMediaViewer1=undefined,this.$SpotlightMercurySharedMediaViewer2=[],this.state={hasPrevPage:false,hasNextPage:false,firstPhotoLoaded:false,isLoading:false,mediaData:[],numberInOneBatch:p,photoData:null,showForward:false,showInfo:false,stageDimensions:new (c('Vector'))()},this.$SpotlightMercurySharedMediaViewer11=function(){if(!this.state.photoData)return null;return c('React').createElement(c('ChatPhotoViewFooterHScroll.react'),{onScroll:this.$SpotlightMercurySharedMediaViewer18,photoID:this.state.photoData.node.id,sharedPhotos:this.state.mediaData,updateNumberInOneBatch:this.$SpotlightMercurySharedMediaViewer19,width:this.state.stageDimensions.x});}.bind(this),this.$SpotlightMercurySharedMediaViewer13=function(){return this.state.showInfo?c('React').createElement(c('MessengerPhotoInfoDialogContainer.react'),{closeInfo:this.$SpotlightMercurySharedMediaViewer21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c('React').createElement('xhp',null);}.bind(this),this.$SpotlightMercurySharedMediaViewer19=function(y){this.setState({numberInOneBatch:y});}.bind(this),this.$SpotlightMercurySharedMediaViewer18=function(y){if(!this.state.mediaData||this.state.isLoading)return;var z=this.state.mediaData.findIndex(function(ba){return ba.node.legacy_attachment_id===y;});if(z<0)return;var aa=this.state.mediaData[z];this.setState({photoData:aa});this.$SpotlightMercurySharedMediaViewer22(z);}.bind(this),this.$SpotlightMercurySharedMediaViewer5=function(y,event){if(this.state.photoData==null||this.state.isLoading)return;if(event&&!!c('Parent').bySelector(event.target,"._3tsq"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===r)this.$SpotlightMercurySharedMediaViewer10();var z=this.state.mediaData.findIndex(function(ba){this.state.photoData!=null||k(0);return ba.node.legacy_attachment_id===this.state.photoData.node.legacy_attachment_id;}.bind(this));if(z<0||z===this.state.mediaData.length-1&&!this.state.hasNextPage&&y)return;if(z===0&&!y){this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(this.state.photoData,1,function(ba){if(ba===0)return;this.$SpotlightMercurySharedMediaViewer5(y);}.bind(this));}.bind(this));return;}var aa=y?this.state.mediaData[z+1]:this.state.mediaData[z-1];this.setState({photoData:aa});this.$SpotlightMercurySharedMediaViewer22(z);}.bind(this),this.$SpotlightMercurySharedMediaViewer22=function(y){var z=this.state.numberInOneBatch,aa=this.state.mediaData;if(y<=z/2){this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer7(aa[0],z,function(){});}.bind(this));}else if(y>=aa.length-z/2&&this.state.hasNextPage)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(aa[aa.length-1],z,function(){});}.bind(this));}.bind(this),this.$SpotlightMercurySharedMediaViewer10=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView();}.bind(this),this.$SpotlightMercurySharedMediaViewer16=function(){this.setState({showForward:true});}.bind(this),this.$SpotlightMercurySharedMediaViewer20=function(){this.setState({showForward:false});}.bind(this),this.$SpotlightMercurySharedMediaViewer15=function(){this.setState({showInfo:true});}.bind(this),this.$SpotlightMercurySharedMediaViewer21=function(){this.setState({showInfo:false});}.bind(this),this.$SpotlightMercurySharedMediaViewer17=function(){this.setState({showForward:false,showInfo:false});c('FunnelLogger').appendAction(q,'click');var y=this.state.photoData;if(!this.$SpotlightMercurySharedMediaViewer14()||!(y&&y.node))return;var z=y.node.legacy_attachment_id,aa=c('XMessagingShareAttachmentDialogController').getURIBuilder().getURI(),ba=new (c('AsyncRequest'))(aa).setData({attachment_id:z}).setMethod('POST');c('AsyncDialog').send(ba);}.bind(this),this.$SpotlightMercurySharedMediaViewer4=function(y){var z=c('MessengerThreadSharedMediaHelper').search(this.props.threadID,String(y),function(aa){return this.$SpotlightMercurySharedMediaViewer23(aa,0,function(){});}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(z);}.bind(this),this.$SpotlightMercurySharedMediaViewer6=function(y,z,aa){var ba=c('MessengerThreadSharedMediaHelper').loadMorePrevious(this.props.threadID,y.cursor,z||1,function(ca){return this.$SpotlightMercurySharedMediaViewer23(ca,1,aa);}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(ba);}.bind(this),this.$SpotlightMercurySharedMediaViewer7=function(y,z,aa){var ba=y?y.cursor:null,ca=c('MessengerThreadSharedMediaHelper').loadMoreLatest(this.props.threadID,ba,z||1,function(da){return this.$SpotlightMercurySharedMediaViewer23(da,-1,aa);}.bind(this));this.$SpotlightMercurySharedMediaViewer2.push(ca);}.bind(this),this.$SpotlightMercurySharedMediaViewer23=function(y,z,aa){var ba=Object.keys(y)[0],ca=y[ba].message_shared_media,da=ca.page_info,ea=ca.edges.length;if(ea!==0){var fa=this.state.mediaData;switch(z){case 0:this.setState({photoData:ca.edges[0],mediaData:[ca.edges[0]],firstPhotoLoaded:true});break;case 1:fa=fa.concat(ca.edges);this.setState({hasNextPage:da.has_next_page,mediaData:fa});break;case -1:fa=ca.edges;fa=fa.concat(this.state.mediaData);this.setState({mediaData:fa,hasPrevPage:da.has_previous_page});break;}}this.setState({isLoading:false});aa(ea);}.bind(this),this.$SpotlightMercurySharedMediaViewer3=function(){var y=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y-o);return y;},this.$SpotlightMercurySharedMediaViewer8=function(){if(this.state.photoData&&this.state.photoData.node){var y=this.state.photoData.node;if(y.__typename&&y.__typename==='MessageVideo')return this.$SpotlightMercurySharedMediaViewer24();var z=this.state.stageDimensions,aa=this.$SpotlightMercurySharedMediaViewer25(y,z);if(!aa)return null;var ba=s.getImageDimensionsForStage(new (c('Vector'))(aa.width,aa.height),z);return this.$SpotlightMercurySharedMediaViewer26(aa,ba);}else return null;}.bind(this),this.$SpotlightMercurySharedMediaViewer26=function(y,z){return c('React').createElement(c('SpotlightViewerImage'),{dimensions:z,ref:'image',src:y.uri});},this.$SpotlightMercurySharedMediaViewer25=function(y,z){var aa=null,ba=c('PhotoUtils').getImagesFromData(y);ba=ba.sort(function(da,ea){return ea.width-da.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)z=new (c('Vector'))(z.x*window.devicePixelRatio,z.y*window.devicePixelRatio);for(var ca=0;ca<ba.length;ca++)if(!aa||ba[ca].width>=z.x||ba[ca].height>=z.y)aa=ba[ca];return aa;},u;}s.prototype.getDefaultProps=function(){return {enableShareToFB:false};};s.prototype.componentDidMount=function(){this.setState({isLoading:true,stageDimensions:this.$SpotlightMercurySharedMediaViewer3()},function(){return this.$SpotlightMercurySharedMediaViewer4(this.props.photoID);}.bind(this));this.$SpotlightMercurySharedMediaViewer1=new (c('SubscriptionsHandler'))();this.$SpotlightMercurySharedMediaViewer1.addSubscriptions(c('Event').listen(window,'resize',function(){this.setState({stageDimensions:this.$SpotlightMercurySharedMediaViewer3()});}.bind(this)),c('KeyEventController').registerKey('LEFT',function(){this.$SpotlightMercurySharedMediaViewer5(false);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$SpotlightMercurySharedMediaViewer5(true);return false;}.bind(this)));if(this.props.enableShareToFB)c('FunnelLogger').startFunnel(q);};s.prototype.componentWillUpdate=function(t,u){if(u.firstPhotoLoaded!==this.state.firstPhotoLoaded)this.setState({isLoading:true},function(){this.$SpotlightMercurySharedMediaViewer6(u.photoData,u.numberInOneBatch,function(){});this.$SpotlightMercurySharedMediaViewer7(u.photoData,u.numberInOneBatch,function(){});}.bind(this));if(u.numberInOneBatch!=this.state.numberInOneBatch&&!u.isLoading)this.setState({isLoading:true},function(){return this.$SpotlightMercurySharedMediaViewer6(u.mediaData[u.mediaData.length-1],u.numberInOneBatch,function(){});}.bind(this));};s.prototype.componentWillUnmount=function(){this.$SpotlightMercurySharedMediaViewer1&&this.$SpotlightMercurySharedMediaViewer1.release();this.$SpotlightMercurySharedMediaViewer1=null;this.$SpotlightMercurySharedMediaViewer2.forEach(function(t){return t.abandon();});};s.prototype.render=function(){var t=this.$SpotlightMercurySharedMediaViewer8(),u=this.state.stageDimensions,v=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var w=this.state.mediaData.findIndex(function(y){this.state.photoData!=null||k(0);return y.node.id===this.state.photoData.node.id;}.bind(this)),x=c('React').createElement('div',null,this.$SpotlightMercurySharedMediaViewer9(),this.props.disablepaging?null:c('React').createElement(c('SpotlightMessagesViewerPagers.react'),{disablePrevArrow:w<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&w>=this.state.mediaData.length-1}));return c('React').createElement('span',null,c('React').createElement(c('SpotlightViewer'),{className:"_53vs",onHide:this.$SpotlightMercurySharedMediaViewer10,open:this.props.photoID!==null,ref:'spotlightViewer',rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:false,fadeInNOut:true,media:t,onClick:this.$SpotlightMercurySharedMediaViewer5,ref:'viewport',showLoadingIndicator:v,stageDimensions:u,useWidth:true},x),this.$SpotlightMercurySharedMediaViewer11()),this.$SpotlightMercurySharedMediaViewer12(),this.$SpotlightMercurySharedMediaViewer13());};s.prototype.$SpotlightMercurySharedMediaViewer9=function(){if(!this.state.photoData)return null;var t=this.state.photoData,u=t.node.legacy_attachment_id,v=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',u).getURI();if(this.props.actorid)v=c('ActorURI').create(v,this.props.actorid);return c('React').createElement(c('ChatPhotoViewHeader.react'),{disableForward:this.props.disableForward,enableShareToFB:this.$SpotlightMercurySharedMediaViewer14(),onClose:this.$SpotlightMercurySharedMediaViewer10,openInfo:this.$SpotlightMercurySharedMediaViewer15,ref:'photoviewheader',showForwardDialog:this.$SpotlightMercurySharedMediaViewer16,showShareDialog:this.$SpotlightMercurySharedMediaViewer17,url:v});};s.prototype.$SpotlightMercurySharedMediaViewer12=function(){if(!this.state.photoData)return null;var t=j._("Forward in separate messages");return c('React').createElement(c('MessagingForwardAttachmentDialog.react'),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMercurySharedMediaViewer20,shown:this.state.showForward,title:t});};s.prototype.$SpotlightMercurySharedMediaViewer14=function(){var t=this.state.photoData;if(!t)return false;return !!this.props.enableShareToFB&&t.node.__typename==='MessageImage'&&t.node.image1.uri.indexOf('.gif')<0;};s.prototype.$SpotlightMercurySharedMediaViewer24=function(){if(this.state.photoData)return c('React').createElement(c('MessengerVideoPlayer.react'),{isVisible:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null;};s.propTypes={disableForward:n.bool,enableShareToFB:n.bool,onClosePhotoView:n.func,photoID:n.string,rootClassName:n.string,threadID:n.string};s.getImageDimensionsForStage=function(t,u){var v=t.x,w=t.y,x=u.x,y=u.y,z=v/w,aa=x/y;if(v>=x||w>=y){if(aa<z){v=x;w=Math.round(x/z);}else if(aa>z){v=Math.round(y*z);w=y;}else{v=x;w=y;}}else if(z<aa){v=Math.round(w*z);}else w=Math.round(v/z);return new (c('Vector'))(v,w);};f.exports=s;}),null);
__d('MercuryThreadImage.react',['cx','ImmutableObject','MercuryIDs','MercuryParticipantsImage.react','MessagingThreadType','MercuryParticipantsConstants','Pixelz.react','React','areEqual'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m,n){return m.thread.image_src!==this.props.thread.image_src||!c('areEqual')(m.thread.participants,this.props.thread.participants)||m.size!==this.props.size||m.viewer!==this.props.viewer||m.useBackground!==this.props.useBackground;};l.prototype.render=function(){var m=this.props.thread,n=this.props.size||c('MercuryParticipantsConstants').BIG_IMAGE_SIZE,o=m.image_src;if(o){if(this.props.useBackground)return c('React').createElement('div',{style:{height:n,backgroundImage:'url('+o+')',backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',backgroundSize:'cover',width:n}});return c('React').createElement(c('Pixelz.react'),{alt:'',height:n,resizeMode:'cover',src:o,width:n});}if(m.thread_type===c('MessagingThreadType').ROOM){var p={height:n+'px',width:n+'px'};if(m.custom_color)p.background=m.custom_color;return c('React').createElement('span',{className:"_asv _asw",style:p},m.name[0]);}var q=c('MercuryIDs').isCanonical(m.thread_id),r=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),s=[];if(m.participants)s=q?m.participants.filter(function(t){return t!==r;}):m.participants.slice(0,3);if(s.length===0&&q)s.push(r);return c('React').createElement(c('MercuryParticipantsImage.react'),{className:this.props.className,participants:s,size:n});};function l(){i.apply(this,arguments);}l.propTypes={thread:k.instanceOf(c('ImmutableObject')).isRequired,viewer:k.string.isRequired,size:k.number,useBackground:k.bool};f.exports=l;}),null);
__d('mercuryThreadImageReact',['reasonReact','bs_js_null_undefined','MercuryThreadImage.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){return c('reasonReact').wrapJsForReason(c('MercuryThreadImage.react'),{size:c('bs_js_null_undefined').from_opt(i),thread:j,useBackground:c('bs_js_null_undefined').from_opt(k),viewer:l},m);}g.make=h;}),null);
__d('messengerThreadImageReact',['utilsRe','MercuryIDs','reasonReact','bs_js_primitive','mercuryThreadImageReact','messengerProfileImageWrapperReact'],(function a(b,c,d,e,f,g){'use strict';function h(l,m){var n=l.other_user_fbid,o=m.size,p=+c('MercuryIDs').isCanonical(l.thread_id);if(c('bs_js_primitive').is_nil_undef(n)){return 0;}else if(p!==0){if(o!==0){var q=c('MercuryIDs').getParticipantIDFromUserID(n),r=m.get(q);if(r!==undefined&&!c('bs_js_primitive').is_nil_undef(r)){return c('utilsRe').isTruthy(r.is_messenger_user);}else return 0;}else return 0;}else return 0;}var i=c('reasonReact').statefulComponent("MessengerThreadImageReact");function j(l,m,n,o,p,q,r){var s=m?m[0]:1,t=i.slice();t[9]=function(u,v){return c('reasonReact').element(0,0,c('messengerProfileImageWrapperReact').make(l,[h(p,o)],n,0,0,0,c('bs_js_primitive').null_undefined_to_opt(p.custom_color),c('bs_js_primitive').null_undefined_to_opt(p.thread_type),[s&&+c('MercuryIDs').isCanonical(p.thread_id)],[c('reasonReact').element(0,0,c('mercuryThreadImageReact').make(n,p,[true],q,[]))]));};return t;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.className),[c('utilsRe').isTruthy(l.showBadge)],c('bs_js_primitive').null_undefined_to_opt(l.size),l.participants,l.thread,l.viewer,[]);});g.getIsMessengerUser=h;g.component=i;g.make=j;g.comp=k;}),null);
__d('messengerComposeViewHeaderReact',['bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerComposeViewHeader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerComposeViewHeader.react'),{className:c('bs_js_null_undefined').from_opt(i),forceHideClearButton:c('bs_js_boolean').to_js_boolean(j),onClear:c('bs_js_null_undefined').from_opt(k),onAddRecipient:l,onRemoveRecipient:m,onResize:n,recipients:o,viewer:p},q);}g.make=h;}),null);
__d('messengerDialogBodyReact',['cx','reasonReact','joinClasses','bs_js_primitive'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerDialogBodyReact");function j(l,m){var n=l?l[0]:"",o=i.slice();o[9]=function(p,q){return c('reasonReact').createDomElement("div",{className:c('joinClasses')("_4eb-",n)},m);};return o;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.className),l.children);});g.component=i;g.make=j;g.comp=k;}),null);
__d('messengerDialogReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerDialog.react','MessengerDialogTitle.react','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','MessengerDialogCancelButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(w){if(w){switch(w[0]){case 0:return ["cancel"];case 1:return ["button"];case 2:return ["confirm"];}}else return 0;}function i(w){if(w){if(w[0]!==0){return ["secondary"];}else return ["primary"];}else return 0;}function j(w,x,y,z,aa,ba,ca,da){return c('reasonReact').wrapJsForReason(c('MessengerDialog.react'),{className:c('bs_js_null_undefined').from_opt(w),onToggle:x,repositionOnUpdate:c('utilsRe').optionBoolToNullUndefinedBoolean(y),shown:c('utilsRe').optionBoolToNullUndefinedBoolean(z),titleID:c('bs_js_null_undefined').from_opt(aa),type:c('bs_js_null_undefined').from_opt(ba),width:c('bs_js_null_undefined').from_opt(ca)},da);}var k=[j];function l(w,x,y){return c('reasonReact').wrapJsForReason(c('MessengerDialogHeader.react'),{className:c('bs_js_null_undefined').from_opt(w),id:c('bs_js_null_undefined').from_opt(x)},y);}var m=[l];function n(w,x){return c('reasonReact').wrapJsForReason(c('MessengerDialogTitle.react'),{className:c('bs_js_null_undefined').from_opt(w)},x);}var o=[n];function p(w,x,y){return c('reasonReact').wrapJsForReason(c('MessengerDialogFooter.react'),{className:c('bs_js_null_undefined').from_opt(w),leftContent:c('bs_js_null_undefined').from_opt(x)},y);}var q=[p];function r(w,x){return c('reasonReact').wrapJsForReason(c('MessengerDialogCancelButton.react'),{onClick:c('bs_js_null_undefined').from_opt(w)},x);}var s=[r];function t(w,x,y,z,aa,ba,ca,da,ea){return c('reasonReact').wrapJsForReason(c('MessengerDialogButton.react'),{action:c('bs_js_null_undefined').from_opt(h(w)),label:c('bs_js_null_undefined').from_opt(x),disabled:c('utilsRe').optionBoolToNullUndefinedBoolean(y),use:c('bs_js_null_undefined').from_opt(z),onClick:c('bs_js_null_undefined').from_opt(aa),type:c('bs_js_null_undefined').from_opt(i(ba)),className:c('bs_js_null_undefined').from_opt(ca),leftContent:c('bs_js_null_undefined').from_opt(da)},ea);}var u=[t],v=0;g.stringOfButtonAction=h;g.stringOfButtonType=i;g.Dialog=k;g.Header=m;g.Title=o;g.Footer=q;g.CancelButton=s;g.Button=u;g.Body=v;}),null);
__d('messengerSpinnerReact',['reasonReact','bs_js_null_undefined','MessengerSpinner.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MessengerSpinner.react'),{className:c('bs_js_null_undefined').from_opt(i),color:c('bs_js_null_undefined').from_opt(j),size:c('bs_js_null_undefined').from_opt(k)},l);}g.make=h;}),null);
__d('messengerForwardAttachmentDialogReact',['ix','cx','fbt','bs_block','bs_curry','React','immutable','imageReact','bs_js_boolean','CurrentUser','fbglyph','reasonReact','AsyncRequest','bs_js_primitive','MercuryLocalIDs','MessageShareType','messengerDialogReact','messengerSpinnerReact','messengerDialogBodyReact','messengerComposeViewHeaderReact','XMessengerPlatformShareCTAController','XMessagingForwardAttachmentController'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=j._("Send"),l=c('reasonReact').statefulComponent("MessengerForwardAttachmentDialogReact");function m(s,t,u){return c('bs_block').__(0,[[t[0].push(s),t[1],t[2]]]);}function n(s,t,u){return c('bs_block').__(0,[[t[0].filter(function(v){return c('bs_js_boolean').to_js_boolean(+(v!==s));}),t[1],t[2]]]);}function o(s,t,u){return c('bs_block').__(0,[[c('immutable').List([]),t[1],t[2]]]);}function p(s,t,u){new (c('AsyncRequest'))(s.getURIBuilder().getURI()).setMethod("POST").setHandler(u).setData(t).send();return 0;}function q(s,t,u,v,w,x,y){var z=function da(ea,fa,ga){if(ea){return 0;}else return c('bs_curry')._1(t,0);},aa=function da(ea,fa,ga){if(ea.payload.success){c('bs_curry')._1(t,0);return c('bs_block').__(0,[[c('immutable').List([]),fa[1],0]]);}else return c('bs_block').__(0,[[fa[0],c('bs_js_primitive').null_undefined_to_opt(ea.payload.error),0]]);},ba=function da(ea,fa,ga){var ha={};fa[0].forEach(function(ja,ka,la){ha[String(c('MercuryLocalIDs').generateOfflineThreadingID(undefined))]=ja.getUniqueID();return true;});var ia=0;if(x&&u&&x[0]===c('MessageShareType').PLATFORM_SHARE_CTA){p(c('XMessengerPlatformShareCTAController'),{cta_id:s,message_id:u[0],recipient_map:ha},c('bs_curry')._1(ga[2],aa));}else ia=1;if(ia===1)p(c('XMessagingForwardAttachmentController'),{attachment_id:s,recipient_map:ha},c('bs_curry')._1(ga[2],aa));return c('bs_block').__(0,[[fa[0],0,1]]);},ca=l.slice();ca[9]=function(da,ea){var fa=da[2],ga=da[1],ha;if(fa!==0){ha=c('React').createElement("div",undefined,c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])),c('React').createElement("span",{className:"_1e1n _3-99"},j._("Sending")));}else if(ga){var ia=h("141787");ha=c('React').createElement("div",{className:"_1e1n"},c('reasonReact').element(0,0,c('imageReact').make(0,0,[ia],0,0,0,0,[])),c('React').createElement("span",{className:"_3-99"},ga[0]));}else ha=null;return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,c('bs_curry')._1(ea[1],z),0,[v],0,0,[560],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[w]))])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('reasonReact').element(0,0,c('messengerComposeViewHeaderReact').make(["_1e1o"],0,[c('bs_curry')._1(ea[2],o)],c('bs_curry')._1(ea[2],m),c('bs_curry')._1(ea[2],n),function(){return 0;},da[0],c('CurrentUser').getID(),[]))])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,[ha],[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[2],[k],[+da[0].isEmpty()||da[2]],0,[c('bs_curry')._1(ea[2],ba)],[0],0,0,[]]))]))]));};ca[10]=function(){return [c('immutable').List([]),0,0];};return ca;}var r=c('reasonReact').wrapReasonForJs(l,function(s){return q(s.attachmentID,s.onClose,c('bs_js_primitive').null_undefined_to_opt(s.messageID),+s.shown,s.title,c('bs_js_primitive').null_undefined_to_opt(s.shareType),[]);});g.sendButtonLabel=k;g.component=l;g.handleAddRecipient=m;g.handleRemoveRecipient=n;g.handleClear=o;g.sendData=p;g.make=q;g.comp=r;}),null);
__d('SpotlightMessengerSharedMediaViewer.react',['csx','cx','fbt','invariant','ActorURI','MessengerPhotoViewHScroll.react','Event','KeyEventController','messengerForwardAttachmentDialogReact','MessengerPhotoInfoDialogContainer.react','MessengerPhotoViewHeader.react','MessengerSharedMediaActions','MessengerVideoPlayer.react','Parent','PhotoUtils','React','SpotlightViewer','SpotlightViewerImage','SpotlightMessagesViewerPagers.react','SpotlightViewport','SubscriptionsHandler','Vector','XMessagingPhotoDownloadController','MessengerPhotoViewBottomBar.react'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('messengerForwardAttachmentDialogReact').comp,o=c('React').PropTypes,p=88,q=80,r=30,s="_4-og";l=babelHelpers.inherits(t,c('React').Component);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.$SpotlightMessengerSharedMediaViewer1=undefined,this.$SpotlightMessengerSharedMediaViewer2=[],this.state={photoData:null,showForward:false,showInfo:false,stageDimensions:new (c('Vector'))()},this.$SpotlightMessengerSharedMediaViewer14=function(z){if(!this.props.sharedMedia)return;var aa=this.props.sharedMedia.findIndex(function(ca){return ca.node.legacy_attachment_id===z;});if(aa<0)return;var ba=this.props.sharedMedia[aa];this.setState({photoData:ba});this.$SpotlightMessengerSharedMediaViewer17(aa);}.bind(this),this.$SpotlightMessengerSharedMediaViewer4=function(z,event){if(this.state.photoData==null)return;var aa=this.state.photoData;if(event&&!!c('Parent').bySelector(event.target,"._3tsq"))return;if(event&&event.target instanceof HTMLElement&&event.target.className===s)this.$SpotlightMessengerSharedMediaViewer7();var ba=this.props.sharedMedia.findIndex(function(da){return da.node.legacy_attachment_id===aa.node.legacy_attachment_id;});if(ba<0||ba===this.props.sharedMedia.length-1&&!this.props.hasNextPage&&z)return;if(ba===0&&!z){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,this.props.sharedMedia[0].cursor,r);return;}var ca=z?this.props.sharedMedia[ba+1]:this.props.sharedMedia[ba-1];this.setState({photoData:ca});this.$SpotlightMessengerSharedMediaViewer17(ba);}.bind(this),this.$SpotlightMessengerSharedMediaViewer7=function(){if(this.props.photoID===null)return;this.setState({photoData:null});this.props.onClosePhotoView();}.bind(this),this.$SpotlightMessengerSharedMediaViewer12=function(){this.setState({showForward:true});}.bind(this),this.$SpotlightMessengerSharedMediaViewer15=function(){this.setState({showForward:false});}.bind(this),this.$SpotlightMessengerSharedMediaViewer11=function(){this.setState({showInfo:true});}.bind(this),this.$SpotlightMessengerSharedMediaViewer16=function(){this.setState({showInfo:false});}.bind(this),v;}t.prototype.componentDidMount=function(){var u=this.props.sharedMedia.find(function(v){return v.node.legacy_attachment_id===this.props.photoID;}.bind(this));this.setState({photoData:u,stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});this.$SpotlightMessengerSharedMediaViewer1=new (c('SubscriptionsHandler'))();this.$SpotlightMessengerSharedMediaViewer1.addSubscriptions(c('Event').listen(window,'resize',function(){this.setState({stageDimensions:this.$SpotlightMessengerSharedMediaViewer3()});}.bind(this)),c('KeyEventController').registerKey('LEFT',function(){this.$SpotlightMessengerSharedMediaViewer4(false);return false;}.bind(this)),c('KeyEventController').registerKey('RIGHT',function(){this.$SpotlightMessengerSharedMediaViewer4(true);return false;}.bind(this)));};t.prototype.componentWillUnmount=function(){this.$SpotlightMessengerSharedMediaViewer1&&this.$SpotlightMessengerSharedMediaViewer1.release();this.$SpotlightMessengerSharedMediaViewer1=null;this.$SpotlightMessengerSharedMediaViewer2.forEach(function(u){return u.abandon();});};t.prototype.render=function(){var u=this.$SpotlightMessengerSharedMediaViewer5(),v=this.state.stageDimensions,w=this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var x=this.props.sharedMedia.findIndex(function(z){this.state.photoData!=null||k(0);return z.node.id===this.state.photoData.node.id;}.bind(this)),y=c('React').createElement('div',null,this.$SpotlightMessengerSharedMediaViewer6(),this.props.disablepaging?null:c('React').createElement(c('SpotlightMessagesViewerPagers.react'),{disablePrevArrow:x<=0&&!this.props.hasPrevPage,disableNextArrow:!this.props.hasNextPage&&x>=this.props.sharedMedia.length-1}));return c('React').createElement('span',null,c('React').createElement(c('SpotlightViewer'),{className:"_53vs",onHide:this.$SpotlightMessengerSharedMediaViewer7,open:this.props.photoID!==null,ref:'spotlightViewer',rootClassName:this.props.rootClassName},c('React').createElement(c('SpotlightViewport'),{active:false,fadeInNOut:true,media:u,onClick:this.$SpotlightMessengerSharedMediaViewer4,ref:'viewport',showLoadingIndicator:w,stageDimensions:v,useWidth:true},y),this.$SpotlightMessengerSharedMediaViewer8()),this.$SpotlightMessengerSharedMediaViewer9(),this.$SpotlightMessengerSharedMediaViewer10());};t.prototype.$SpotlightMessengerSharedMediaViewer6=function(){if(!this.state.photoData)return null;var u=this.state.photoData.node.legacy_attachment_id,v=c('XMessagingPhotoDownloadController').getURIBuilder().setString('photo_id',u).getURI();if(this.props.actorid)v=c('ActorURI').create(v,this.props.actorid);return c('React').createElement(c('MessengerPhotoViewHeader.react'),{disableForward:this.props.disableForward,onClose:this.$SpotlightMessengerSharedMediaViewer7,openInfo:this.$SpotlightMessengerSharedMediaViewer11,photoID:this.props.photoID,ref:'photoviewheader',showForwardDialog:this.$SpotlightMessengerSharedMediaViewer12,url:v});};t.prototype.$SpotlightMessengerSharedMediaViewer13=function(u){return u?Math.ceil(u/q):r;};t.prototype.$SpotlightMessengerSharedMediaViewer8=function(){if(!this.state.photoData)return null;var u=this.state.photoData,v=c('React').createElement('button',{className:"_2n5b",onClick:function(){return this.props.openAlbum(u.node.legacy_attachment_id);}.bind(this),type:'button'},c('React').createElement('div',{className:"_3por"}));return c('React').createElement(c('MessengerPhotoViewBottomBar.react'),null,c('React').createElement(c('MessengerPhotoViewHScroll.react'),{onScroll:this.$SpotlightMessengerSharedMediaViewer14,photoID:u.node.legacy_attachment_id,sharedPhotos:this.props.sharedMedia,width:this.state.stageDimensions.x}),v);};t.prototype.$SpotlightMessengerSharedMediaViewer9=function(){if(!this.state.photoData||this.props.disableForward)return null;var u=j._("Forward in separate messages");return c('React').createElement(n,{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$SpotlightMessengerSharedMediaViewer15,shown:this.state.showForward,title:u});};t.prototype.$SpotlightMessengerSharedMediaViewer10=function(){return this.state.showInfo?c('React').createElement(c('MessengerPhotoInfoDialogContainer.react'),{closeInfo:this.$SpotlightMessengerSharedMediaViewer16,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id}):c('React').createElement('xhp',null);};t.prototype.$SpotlightMessengerSharedMediaViewer17=function(u){var v=this.$SpotlightMessengerSharedMediaViewer13(this.state.stageDimensions.x),w=this.props.sharedMedia;if(u<=v/2){c('MessengerSharedMediaActions').loadMoreLatest(this.props.threadID,w[0].cursor,v);if(w.length<v&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v);}else if(u>=w.length-v/2&&this.props.hasNextPage)c('MessengerSharedMediaActions').loadMorePrevious(this.props.threadID,w[w.length-1].cursor,v);};t.prototype.$SpotlightMessengerSharedMediaViewer3=function(){var u=new (c('Vector'))(c('Vector').getViewportDimensions().x,c('Vector').getViewportDimensions().y-p);return u;};t.prototype.$SpotlightMessengerSharedMediaViewer5=function(){if(this.state.photoData&&this.state.photoData.node){var u=this.state.photoData.node;if(u.__typename&&u.__typename==='MessageVideo')return this.$SpotlightMessengerSharedMediaViewer18();var v=this.state.stageDimensions,w=this.$SpotlightMessengerSharedMediaViewer19(u,v);if(!w)return null;var x=t.getImageDimensionsForStage(new (c('Vector'))(w.width,w.height),v);return this.$SpotlightMessengerSharedMediaViewer20(w,x);}else return null;};t.prototype.$SpotlightMessengerSharedMediaViewer18=function(){if(this.state.photoData)return c('React').createElement(c('MessengerVideoPlayer.react'),{isVisible:true,isOnStage:true,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions});return null;};t.prototype.$SpotlightMessengerSharedMediaViewer20=function(u,v){return c('React').createElement(c('SpotlightViewerImage'),{dimensions:v,ref:'image',src:u.uri});};t.prototype.$SpotlightMessengerSharedMediaViewer19=function(u,v){var w=null,x=c('PhotoUtils').getImagesFromData(u);x=x.sort(function(z,aa){return aa.width-z.width;});if(window.devicePixelRatio&&window.devicePixelRatio>1)v=new (c('Vector'))(v.x*window.devicePixelRatio,v.y*window.devicePixelRatio);for(var y=0;y<x.length;y++)if(!w||x[y].width>=v.x||x[y].height>=v.y)w=x[y];return w;};t.propTypes={disableForward:o.bool,hasPrevPage:o.bool,hasNextPage:o.bool,onClosePhotoView:o.func,openAlbum:o.func,photoID:o.string,rootClassName:o.string,threadID:o.string,sharedMedia:o.arrayOf(o.object)};t.getImageDimensionsForStage=function(u,v){var w=u.x,x=u.y,y=v.x,z=v.y,aa=w/x,ba=y/z;if(w>=y||x>=z){if(ba<aa){w=y;x=Math.round(y/aa);}else if(ba>aa){w=Math.round(z*aa);x=z;}else{w=y;x=z;}}else if(aa<ba){w=Math.round(x*aa);}else x=Math.round(w/aa);return new (c('Vector'))(w,x);};f.exports=t;}),null);
__d('SpotlightMessengerSharedMediaViewerContainer.react',['FluxContainer','MessengerSharedMediaStore','MessengerSharedMediaActions','React','SpotlightMessengerSharedMediaViewer.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.getStores=function(){return [c('MessengerSharedMediaStore')];};j.calculateState=function(k,l){var m=c('MessengerSharedMediaStore').getState(),n=m.sharedMedia.get(l.threadID),o=m.isLoading.get(l.threadID);return {sharedMedia:n,isLoading:o};};j.prototype.componentDidMount=function(){c('MessengerSharedMediaActions').loadCurrent(this.props.threadID,this.props.photoID);};j.prototype.render=function(){if(!this.state.sharedMedia)return null;var k=this.state.sharedMedia&&this.state.sharedMedia.edges.find(function(l){return l.node.legacy_attachment_id===this.props.photoID;}.bind(this));if(!k)return null;return c('React').createElement(c('SpotlightMessengerSharedMediaViewer.react'),{disableForward:this.props.disableForward,hasPrevPage:this.state.sharedMedia&&this.state.sharedMedia.has_previous_page,hasNextPage:this.state.sharedMedia&&this.state.sharedMedia.has_next_page,onClosePhotoView:this.props.onClosePhotoView,openAlbum:this.props.openAlbum,photoID:this.props.photoID,rootClassName:this.props.rootClassName,sharedMedia:this.state.sharedMedia&&this.state.sharedMedia.edges,threadID:this.props.threadID});};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{withProps:true});}),null);
__d('MessengerThreadSharedPhotos.react',['cx','MessengerSharedPhotosAlbumViewContainer.react','React','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={photoView:this.props.findFBID,albumView:''},this.$MessengerThreadSharedPhotos3=function(r){this.setState({albumView:r,photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos4=function(){this.setState({albumView:''});}.bind(this),this.$MessengerThreadSharedPhotos5=function(r){this.setState({albumView:'',photoView:r});}.bind(this),this.$MessengerThreadSharedPhotos6=function(){this.setState({photoView:''});}.bind(this),this.$MessengerThreadSharedPhotos7=function(r){this.setState({photoView:r});}.bind(this),n;}l.prototype.componentDidUpdate=function(){!this.state.photoView&&!this.state.albumView&&this.props.onCloseSharedPhotos();};l.prototype.render=function(){var m=this.state.photoView?this.$MessengerThreadSharedPhotos1():null,n=this.state.albumView?this.$MessengerThreadSharedPhotos2():null;return c('React').createElement('div',null,n,m);};l.prototype.$MessengerThreadSharedPhotos1=function(){return c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{disableForward:false,onClosePhotoView:this.$MessengerThreadSharedPhotos6,openAlbum:this.$MessengerThreadSharedPhotos3,photoID:this.state.photoView,rootClassName:'',threadID:this.props.threadFBID});};l.prototype.$MessengerThreadSharedPhotos2=function(){return c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerThreadSharedPhotos4,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerThreadSharedPhotos5,onCloseSharedPhotos:this.props.onCloseSharedPhotos,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}));};l.propTypes={findFBID:k.string,onCloseSharedPhotos:k.func,threadFBID:k.string};f.exports=l;}),null);
__d('MessengerXMATextBlock.react',['cx','LineClamp.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=26;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerXMATextBlock1=function(){this.props.url&&window.open(this.props.url);}.bind(this),o;}m.prototype.render=function(){if(!this.props)return c('React').createElement('div',{className:"__6j"});var n=this.props.width?{maxWidth:this.props.width-l,textAlign:'left'}:{textAlign:'left'},o={textDecoration:'none'};return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"__6j _43kk"),style:n},c('React').createElement('a',{onClick:this.$MessengerXMATextBlock1,role:'button',style:o,tabIndex:'0'},this.renderTitle(),this.renderDescription(),this.renderSource()));};m.prototype.renderTitle=function(){if(!this.props.title)return null;return c('React').createElement('div',{className:"__6k"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:16},this.props.title));};m.prototype.renderDescription=function(){if(!this.props.description)return null;return c('React').createElement('div',{className:"__6l"},c('React').createElement(c('LineClamp.react'),{lines:2,lineHeight:15},this.props.description));};m.prototype.renderSource=function(){if(!this.props.source)return null;return c('React').createElement('div',{className:"__6m"},c('React').createElement(c('LineClamp.react'),{lines:1,lineHeight:14},this.props.source));};m.propTypes={className:k.string,description:k.string,source:k.string,title:k.string,url:k.string,width:k.number};f.exports=m;}),null);
__d('MessengerVideoXMA.react',['cx','MessengerVideoPlayer.react','MessengerXMATextBlock.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=640,m=450,n=1800;i=babelHelpers.inherits(o,c('React').PureComponent);j=i&&i.prototype;o.prototype.render=function(){var p=this.$MessengerVideoXMA1(this.props.attachment),q=this.$MessengerVideoXMA2(p);return c('React').createElement('div',{className:"_3duc"},q,this.$MessengerVideoXMA3(p&&p.original_dimensions));};o.prototype.$MessengerVideoXMA2=function(p){return p?c('React').createElement(c('MessengerVideoPlayer.react'),{attachment:this.props.attachment,videoData:p,isInThread:true,isVisible:this.props.isVisible,onSelect:this.props.onSelect,className:c('joinClasses')(this.props.className,"_ccq"+(' '+"_4tsk")+(' '+"_3o67")+(' '+"_52mr"))}):null;};o.prototype.$MessengerVideoXMA1=function(p){if(!p.media||!p.media.image_size||!p.target||!p.target.video_id)return null;var q=p.media.image_size;return {legacy_attachment_id:p.target.video_id,original_dimensions:this.$MessengerVideoXMA4(q),start_muted:true,hide_controls_on_finish:true,url:p.media.image,is_share:true};};o.prototype.$MessengerVideoXMA4=function(p){var q=Math.max(p.width,p.height),r=window.screen.width>n?l:m;if(q<=r)return {x:p.width,y:p.height};var s=r/q,t=Math.floor(p.width*s),u=Math.floor(p.height*s);return {x:t,y:u};};o.prototype.$MessengerVideoXMA3=function(p){var q=this.props.attachment;return c('React').createElement(c('MessengerXMATextBlock.react'),{className:"_2f5n _4br2 _29ew _3dug",description:q.description,source:q.source,title:q.video_title,url:q.uri,width:p&&p.x});};function o(){i.apply(this,arguments);}o.propTypes={attachment:k.object.isRequired,isVisible:k.bool,onClick:k.func,onSelect:k.func};f.exports=o;}),null);
__d('messengerPhotoReact',['cx','fbt','bs_curry','utilsRe','linkReact','imageReact','bs_js_boolean','bs_pervasives','reasonReact','joinClasses','bs_js_primitive','MercuryAttachmentType','messengerSpinnerReact','bs_caml_builtin_exceptions'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(w){return +(c('bs_js_primitive').null_undefined_to_opt(w)!==0);}function k(w,x){var y=w.metadata;if(c('bs_js_primitive').is_nil_undef(y)){return null;}else if(w.attach_type===c('MercuryAttachmentType').VIDEO){var z=y.large_preview,aa=x&&+(c('bs_js_primitive').null_undefined_to_opt(z)!==0);if(aa!==0){return y.large_preview;}else return y.inbox_preview;}else if(x!==0){return w.large_preview_url;}else return w.preview_url;}function l(w){if(c('bs_js_primitive').is_nil_undef(w)){return [null,null];}else return [w.width,w.height];}function m(w){var x=+(window.screen.width>1800);if(c('utilsRe').isTruthy(w.preview_uploading)){var y=function sa(ta,ua){var va=+(c('bs_js_primitive').null_undefined_to_opt(ta)!==0);if(va!==0){return ta;}else return ua;},z=w.large_preview_url,aa=x&&+(c('bs_js_primitive').null_undefined_to_opt(z)!==0);if(aa!==0){return [[y(w.large_preview_width,480),y(w.large_preview_height,480),w.large_preview_url,x]];}else return [[y(w.preview_width,280),y(w.preview_height,280),w.preview_url,x]];}else{var ba=k(w,x),ca=+(c('bs_js_primitive').null_undefined_to_opt(ba)!==0),da=w.metadata,ea=0;if(ca!==0){if(c('bs_js_primitive').is_nil_undef(da)){ea=1;}else{var fa=da.large_size,ga=x&&+(c('bs_js_primitive').null_undefined_to_opt(fa)!==0),ha=ga!==0?da.large_size:da.inbox_size,ia=l(ha);return [[ia[0],ia[1],ba,x]];}}else ea=1;if(ea===1){var ja=w.preview_url;if(c('bs_js_primitive').null_undefined_to_opt(ja)!==0){var ka=w.large_preview_url,la=x&&+(c('bs_js_primitive').null_undefined_to_opt(ka)!==0);if(la!==0){return [[w.large_preview_width,w.large_preview_height,w.large_preview_url,x]];}else return [[w.preview_width,w.preview_height,w.preview_url,x]];}else{var ma=w.media;if(c('bs_js_primitive').is_nil_undef(ma)){return 0;}else{var na=ma.playable,oa=ma.animated_image,pa=+(c('bs_js_primitive').null_undefined_to_opt(na)!==0&&c('bs_js_primitive').null_undefined_to_opt(oa)!==0);if(pa!==0){var qa=l(ma.animated_image_size);return [[qa[0],qa[1],ma.animated_image,x]];}else{var ra=l(ma.image_size);return [[ra[0],ra[1],ma.image,x]];}}}}}}function n(w){var x=function ga(ha){return [""+(String(ha)+"")];};if(c('utilsRe').isTruthy(w.preview_uploading)){var y=w.preview_url,z=+(c('bs_js_primitive').null_undefined_to_opt(y)!==0);return x(z!==0?0:280);}else{var aa=function ga(ha){var ia=ha[1],ja=ha[0];if(!c('bs_js_primitive').is_nil_undef(ja)&&!c('bs_js_primitive').is_nil_undef(ia)){return [[ja,ia]];}else return 0;},ba=function ga(ha){if(ha){var ia=ha[0];return aa([ia[0],ia[1]]);}else return 0;},ca=w.media,da=+(c('bs_js_primitive').null_undefined_to_opt(ca)!==0),ea=da!==0?ba(m(w)):aa([w.preview_width,w.preview_height]);if(ea){var fa=ea[0];return x(c('bs_pervasives').min(fa[1]*c('bs_pervasives').min(1,450/fa[0]),450));}else return 0;}}function o(w,x,y,z,aa){c('utilsRe').isTruthy(z.preview_uploading);var ba=w[2];if(c('bs_js_primitive').is_nil_undef(ba)){return null;}else if(aa){var ca=w[3],da=ca!==0?window.screen.height*.7:window.screen.height*.65,ea={maxHeight:""+(String(da)+""),maxWidth:"100%",width:"100%"};return c('reasonReact').element(0,0,c('imageReact').make([c('joinClasses')(y,c('bs_js_boolean').to_js_boolean(1-x)?"_5pf5":'')],[""],[ba],0,0,0,[ea],[]));}else return null;}var p=c('reasonReact').statelessComponent("MessengerPhoto");function q(w,x,y,z,aa,ba){var ca=w?w[0]:"",da=p.slice();da[4]=function(ea,fa){if(z)c('bs_curry')._1(z[0],0);return 0;};da[9]=function(ea,fa){var ga=m(x);if(ga){var ha=ga[0],ia=+(x.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE),ja=x.app_attribution,ka=+(c('bs_js_primitive').null_undefined_to_opt(ja)!==0),la=o(ha,y&&ia,c('joinClasses')(c('bs_js_boolean').to_js_boolean(ka)?"_mxz":'',c('bs_js_boolean').to_js_boolean(y&&1-ka)?"_52mr":''),x,y),ma=1-ia||1-y,na;if(ma!==0){var oa=ha[2],pa=c('bs_js_primitive').is_nil_undef(oa)?0:["url("+(oa+")")],qa=y!==0?n(x):0;na=[pa,qa];}else na=[0,0];var ra={backgroundImage:c('bs_js_primitive').option_get(na[0]),minHeight:c('bs_js_primitive').option_get(na[1])},sa=c('utilsRe').isTruthy(x.preview_uploading),ta=sa!==0?c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])):null,ua=ia!==0?[c('MercuryAttachmentType').ANIMATED_IMAGE]:0,va=function wa(xa){xa.preventDefault();if(aa){return c('bs_curry')._1(aa[0],x);}else return 0;};return c('reasonReact').createDomElement("div",{className:c('joinClasses')(ca,"_4tsk",c('bs_js_boolean').to_js_boolean(ka)?"_mxz":'',c('bs_js_boolean').to_js_boolean(y&&1-ka)?"_52mr":'',c('bs_js_boolean').to_js_boolean(c('utilsRe').isTruthy(x.preview_uploading)&&+(c('bs_js_primitive').null_undefined_to_opt(ha[2])===0))?"_3etv":''),"data-testid":ua,onClick:va,role:"presentation",style:ra},[la,ta,c('reasonReact').element(0,0,c('linkReact').make([i._("Open Photo")],["_4tsl"],0,0,c('bs_js_primitive').null_undefined_to_opt(ha[2]),0,0,0,0,0,0,0,0,[ba]))]);}else return null;};return da;}var r=c('reasonReact').wrapReasonForJs(p,function(w){return q(c('bs_js_primitive').null_undefined_to_opt(w.className),w.attachment,+w.isSingle,c('bs_js_primitive').null_undefined_to_opt(w.onAttachmentLoad),c('bs_js_primitive').null_undefined_to_opt(w.onClick),[]);}),s=280,t=480,u=1800,v=450;g.isDefined=j;g.preview_thumbnail_size=s;g.preview_large_size=t;g.large_window_width=u;g.max_photo_width=v;g.getSrcFromAttachment=k;g.sizeToWidthHeight=l;g.extractPreviewMetadata=m;g.getMinHeightForAttachment=n;g.getImageFromMetadata=o;g.component=p;g.make=q;g.comp=r;}),null);
__d('messengerVideoPlayerReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerVideoPlayer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('MessengerVideoPlayer.react'),{attachment:c('bs_js_null_undefined').from_opt(i),className:c('bs_js_null_undefined').from_opt(j),isInThread:c('utilsRe').optionBoolToNullUndefinedBoolean(k),isVisible:c('utilsRe').optionBoolToNullUndefinedBoolean(l),isOnStage:c('utilsRe').optionBoolToNullUndefinedBoolean(m),stageDimensions:c('bs_js_null_undefined').from_opt(n),videoData:o,onClick:c('bs_js_null_undefined').from_opt(p),onSelect:c('bs_js_null_undefined').from_opt(q)},r);}g.make=h;}),null);
__d('messengerVideoReact',['cx','ix','bs_curry','React','utilsRe','imageReact','bs_js_boolean','bs_pervasives','reasonReact','joinClasses','bs_js_primitive','messengerPhotoReact','messengerVideoPlayerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(q){return +(c('bs_js_primitive').null_undefined_to_opt(q)!==0);}var k=c('reasonReact').statelessComponent("MessengerVideo");function l(q){var r=true,s=true,t=false,u=q.metadata,v=0;if(c('bs_js_primitive').is_nil_undef(u)){v=1;}else{var w=u.fbid;if(c('bs_js_primitive').null_undefined_to_opt(w)!==0){var x=u.large_size,y=u.large_preview,z=+(window.screen.width>1800&&c('bs_js_primitive').null_undefined_to_opt(x)!==0&&c('bs_js_primitive').null_undefined_to_opt(y)!==0),aa=u.fbid,ba=z!==0?u.large_size:u.inbox_size,ca=c('bs_js_primitive').is_nil_undef(ba)?{x:0,y:0}:{x:ba.width,y:ba.height},da=z!==0?u.large_preview:u.inbox_preview;return {legacy_attachment_id:aa,original_dimensions:ca,start_muted:r,hide_controls_on_finish:s,url:da,is_share:t};}else v=1;}if(v===1)return {legacy_attachment_id:null,original_dimensions:null,start_muted:r,hide_controls_on_finish:s,url:null,is_share:t};}function m(q){var r=q%60,s=+(r<10);return c('bs_pervasives').string_of_int(q/60|0)+(":"+((s!==0?"0":"")+c('bs_pervasives').string_of_int(r)));}function n(q,r,s,t,u,v,w,x){var y=q?q[0]:"",z=function da(){var ea=r.metadata,fa=r.media,ga=c('bs_js_primitive').is_nil_undef(ea)?c('bs_js_primitive').is_nil_undef(fa)?0:c('bs_js_primitive').null_undefined_to_opt(fa.duration):c('bs_js_primitive').null_undefined_to_opt(ea.duration);if(ga){return m(ga[0]);}else return null;},aa=function da(){if(v){return c('bs_curry')._1(v[0],r);}else return 0;},ba=function da(ea){var fa=ea.legacy_attachment_id;if(c('bs_js_primitive').null_undefined_to_opt(fa)){return [c('reasonReact').element(0,0,c('messengerVideoPlayerReact').make([r],[c('joinClasses')(y,"_ccq","_4tsk","_3o67",c('bs_js_boolean').to_js_boolean(s)?"_52mr":'')],[1],u,0,0,ea,[aa],w,[]))];}else return 0;},ca=k.slice();ca[9]=function(da,ea){var fa=l(r),ga=ba(fa);if(ga){return ga[0];}else return c('reasonReact').element(0,0,c('messengerPhotoReact').make([c('joinClasses')(y,"_ccq")],r,s,t,v,[c('reasonReact').element(0,0,c('imageReact').make(["_ccr"],0,[i("27983")],0,0,0,0,[])),c('React').createElement("span",{className:"_ccs"},z(0))]));};return ca;}var o=c('reasonReact').wrapReasonForJs(k,function(q){return n(c('bs_js_primitive').null_undefined_to_opt(q.className),q.attachment,+q.isSingle,c('bs_js_primitive').null_undefined_to_opt(q.onAttachmentLoad),c('utilsRe').nullUndefinedBooleanToOptionBool(q.isVisible),c('bs_js_primitive').null_undefined_to_opt(q.onClick),c('bs_js_primitive').null_undefined_to_opt(q.onSelect),[]);}),p=1800;g.isDefined=j;g.component=k;g.large_window_width=p;g.constructVideoData=l;g.formatDuration=m;g.make=n;g.comp=o;}),null);
__d('MessengerPhotosGroup.react',['cx','ActorURI','ChatSpeakingSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryIDs','MessagingGiftWrap.react','MessagingFlowerBorder.react','MessengerAttachmentViewer','messengerPhotoReact','messengerVideoReact','MessengerVideoXMA.react','MessagesViewerSetID','React','MessengerThreadSharedPhotos.react','URI','Vector','getPageIDFromThreadID','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerPhotoReact').comp,l=c('messengerVideoReact').comp,m='empty-spacer',n=c('React').PropTypes;i=babelHelpers.inherits(o,c('React').PureComponent);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={findID:null},this.$MessengerPhotosGroup4=function(u){this.setState({findID:u});}.bind(this),this.$MessengerPhotosGroup5=function(){this.setState({findID:null});}.bind(this),this.$MessengerPhotosGroup6=function(u){if(u.preview_uploading)return;if(u.attach_type===c('MercuryAttachmentType').VIDEO){c('MessengerAttachmentViewer').renderVideo({pageID:this.props.pageID,rootClassName:"_1j1h",videoID:u.metadata.fbid,videoSize:new (c('Vector'))(u.metadata.dimensions.width,u.metadata.dimensions.height),videoURI:u.url});}else if(u.attach_type===c('MercuryAttachmentType').PHOTO||u.attach_type===c('MercuryAttachmentType').THIRDPARTYSTICKER||u.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE){var v=this.props.attachments.length===1,w=u.url,x=null;if(!this.props.isXMA&&u.attach_type===c('MercuryAttachmentType').PHOTO&&this.props.count){var y=this.props.count,z=this.props.message,aa=z&&z.thread_fbid;if(z&&!aa)aa=c('MercuryIDs').getThreadFBIDFromThreadID(z.thread_id);v=y===1;w=new (c('URI'))('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:aa,image_id:u.metadata.fbid});if(this.props.pageID)w=new (c('ActorURI').create)(w,this.props.pageID);x=c('MessagesViewerSetID').MESSAGES_VIEW_ALL_IN_THREAD;}c('MessengerAttachmentViewer').bootstrapWithConfig({actorid:this.props.pageID,dimensions:u.metadata.dimensions,disableForward:!!this.props.pageID,disablePaging:v,endpoint:w,fbid:u.metadata.fbid,rootClassName:"_1j1h",setID:x,snapToPhoto:true,src:u.preview_url});}else if(u.uri)window.open(u.uri);}.bind(this),q;}o.prototype.componentDidMount=function(){c('MessengerAttachmentViewer').preload();};o.prototype.render=function(){var p=this.props.attachments,q=this.props.message?!!c('getPageIDFromThreadID')(this.props.message.thread_id):false,r=this.$MessengerPhotosGroup1(p,q);if(this.props.isGiftWrapped)r=c('React').createElement('div',null,r);var s=this.state.findID?this.$MessengerPhotosGroup2():null;return c('React').createElement('div',babelHelpers['extends']({},this.props,{tabIndex:'0',className:this.$MessengerPhotosGroup3(p)}),s,r,this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);};o.prototype.$MessengerPhotosGroup2=function(){var p=this.props.message,q=p&&p.thread_fbid;if(p&&!q)q=c('MercuryIDs').getThreadFBIDFromThreadID(p.thread_id);return c('React').createElement(c('MessengerThreadSharedPhotos.react'),{findFBID:String(this.state.findID.metadata.fbid),backUpClick:this.$MessengerPhotosGroup6,onCloseSharedPhotos:this.$MessengerPhotosGroup5,threadFBID:q});};o.prototype.$MessengerPhotosGroup1=function(p,q){if(p.length===1)return [this.$MessengerPhotosGroup7(p[0],q,true)];var r=3;if(p.length===2||p.length===4)r=2;var s=[];for(var t=0,u=p.length;t<u;t+=r){var v=p.slice(t,t+r),w=r-v.length;while(w>0){v.push({attach_type:m,key:'ghost'+w});w--;}s.push(c('React').createElement('div',{className:"_2n8g",key:t},v.map(function(x){return this.$MessengerPhotosGroup7(x,q);}.bind(this))));}return s;};o.prototype.$MessengerPhotosGroup7=function(p,q,r){var s=void 0;if(p.deduplication_key){s=p.deduplication_key;}else if(p.metadata){s=p.metadata.fbid;}else s=p.upload_id;var t={attachment:p,isSingle:r||false,key:s,onAttachmentLoad:this.props.onAttachmentLoad,onClick:!q&&!this.props.isPageMessage&&p.metadata&&p.metadata.fbid&&!c('MercuryAttachment').hasAttribution(p)?this.$MessengerPhotosGroup4:this.$MessengerPhotosGroup6},u=this.props.attachType||p.attach_type;switch(u){case c('MercuryAttachmentType').PHOTO:case c('MercuryAttachmentType').ANIMATED_IMAGE:case c('MercuryAttachmentType').THIRDPARTYSTICKER:return c('React').createElement(k,t);case c('MercuryAttachmentType').VIDEO:if(p.metadata&&p.metadata.render_as_sticker){return c('React').createElement(c('ChatSpeakingSticker.react'),{videoSize:p.metadata.dimensions,videoURI:p.url});}else if(this.props.isXMA)return c('React').createElement(c('MessengerVideoXMA.react'),babelHelpers['extends']({},t,{isVisible:this.props.isVisible,onSelect:this.props.onSelect}));return c('React').createElement(l,babelHelpers['extends']({},t,{isVisible:this.props.isVisible,onSelect:this.props.onSelect}));case m:return c('React').createElement('div',{key:p.key,className:"_4tsk _4rf-"});default:throw new Error(p.attachType+' is not handled by MessengerPhotoGroup');}};o.prototype.$MessengerPhotosGroup3=function(p){var q=p.length===2||p.length===4;return c('joinClasses')(this.props.className,"_2n8h"+(p.length===1?' '+"_2n8i":'')+(q?' '+"_4ksk":'')+(p.length>1&&!q?' '+"_2n8k":'')+(' '+"_5fk1"));};o.prototype.$MessengerPhotosGroup8=function(p){var q=[];p.forEach(function(r){if(r.metadata&&r.metadata.fbid)q.push(r.metadata.fbid.toString());});return q;};o.propTypes={attachments:n.arrayOf(n.object).isRequired,attachType:n.string,count:n.number,hasFlowerBorder:n.bool,isGiftWrapped:n.bool,isPageMessage:n.bool,isXMA:n.bool,isVisible:n.bool,message:n.object,onAttachmentLoad:n.func,onSelect:n.func,onUnwrap:n.func,pageID:n.string};f.exports=o;}),null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],(function a(b,c,d,e,f,g){'use strict';function h(k){return !!(k&&k.attach_type===c('MercuryAttachmentType').STICKER);}function i(k){var l=k.attachments;return !!(k.is_like_preview||k.sticker_id||l&&l.length===1&&h(l[0]));}function j(k){return k.size===1&&i(k.first());}f.exports={isStickerMessageGroup:j,isStickerMessage:i,isStickerAttachment:h};}),null);
__d('MessengerVoiceClipAttachment.react',['cx','MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','MessagingGiftWrap.react','MessagingFlowerBorder.react','React','messengerCustomColorUtils'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.attachment,n=m.metadata.duration/1000,o=!!m.app_attribution,p={};if(this.props.customColor)p=c('messengerCustomColorUtils').customBubbleStyle(this.props.customColor,p);var q=this.props.isGiftWrapped?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:this.props.onUnwrap}):null,r=this.props.hasFlowerBorder?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null;return c('React').createElement('div',{className:"_hh7"+(' '+"_s1-")+(!!this.props.customColor?' '+"_5sxi":'')+(!o?' '+"_52mr":'')+(o?' '+"_mxz":'')+(' '+"_1fz8")+(o?' '+"_1-wa":'')+(' '+"_1nqp"),style:p},c('React').createElement(c('MercuryAttachmentAudioClip.react'),{customColor:this.props.customColor,src:m.url,duration:n,key:'audio:'+this.props.message.message_id,showHelp:false,width:200,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,rootClassName:"_3czg"+(o?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")}),q,r);};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.object.isRequired,customColor:k.string,isGiftWrapped:k.bool,message:k.object.isRequired,onUnwrap:k.func};f.exports=l;}),null);
__d("XStickerInTrayController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/stickers\/in_tray\/",{pack_id:{type:"Int",required:true}});}),null);
__d('StickersPackInTray',['Promise','AsyncRequest','RelayQL','RelayStore','XStickerInTrayController','createRelayQuery'],(function a(b,c,d,e,f,g){'use strict';var h={onIsPackInTray:function i(j,k,l){var m=c('createRelayQuery')(function(){return {children:[{children:[{calls:[{kind:'Call',metadata:{type:'StickerInterfaces'},name:'interface',value:{kind:'CallVariable',callVariableName:'stickerInterface'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:10000}}],children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'StickerPack'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'PacksInTrayEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'tray_packs',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'PacksInTrayConnection'}],fieldName:'sticker_store',kind:'Field',metadata:{canHaveSubselections:true},type:'StickerStore'}],fieldName:'viewer',kind:'Query',metadata:{},name:'StickersPackInTray',type:'Viewer'};}(),{stickerInterface:k}),n=c('RelayStore').readQuery(m);n=n&&n.length>0?n[0]:null;if(n&&n.sticker_store&&n.sticker_store.tray_packs&&n.sticker_store.tray_packs.edges)return new (c('Promise'))(function(p,q){return p({in_sticker_tray:n.sticker_store.tray_packs.edges.filter(function(r){return r.node.id===j;}).length>0});}).then(l);var o=c('XStickerInTrayController').getURIBuilder().setInt('pack_id',j).getURI();return new (c('Promise'))(function(p,q){return new (c('AsyncRequest'))(o).setHandler(function(r){return p(r.getPayload());}).setAllowCrossPageTransition(true).send();}).then(l);}};f.exports=h;}),null);
__d('isRetina',[],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){return (window.devicePixelRatio||1)>1;};}),null);
__d('MessengerAttachmentRenderer',['cx','EmojiSticker.react','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessagingFlowerBorder.react','MessagingFlowerBorderChecker','MessagingGiftWrap.react','MessagingGiftWrapChecker','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerFromViewerUtils','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MessengerSupportedEmojiUtils','MessengerVoiceClipAttachment.react','MessengerWebDriverTestIDs','React','Set','Sticker.react','StickerAssetType','StickerConstants','StickerInterfaces','StickerUtils','StickersActions','StickersPackInTray','StickersStoreController','StoryAttachmentStyle','XStickerAssetController','isRetina','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=700,j='sticker:',k='giftwrap:',l='share:',m="_1c_u",n=function p(q){return q===Object(q);},o={getAttachmentsInsideBubble:function p(q,r){var s=c('MercuryAttachment').get(q).filter(n).filter(function(t){return !this.attachmentShouldAppearOutsideBubble(t);}.bind(this));return this._getAttachmentComponents(s,q,r);},getAttachmentsOutsideBubble:function p(q,r,s,t){var u=c('MercuryAttachment').get(q).filter(n).filter(function(v){return this.attachmentShouldAppearOutsideBubble(v);}.bind(this));return this._getAttachmentComponents(u,q,r,s,t);},_getAttachmentComponents:function p(q,r,s,t,u){var v=this._getPhotosGroup(q.filter(c('MercuryAttachment').isPhotoGroupAttachment),r,s,t),w=q.filter(function(x){return !c('MercuryAttachment').isPhotoGroupAttachment(x);}).map(function(x,y){return this._getAttachmentComponent(x,r,s,t,y===0,u);}.bind(this));if(v)w.push(v);return w;},_getAttachmentComponent:function p(q,r,s,t,u,v){var w=t&&t.customColor,x=t&&t.onUnwrap,y=t&&t.isVisible,z=t&&t.onSelect,aa=t&&t.messageBubble;if(c('MessengerStickerUtils').isStickerAttachment(q))return this._getStickerComponent(q,r,w,x);if(this.isEmojiLikeAttachment(q))return this._getEmojiLikeAttachment(q,r,x);if(this.isVoiceClip(q))return this._getVoiceClip(q,r,w,x);if(this.isFileAttchment(q))return this._getFileComponent(q,r);if(this.isP2P(q)||this.isShareAttachment(q))return this._getShareAttachment(q,r,s,y,z,u?aa:null,v);if(this.isErrorAttachment(q))return this._getErrorAttachment(q,r);return null;},_getStickerComponent:function p(q,r,s,t){if(r.is_like_preview)return this._maybeGiftWrapSticker(c('React').createElement(c('MessengerHotLikePreview.react'),{customColor:s,customLike:r.customLike,key:'hlp:'+r.like_preview_since,since:r.like_preview_since}),r,t);var u=q.metadata;if(!u){u=c('MessengerHotLikeUtils').getMetadataForHotLike(r.sticker_id);if(!u){u={};var v=c('StickerUtils').getScaledDimensions(c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE,c('StickerConstants').THREAD_SIZE),w=v.height,x=v.width;u.height=w;u.width=x;}u.stickerID=r.sticker_id;}var y=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',u.stickerID),z=null,aa=null;if(c('isRetina')()){z=u.paddedSpriteURI2x;aa=u.spriteURI2x;}else{z=u.paddedSpriteURI;aa=u.spriteURI;}var ba=u.stickerID.toString(),ca=c('React').createElement(c('Sticker.react'),{accessibilityLabel:u.accessibilityLabel,className:"_2poz"+(' '+"_ui9")+(c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r)&&!!c('MessengerHotLikeUtils').getMetadataForHotLike(ba)?' '+"_4ue_":''),animationTrigger:'hover',customColor:s,frameCount:u.frameCount||1,frameRate:u.frameRate||c('StickerConstants').DEFAULT_FRAME_RATE,framesPerCol:u.framesPerCol||1,framesPerRow:u.framesPerRow||1,key:j+r.message_id,onStickerClick:function da(ea,fa){c('StickersPackInTray').onIsPackInTray(ea,c('StickerInterfaces').MESSAGES,function(ga){if(ga.in_sticker_tray){c('StickersActions').selectTrayPack(ea);c('StickersActions').showStickerFlyout(r.thread_id);}else c('StickersStoreController').showStore(ea);});},packID:u.packID&&u.packID.toString(),paddedSpriteURI:z,sourceHeight:u.height,sourceURI:y.setEnum('image_type',c('StickerAssetType').IMAGE).getURI().toString(),sourceWidth:u.width,spriteURI:aa,stickerID:ba,testID:c('MessengerWebDriverTestIDs').STICKER});return this._maybeGiftWrapSticker(ca,r,t);},_getEmojiLikeAttachment:function p(q,r,s){var t=c('MessengerSupportedEmojiUtils').transferSize(q.size),u=c('MessengerSupportedEmojiUtils').getNewEmojiData(r.body,t),v=u?u.emoji:undefined;if(!u)return this._getErrorAttachment(q,r);var w=c('React').createElement(c('EmojiSticker.react'),{className:"_2poz _ui9",key:j+r.message_id,emoji:r.body,emojiImage:v,sourceURI:''});return this._maybeGiftWrapSticker(w,r,s);},_getShareAttachment:function p(q,r,s,t,u,v,w){var x=null;if(r&&r.platform_xmd)x=JSON.parse(r.platform_xmd);return c('React').createElement(c('MercuryShareAttachment.react'),{attachment:q.share,isSponsored:r.is_sponsored,isVisible:!!t,key:l+r.message_id,location:c('MercuryShareAttachmentRenderLocations').MESSENGER,maxWidth:i,messageBubble:v,messageID:r.message_id,mnMessageType:x&&x.template_type,onComponentLoaded:s,onSelect:u,pageID:r.author,threadID:r.thread_id,afterDecorators:w});},_getVoiceClip:function p(q,r,s,t){s=c('MessengerFromViewerUtils').isFromViewer(r)?s||undefined:undefined;return c('React').createElement(c('MessengerVoiceClipAttachment.react'),{attachment:q,customColor:s,isGiftWrapped:c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),hasFlowerBorder:c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r),key:'audio:'+r.message_id,message:r,onUnwrap:function(u){function v(){return u.apply(this,arguments);}v.toString=function(){return u.toString();};return v;}(function(){t&&t();})});},_getErrorAttachment:function p(q,r){return c('React').createElement(c('MessengerErrorAttachment.react'),{attachment:q,key:'error:'+r.message_id});},_getPhotosGroup:function p(q,r,s,t){if(!q.length)return null;var u=t&&t.onUnwrap,v=t&&t.isVisible,w=t&&t.onSelect,x=t&&t.isPageMessage,y=t&&t.pageID,z=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r),aa=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r)&&this._rendersWithoutAttribution(q);return c('React').createElement(c('MessengerPhotosGroup.react'),{attachments:q,className:"_2poz _52mr _ui9",count:q.length,hasFlowerBorder:z,isGiftWrapped:aa,isPageMessage:x,isVisible:!!v,key:'photos:'+r.message_id,message:r,onSelect:w,onUnwrap:function(ba){function ca(){return ba.apply(this,arguments);}ca.toString=function(){return ba.toString();};return ca;}(function(){u&&u();}),pageID:y});},getVideoElem:function p(q,r){var s=r.getMessageElement(q);if(!s)return null;var t=s.getElementsByClassName(m);return t&&t.length?t[0]:s;},_rendersWithoutAttribution:function p(q){return q.length!=1||!c('MercuryAttachment').hasAttribution(q[0]);},_getFileComponent:function p(q,r){return c('React').createElement(c('MessengerFileAttachment.react'),{attachment:q,className:"_2poz",key:'file:'+q.url});},attachmentShouldAppearOutsideBubble:function p(q){return c('MessengerStickerUtils').isStickerAttachment(q)||c('MercuryAttachment').isPhotoGroupAttachment(q)||this.isShareAttachment(q)||this.isP2P(q)||this.isVoiceClip(q)||this.isErrorAttachment(q)||this.isEmojiLikeAttachment(q);},isPhotosGroupAttachment:function p(q){var r=q.props.attachments;return !!r&&r.length>1&&r.some(function(s){return !!s&&c('MercuryAttachment').isPhotoGroupAttachment(s);});},isRenderedShareAttachment:function p(q){return !!(q.key&&q.key.startsWith(l));},isFileAttchment:function p(q){return q.attach_type===c('MercuryAttachmentType').FILE;},isShareAttachment:function p(q){return !!(this._isStoryBased(q)&&!this.isP2P(q)&&(q.share.style_list.indexOf(c('StoryAttachmentStyle').SHARE)>-1||q.share.style_list.indexOf(c('StoryAttachmentStyle').FALLBACK)>-1));},isSharedVideoAttachment:function p(q){var r=q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.subattachments&&q.share.subattachments[0];return !!(r&&r.target&&r.target.video_id);},isP2P:function p(q){return !!(this._isStoryBased(q)&&q.share.style_list.indexOf(c('StoryAttachmentStyle').ORION)>-1);},_isStoryBased:function p(q){return !!(q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.style_list);},isEmojiLikeAttachment:function p(q){return q.attach_type===c('MercuryAttachmentType').EMOJI_LIKE;},isVoiceClip:function p(q){return !!q.metadata&&(q.metadata.type===c('MercuryAudioType').AudioClip||q.metadata.type===c('MercuryAudioType').VoiceMessageWithTranscript);},isVoiceClipAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return this.isVoiceClip(s);}.bind(this));return !!r.length;},isP2PAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(function(s){return n(s)&&this.isP2P(s);}.bind(this));return !!r.length;},isSingleVideoAttachment:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return c('MercuryAttachment').isVideoAttachment(s);});return r.length===1;},isSharedVideoAttachmentMessage:function p(q){var r=c('MercuryAttachment').get(q).filter(n).filter(function(s){return this.isSharedVideoAttachment(s)||this.isGenieSharedVideoAttachment(s);}.bind(this));return r.length===1;},isGenieSharedVideoAttachment:function p(q){return !!(q.attach_type===c('MercuryAttachmentType').SHARE&&q.share&&q.share.style_list.indexOf(c('StoryAttachmentStyle').GENIE_MESSAGE)>-1&&q.share.target&&q.share.target.attachment&&this.isSharedVideoAttachment(q.share.target.attachment));},isErrorAttachment:function p(q){return q.attach_type===c('MercuryAttachmentType').ERROR;},_maybeGiftWrapComponentForMessage:function p(q,r,s){var t=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),u=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r);if(!t&&!u)return q;return c('React').createElement('div',{key:k+r.message_id},q,t?c('React').createElement(c('MessagingGiftWrap.react'),{onUnwrap:c('wrapNullableForReact')(s)}):null,u?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);},_maybeGiftWrapSticker:function p(q,r,s){var t=c('MessagingGiftWrapChecker').shouldRenderWithGiftWrap(r),u=c('MessagingFlowerBorderChecker').shouldRenderWithFlowerBorder(r);if(!t&&!u)return q;return c('React').createElement('div',{key:k+r.message_id},q,t?c('React').createElement(c('MessagingGiftWrap.react'),{isSticker:true,onUnwrap:c('wrapNullableForReact')(s)}):null,u?c('React').createElement(c('MessagingFlowerBorder.react'),{offset:-10}):null);}};f.exports=o;}),null);
__d('shouldNotRenderSegoe',['MessengerConfig','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('[\u0530-\u05f4\u10a0-\u10ff]'),i=c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Windows 10');f.exports=function j(k){return !c('MessengerConfig').SegoeUIDisabled&&i&&h.test(k);};}),null);
__d('MessengerBubble.react',['cx','EmojiOnlyMessage.react','immutable','ImmutableObject','MercuryIDs','MercuryMessageBody.react','MercuryMessageRenderLocations','MessengerActions','MessengerDecorator','MessengerSupportedEmojiUtils','React','joinClasses','shouldNotRenderSegoe'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={emojis:undefined},n;}l.prototype.componentDidMount=function(){if(!this.props.emojis){var m=this.props.body||'',n=c('MessengerSupportedEmojiUtils').getEmojiOnlyContents(m);if(n&&n.length)this.setState({emojis:n});}};l.prototype.render=function(){var m=false,n=null;if(this.state.emojis){n=c('React').createElement(c('EmojiOnlyMessage.react'),{contents:this.state.emojis});}else{m=true;n=c('React').createElement(c('MercuryMessageBody.react'),{body:this.props.body,className:"_3oh-"+(c('shouldNotRenderSegoe')(this.props.body||'')?' '+"_2por":'')+(' '+"_58nk"),threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,onContactSelect:this.$MessengerBubble1,renderLocation:c('MercuryMessageRenderLocations').MESSENGER});}var o=[],p=[],q=this.props.message,r=!!this.props.isFromViewer;if(q&&!this.props.excludeAfterDecorators){c('MessengerDecorator').getInsideDecorators().concat(c('MessengerDecorator').getAfterDecorators()).forEach(function(u){if(u.check(q)){o.push(u.render(q,r,this.props));p.push(u.getAdditionalClassNames());}}.bind(this));c('MessengerDecorator').getBeforeDecorators().forEach(function(u){if(u.check(q))p.push(u.getAdditionalClassNames());});}var s=p.join(' '),t=this.props.body?c('React').createElement('div',{className:"_aok"},n,this.props.attachments):null;return c('React').createElement('div',babelHelpers['extends']({},this.props,{className:c('joinClasses')(s,this.props.className,"_hh7"+(' '+"_s1-")+(!this.props.notBubblish?' '+"_52mr":'')+(this.props.isP2PAttachment?' '+"_4z55":'')+(!!this.state.emojis?' '+"_2f5r":'')+(!!this.state.emojis?' '+"_581a":'')+(this.props.isFromViewer&&!this.state.emojis?' '+"_43by":'')+(m?' '+"_3oh-":''))}),t,!t?n:null,!t?this.props.attachments:null,o);};l.prototype.$MessengerBubble1=function(m,n){n&&n.preventDefault();var o=c('MercuryIDs').getThreadIDFromUserID(m.id);o&&c('MessengerActions').selectThread(o);};l.propTypes={attachments:k.instanceOf(c('immutable').List),body:k.string,customColor:k.string,customLike:k.object,excludeAfterDecorators:k.bool,isFromViewer:k.bool,message:k.instanceOf(c('ImmutableObject')),metaRanges:k.array,notBubblish:k.bool,onUnwrap:k.func,ranges:k.array,threadID:k.string,threadCustomColor:k.string};f.exports=l;}),null);
__d('MessengerCodePasteUtils',['cx','BanzaiODS','MessengerBubble.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=/`{3,}/;function j(l){return !!(l&&l.search(i)!==-1&&l.split('\n').length>1);}function k(l,m,n,o){var p=l.split(i),q=[];for(var r=0;r<p.length;r+=2){var s=p[r].trim();if(s&&s.length>0)q.push(c('React').createElement(c('MessengerBubble.react'),{key:r,body:s,customColor:o||undefined,className:"clearfix _3058 _ui9",ranges:m,threadID:n}));if(r+1<p.length&&p[r+1]){var t=p[r+1].split('\n'),u=t[0].replace(/[^a-zA-Z]+/g,''),v=t.slice(1).join('\n');c('BanzaiODS').bumpEntityKey('messenger_code_paste','render_bubble');q.push(c('React').createElement('div',{key:r+1,className:"_3058 _wu0 _52mr"},c('React').createElement('div',{ref:'syntaxTarget'+r,className:'language-'+u},v)));}}return q;}f.exports={containsCodeBlock:j,getCodeAndMessageBubbles:k};}),null);
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={showDialog:function i(j,k){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function i(){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').DIALOG.HIDE});}};f.exports=h;}),null);
__d('MNCommercePromotionStateActions',['MessengerDispatcher','MNCommerceActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h={stateLoaded:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOADED,state:j});},stateLoadError:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR,pageID:j});},stateReload:function i(j){c('MessengerDispatcher').dispatch({type:c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD,pageID:j});}};f.exports=h;}),null);
__d('MercuryAttachmentAttribution.react',['cx','fbt','Image.react','ImmutableObject','Link.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;m.prototype.render=function(){var n=this.$MercuryAttachmentAttribution1();if(!n)return null;return c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_29ew")},c('React').createElement(c('Image.react'),{src:n.icon_url,className:"_29ex"}),c('React').createElement('span',{className:"_29ey"},n.name),this.$MercuryAttachmentAttribution2());};m.prototype.$MercuryAttachmentAttribution1=function(){return this.props.attachment&&this.props.attachment.app_attribution;};m.prototype.$MercuryAttachmentAttribution2=function(){var n=this.$MercuryAttachmentAttribution1();if(!n||!n.metadata)return null;var o="_439n",p=void 0;try{p=JSON.parse(n.metadata);}catch(q){return null;}if(p.spotify_link)return c('React').createElement(c('Link.react'),{className:o,href:p.spotify_link,target:'_blank'},i._("Open"));return null;};function m(){j.apply(this,arguments);}m.propTypes={attachment:l.instanceOf(c('ImmutableObject'))};f.exports=m;}),null);
__d('MessengerAttachmentAttribution.react',['cx','ImmutableObject','MercuryAttachmentAttribution.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('MercuryAttachmentAttribution.react'),{attachment:this.props.attachment,className:"_2f5n _4br2"});};function l(){i.apply(this,arguments);}l.propTypes={attachment:k.instanceOf(c('ImmutableObject'))};f.exports=l;}),null);
__d('MessengerBubbleBlock.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('div',{className:"_52mr _4h13 _3058"},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerCodeBubble.react',['Bootloader','immutable','MessengerCodePasteUtils','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.componentDidMount=function(){c('Bootloader').loadModules(["Prism.Complete"],function(l){for(var m in this.refs){var n=c('ReactDOM').findDOMNode(this.refs[m]);l.highlightElement(n);}}.bind(this),'MessengerCodeBubble.react');};k.prototype.render=function(){var l=c('MessengerCodePasteUtils').getCodeAndMessageBubbles(this.props.body,this.props.ranges,this.props.threadID,this.props.customColor);return c('React').createElement('div',{className:this.props.className},l);};function k(){h.apply(this,arguments);}k.propTypes={attachments:j.instanceOf(c('immutable').List),body:j.string.isRequired,customColor:j.string,ranges:j.array.isRequired,threadID:j.string.isRequired};f.exports=k;}),null);
__d('MessengerCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("See Latest Activity"),n=i._("See Less Activity");return c('React').createElement('div',{className:"_497p"},c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2"}),this.props.children,c('React').createElement('div',{className:"_4ea2"})):null);};f.exports=l;}),null);
__d('MessengerDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return c('React').createElement('h4',{className:c('joinClasses')(this.props.className,"_497p _2lpt")},c('React').createElement('time',{className:"_3oh-"},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d('MessengerHorizontalScroll.react',['ix','cx','fbt','Animation','Image.react','Link.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('React').PropTypes,l=250,m='left',n='right',o=c('React').createClass({displayName:'MessengerHorizontalScroll',_rightArrowBoundOnClick:Function,_leftArrowBoundOnClick:Function,propTypes:{batchScroll:k.bool.isRequired,childPadding:k.number.isRequired,childWidth:k.number.isRequired,freeScroll:k.bool.isRequired,leftOffset:k.number.isRequired,numChildrenVisible:k.number.isRequired,width:k.number.isRequired},getInitialState:function p(){var q=this._calculateState();return babelHelpers['extends']({index:0,scrollLeft:0},q);},getDefaultProps:function p(){return {batchScroll:false,childPadding:0,freeScroll:false,leftOffset:0,numChildrenVisible:1};},componentWillMount:function p(){this._rightArrowBoundOnClick=this._updatePosition.bind(this,n);this._leftArrowBoundOnClick=this._updatePosition.bind(this,m);},componentWillReceiveProps:function p(q){this.setState(this._calculateState(q));},render:function p(){var q=this.props;if(this.refs&&this.refs.childContainer&&!q.freeScroll)new (c('Animation'))(this.refs.childContainer).to('scrollLeft',this.state.scrollLeft).duration(l).go();var r=this._calculateVisibleWidth(),s=this.state.scrollLeft===0||q.freeScroll||r<q.width,t=this.state.scrollLeft===this.state.maxScrollLeft||q.freeScroll||r<q.width,u=q.freeScroll?'scroll':'hidden',v={overflow:u,width:q.width};return c('React').createElement('div',{className:"_5agf",style:{width:q.width}},c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the left"),className:(s?"hidden_elem":'')+(' '+"_5agg"),onClick:this._leftArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("141823")})),c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the right"),className:(t?"hidden_elem":'')+(' '+"_5agi"),onClick:this._rightArrowBoundOnClick,role:'button'},c('React').createElement(c('Image.react'),{className:"_5agh",src:h("141833")})),c('React').createElement('div',{className:"_5agj",ref:'childContainer',style:v},c('React').createElement('div',{className:"_5agk"},this._renderChildren())));},_calculateState:function p(q){if(!q||q.children!==this.props.children)var r=c('React').Children.map(this.props.children,function(s,t){return this._onChildClick.bind(null,t);}.bind(this));return {maxScrollLeft:this._getMaxScrollLeft(),boundChildOnClicks:r||this.state.boundChildOnClicks};},_updatePosition:function p(q){var r=c('React').Children.count(this.props.children)-this.props.numChildrenVisible,s=this.state.scrollLeft,t=s,u=this.state.index;switch(q){case n:if(this.props.batchScroll){u+=this.props.numChildrenVisible;if(u>r)u=r;}else u+=1;t=Math.min(this._getNextScrollLeft(u),this.state.maxScrollLeft);break;case m:if(this.props.batchScroll){u-=this.props.numChildrenVisible;if(u<0)u=0;}else u-=1;t=Math.max(0,this._getNextScrollLeft(u));break;}this.setState({scrollLeft:t,index:u});},_onChildClick:function p(q){if(this._isVisibleChild(q))return;var r=q<this.state.index?m:n;this._updatePosition(r);},_getNextScrollLeft:function p(q){if(q===0)return 0;var r=this.props,s=r.width,t=r.childWidth,u=r.childPadding,v=r.leftOffset,w=r.numChildrenVisible,x=t*w,y=u*(w-1),z=(s-(x+y))/2,aa=q*(u+t)-z;return aa+v;},_calculateVisibleWidth:function p(){var q=this.props,r=c('React').Children.count(q.children);return q.childWidth*r+q.childPadding*(r-1)+q.leftOffset;},_getMaxScrollLeft:function p(){var q=this._calculateVisibleWidth();return q-this.props.width;},_renderChildren:function p(){var q=this.props,r=c('React').Children.count(q.children);return c('React').Children.map(q.children,function(s,t){var u={};u.width=q.childWidth;if(t<r-1)u.paddingRight=q.childPadding;if(t===0&&q.leftOffset)u.paddingLeft=q.leftOffset;var v=this._isVisibleChild(t),w=q.freeScroll?null:this.state.boundChildOnClicks[t];return c('React').createElement('div',{className:"_5agl"+(v||q.freeScroll?' '+"_5agm":''),key:t,onClick:w,role:'presentation',style:u},s);}.bind(this));},_isVisibleChild:function p(q){var r=this.props,s=r.children,t=r.numChildrenVisible,u=c('React').Children.count(s),v=this.state.index,w=v===u-1,x=w?v:v+t-1,y=w?v-(t-1):v;return q<=x&&q>=y;}});f.exports=o;}),null);
__d('MNCommerceLoggingConstants',[],(function a(b,c,d,e,f,g){var h={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:'checkout_order_config',SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error',MANAGE:'manage'}};f.exports=h;}),null);
__d("XMNCommercePromotionBlockController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/promotion\/block\/",{page_id:{type:"String",required:true},type:{type:"String",required:true}});}),null);
__d('MNCommercePromotionBlockDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionBlockController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.block=function(i,j){var k=c('XMNCommercePromotionBlockController').getURIBuilder().setString('page_id',i).setString('type',j).getURI();new (c('AsyncRequest'))().setURI(k).setHandler(this.$MNCommercePromotionBlockDataManager1).setErrorHandler(this.$MNCommercePromotionBlockDataManager2).send();};h.prototype.$MNCommercePromotionBlockDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateReload(k);};h.prototype.$MNCommercePromotionBlockDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommerceButton.react',['MessengerEnvironment','MessengerDialogButton.react','React','XUIButton.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogButton.react'):c('XUIButton.react'),m=this.props.type;if(!m)m=this.props.type==='confirm'?'primary':'secondary';var n=k?'default':this.props.use,o=babelHelpers['extends']({},this.props,{type:m,use:n});return c('React').createElement(l,o,this.props.children);};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceAttachmentConstants',[],(function a(b,c,d,e,f,g){var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;}),null);
__d('MNCommerceDialog.react',['cx','MessengerEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:i.func,shown:i.bool,width:i.number.isRequired},getDefaultProps:function k(){return {onToggle:c('emptyFunction'),repositionOnUpdate:true,shown:true,width:c('MessengerEnvironment').messengerui?c('MNCommerceAttachmentConstants').MDOTCOMDIALOG.WIDTH:c('MNCommerceAttachmentConstants').DIALOG.WIDTH};},componentDidUpdate:function k(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function k(){var l=c('MessengerEnvironment').messengerui,m=l?c('MessengerDialog.react'):c('XUIDialog.react');return c('React').createElement(m,babelHelpers['extends']({behaviors:{LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')}},this.props,{className:c('joinClasses')(this.props.className,l?"_3rx0":''),ref:'dialog'}),this.props.children);}});f.exports=j;}),null);
__d('MNCommerceDialogBody.react',['MessengerEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogBody.react'):c('XUIDialogBody.react');return c('React').createElement(l,this.props,this.props.children);};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDialogTitle.react',['MessengerEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){var k=c('MessengerEnvironment').messengerui,l=k?c('MessengerDialogHeader.react'):c('XUIDialogTitle.react');return c('React').createElement(l,this.props,this.props.children);};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('MNCommerceDetailsDialog.react',['cx','fbt','React','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogTitle.react','XUISpinner.react','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MNCommerceDetailsDialog3=function(){return this.props.title?c('React').createElement(c('MNCommerceDialogTitle.react'),null,this.props.title):null;}.bind(this),this.$MNCommerceDetailsDialog2=function(){return c('React').createElement('div',{className:"_4y9b"},c('React').createElement('p',{className:"_4y9c"},i._("Sorry, Something Went Wrong")),c('React').createElement('p',{className:"_4y9d"},this.props.errorMessage),c('React').createElement(c('XUIButton.react'),{onClick:this.props.onTryAgain,label:i._("Try Again")}));}.bind(this),this.$MNCommerceDetailsDialog1=function(){return c('React').createElement('div',{className:"_4y9e"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large',paused:false}));},o;}m.prototype.render=function(){var n=null;if(this.props.loading){n=this.$MNCommerceDetailsDialog1();}else if(this.props.error){n=this.$MNCommerceDetailsDialog2();}else n=this.props.children;return c('React').createElement(c('MNCommerceDialog.react'),{className:this.props.className,modal:true,onToggle:this.props.onToggle,shown:this.props.shown},this.$MNCommerceDetailsDialog3(),c('React').createElement(c('MNCommerceDialogBody.react'),{useCustomPadding:true},n));};m.propTypes={error:l.object,errorMessage:l.node,loading:l.bool.isRequired,onToggle:l.func,onTryAgain:l.func,title:l.node,shown:l.bool.isRequired};m.defaultProps={shown:false};f.exports=m;}),null);
__d('MNCommerceDialogFooter.react',['cx','MessengerEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('MessengerEnvironment').messengerui,m=l?c('MessengerDialogFooter.react'):c('XUIDialogFooter.react'),n=void 0,o=this.props.children;if(l){n=c('React').Children.count(this.props.children);o=c('React').Children.map(this.props.children,function(p,q){if(!p)return null;return c('React').cloneElement(p,{className:c('joinClasses')(p.props.className,"_4ec0"),type:q===0&&n===2?'secondary':'primary'});});}return c('React').createElement(m,this.props,o);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerRadioButton.react',['cx','React','XUIRadioInput.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('XUIRadioInput.react'),babelHelpers['extends']({},this.props,{className:"__rm"}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerRadioList.react',['invariant','InputLabel.react','MessengerRadioButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerRadioListItem1=function(event){event.target instanceof HTMLInputElement||h(0);this.props.onSelect&&this.props.onSelect(this.props.value);}.bind(this),q;}n.prototype.render=function(){return c('React').createElement('li',{className:this.props.className},c('React').createElement(c('InputLabel.react'),{display:'inline'},c('React').createElement(c('MessengerRadioButton.react'),{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this.$MessengerRadioListItem1,value:this.props.value}),c('React').createElement('label',null,this.props.children)));};n.propTypes={disabled:m.bool,name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any};k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;o.prototype.render=function(){var p=c('React').Children.map(this.props.children,function(q){return c('React').cloneElement(q,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return c('React').createElement('ul',babelHelpers['extends']({},this.props,{name:null}),p);};function o(){k.apply(this,arguments);}o.propTypes={name:m.string,onValueChange:m.func,selectedValue:m.any};o.Item=n;f.exports=o;}),null);
__d('MNCommercePromotionManageBlockDialog.react',['fbt','MessengerEnvironment','Link.react','MessengerRadioList.react','MNCommerceButton.react','MNCommerceDetailsDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','MNCommerceBlockTypeJSInstance','React','URI','WorkModeConfig','XUIRadioList.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('MessengerRadioList.react').Item,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(p,q){j.constructor.call(this,p,q);o.call(this);this.state=this.$MNCommercePromotionManageBlockDialog1();}n.prototype.componentWillReceiveProps=function(p){this.setState(this.$MNCommercePromotionManageBlockDialog1(p));};n.prototype.$MNCommercePromotionManageBlockDialog1=function(p){var q=p||this.props,r=c('MNCommerceBlockTypeJSInstance').ALL;if(q.isAllBlocked||q.isPromotionBlocked)r=c('MNCommerceBlockTypeJSInstance').NONE;return {type:r};};n.prototype.render=function(){var p=this.props.merchantName||'',q=h._("Manage messages from {label for merchant name}",[h.param('label for merchant name',p)]),r=h._("Cancel"),s=h._("Confirm"),t=h._("Manage Options couldn't be shown."),u=c('WorkModeConfig').is_work_user?new (c('URI'))('https://facebook.com/help/work/1731361900459513').setSubdomain(c('WorkModeConfig').company_subdomain):new (c('URI'))('https://www.facebook.com/help/389645087895231'),v=c('React').createElement(c('Link.react'),{href:u,target:'_blank'},h._("Learn More"));return c('React').createElement(c('MNCommerceDetailsDialog.react'),babelHelpers['extends']({errorMessage:t,onToggle:this.props.onToggle,shown:this.props.shown},this.props),c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:true},q),c('React').createElement(c('MNCommerceDialogBody.react'),null,this.$MNCommercePromotionManageBlockDialog2()),c('React').createElement(c('MNCommerceDialogFooter.react'),{leftContent:v},c('React').createElement(c('MNCommerceButton.react'),{label:r,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:s,onClick:this.$MNCommercePromotionManageBlockDialog3,use:'confirm'})));};n.propTypes={isAllBlocked:m.bool,isPromotionBlocked:m.bool,error:m.object,loading:m.bool.isRequired,merchantName:m.string,onCancelButtonClick:m.func,onConfirmButtonClick:m.func.isRequired,pageID:m.string};var o=function p(){this.onTypeChange=function(q){this.setState({type:q});}.bind(this);this.$MNCommercePromotionManageBlockDialog2=function(){var q=c('MessengerEnvironment').messengerui,r=q?c('MessengerRadioList.react'):c('XUIRadioList.react'),s=q?k:l;return c('React').createElement(r,{selectedValue:this.state.type,onValueChange:this.onTypeChange},c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').ALL},h._("Receive all messages")),c('React').createElement(s,{value:c('MNCommerceBlockTypeJSInstance').NONE},h._("Turn off all messages")));}.bind(this);this.$MNCommercePromotionManageBlockDialog3=function(q){var r=this.props;r.onToggle(false);if(!r.onConfirmButtonClick)return;var s=r.pageID;r.onConfirmButtonClick(s,this.state.type);}.bind(this);};f.exports=n;}),null);
__d('MNCommerceCacheTimeoutLimits',[],(function a(b,c,d,e,f,g){'use strict';var h={SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1};f.exports=h;}),null);
__d("XMNCommercePromotionStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/promotion\/state\/",{page_id:{type:"String",required:true}});}),null);
__d('MNCommercePromotionStateDataManager',['AsyncRequest','MNCommercePromotionStateActions','XMNCommercePromotionStateController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.fetchPromotionState=function(i){var j=c('XMNCommercePromotionStateController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(j).setHandler(this.$MNCommercePromotionStateDataManager1).setErrorHandler(this.$MNCommercePromotionStateDataManager2).send();};h.prototype.$MNCommercePromotionStateDataManager1=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;i.payload.pageID=k;c('MNCommercePromotionStateActions').stateLoaded(i.payload);};h.prototype.$MNCommercePromotionStateDataManager2=function(i){var j=i.getRequest().uri.getQueryData(),k=j.page_id;c('MNCommercePromotionStateActions').stateLoadError(k);};function h(){}f.exports=new h();}),null);
__d('MNCommercePromotionStateStore',['Cache','FluxStore','LoadObject','MessengerDispatcher','MNCommerceActionTypes','MNCommerceCacheTimeoutLimits','MNCommercePromotionStateDataManager'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MNCommercePromotionStateStore1=new (c('Cache'))();}j.prototype.__onDispatch=function(k){var l=k.type,m=k.pageID||k.state&&k.state.pageID;switch(l){case c('MNCommerceActionTypes').PROMOTION_STATE.LOADED:var n=k.state;this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setValue(n),null,c('MNCommerceCacheTimeoutLimits').SUCCESS_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').empty().setError(new Error('Unable to load permissions for: '+m)),null,c('MNCommerceCacheTimeoutLimits').ERROR_TIMEOUT);this.__emitChange();break;case c('MNCommerceActionTypes').PROMOTION_STATE.RELOAD:if(m){this.$MNCommercePromotionStateStore1.set(m,c('LoadObject').loading());c('MNCommercePromotionStateDataManager').fetchPromotionState(m);}this.__emitChange();break;}};j.prototype.getPromotionState=function(k){if(k&&!this.$MNCommercePromotionStateStore1.has(k)){this.$MNCommercePromotionStateStore1.set(k,c('LoadObject').loading().setValue({pageID:k}));c('MNCommercePromotionStateDataManager').fetchPromotionState(k);}return this.$MNCommercePromotionStateStore1.get(k)||c('LoadObject').empty();};f.exports=new j();}),null);
__d('MNCommercePromotionManageBlockDialogContainer.react',['MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommercePromotionManageBlockDialog.react','MNCommercePromotionStateActions','MNCommercePromotionStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommercePromotionManageBlockDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommercePromotionStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getState(),k=null;if(j)k=j.pageID;var l=c('MNCommercePromotionStateStore').getPromotionState(k);return {shown:!!j,loading:l.isLoading(),onConfirmButtonClick:j&&j.onConfirmButtonClick,pageID:k,promotionState:l.getValue(),error:l.getError()};}},render:function i(){var j=this.state.promotionState;return c('React').createElement(c('MNCommercePromotionManageBlockDialog.react'),{error:this.state.error,isAllBlocked:j&&j.is_all_blocked,isPromotionBlocked:j&&j.is_promotion_blocked,loading:this.state.loading,merchantName:j&&j.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this.state.onConfirmButtonClick,shown:this.state.shown});},_onToggle:function i(j){if(!j)this._hideDialog();},_onTryAgainClick:function i(){c('MNCommercePromotionStateActions').stateReload(this.state.pageID);},_hideDialog:function i(){c('MNCommerceDialogStateActions').hideDialog();}});f.exports=h;}),null);
__d('MNCommerceUnlinkDialog.react',['fbt','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("Cancel"),n=h._("Turn Off");return c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown},c('React').createElement(c('MNCommerceDialogTitle.react'),{showCloseButton:false},h._("Unlink account?")),c('React').createElement(c('MNCommerceDialogBody.react'),null,c('React').createElement('div',null,h._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onCancelButtonClick,use:'default'}),c('React').createElement(c('MNCommerceButton.react'),{label:n,onClick:this.props.onTurnOffButtonClick,use:'confirm'})));};function l(){i.apply(this,arguments);}l.propTypes={onCancelButtonClick:k.func,onTurnOffButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkErrorDialog.react',['fbt','MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=h._("OK"),n=null,o=null;switch(this.props.errorType){case c('MNCommerceErrors').ALREADY_UNLINKED:o=c('React').createElement('div',null,h._("Updates Are Already Off"));n=c('React').createElement('div',null,h._("You aren't getting updates in Messenger."));break;default:o=c('React').createElement('div',null,h._("Couldn't Turn Off Updates"));n=c('React').createElement('div',null,h._("Sorry, something went wrong. Please try again."));break;}return c('React').createElement(c('MNCommerceDialog.react'),{onToggle:this.props.onToggle,shown:this.props.shown,width:c('MNCommerceAttachmentConstants').UNLINK_ERROR_DIALOG.WIDTH},c('React').createElement(c('MNCommerceDialogTitle.react'),null,o),c('React').createElement(c('MNCommerceDialogBody.react'),null,n),c('React').createElement(c('MNCommerceDialogFooter.react'),null,c('React').createElement(c('MNCommerceButton.react'),{label:m,onClick:this.props.onOkayButtonClick,use:'confirm'})));};function l(){i.apply(this,arguments);}l.propTypes={errorType:k.number,onOkayButtonClick:k.func};f.exports=l;}),null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.$MNCommerceUnlinkDialogContainer1=function(p){if(!p)this.$MNCommerceUnlinkDialogContainer2();}.bind(this),this.$MNCommerceUnlinkDialogContainer2=function(){c('MNCommerceDialogStateActions').hideDialog();},l;}j.prototype.render=function(){var k=c('MNCommerceDialogStateStore').getState();if(k&&k.errorType){c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK_ERROR})});return c('React').createElement(c('MNCommerceUnlinkErrorDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,errorType:k.errorType,onOkayButtonClick:this.$MNCommerceUnlinkDialogContainer2});}else{c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});return c('React').createElement(c('MNCommerceUnlinkDialog.react'),{onToggle:this.$MNCommerceUnlinkDialogContainer1,shown:!!k,onCancelButtonClick:this.$MNCommerceUnlinkDialogContainer2,onTurnOffButtonClick:k&&k.onTurnOffButtonClick});}};f.exports=j;}),null);
__d("XMNCommerceUnlinkController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});}),null);
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.unlink=function(i,j){var k=c('XMNCommerceUnlinkController').getURIBuilder().setString('page_id',i).setString('user_id',j).getURI();new (c('AsyncRequest'))().setURI(k).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};h.prototype.$MNCommerceUnlinkDataManager1=function(i){c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{errorType:i.error});};function h(){}f.exports=new h();}),null);
__d('MNCommerceLogMessageUtils',['cx','fbt','invariant','BanzaiLogger','Link.react','MercuryConfig','MercuryIDs','MercuryThreads','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','MNCommerceUnlinkDataManager','MNCommerceUnlinkDialogContainer.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('MercuryThreads').get();l.prototype.isCommercePageAdminMessage=function(m){return !!(m&&m.log_message_data&&(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK||m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_UNLINK));};l.prototype.getCommercePageManage=function(m,n){var o=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var p=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=function u(v,w){return c('MNCommercePromotionBlockDataManager').block(v,w);};c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:s,onConfirmButtonClick:t});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.MANAGE})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:p},i._("Manage"));}else if(m.log_message_data.replyType===c('MNCommerceReplyTypes').COMMERCE_LINK){var q=function r(){var s=c('MercuryIDs').getUserIDFromParticipantID(m.author),t=k.getThreadMetaNow(m.thread_id);t||j(0);var u=null;t.participants.every(function(w){if(w!==m.author){u=c('MercuryIDs').getUserIDFromParticipantID(w);return false;}return true;});var v=function w(){c('MNCommerceDialogStateActions').hideDialog();c('MNCommerceUnlinkDataManager').unlink(s,u);};c('MNCommerceDialogStateActions').showDialog(c('MNCommerceUnlinkDialogContainer.react'),{onTurnOffButtonClick:v});c('BanzaiLogger').log('MessengerCommerceLoggerConfig',{event:c('MNCommerceLoggerEvents').DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:c('MNCommerceLoggingConstants').DIALOG_SURFACE.UNLINK})});};o=c('React').createElement(c('Link.react'),{className:(!n?"_2w2m":'')+(n?' '+"_1jvn":''),onClick:q},i._("Turn Off"));}return c('React').createElement('span',null,m.log_message_body,' ',o);};function l(){}f.exports=new l();}),null);
__d('MNAdsMessageUtils',['cx','fbt','AdPageMessageTypeEnum','Bootloader','FBJSON','Link.react','MercuryConfig','MercuryIDs','MessagingGenericAdminTextType','MessagingTag','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React','getPageIDFromThreadID'],(function a(b,c,d,e,f,g,h,i){'use strict';var j='offsite_ad';k.prototype.isAdsMessageRequest=function(l){return l.folder==c('MessagingTag').PENDING&&!!l.last_message_type&&l.last_message_type!==c('AdPageMessageTypeEnum').NON_AD;};k.prototype.renderAdsMessageRequestStatus=function(){var l=i._("Sponsored");return c('React').createElement('span',null,l);};k.prototype.isAdsAdminMessage=function(l){return l&&l.log_message_data&&l.log_message_data.message_type&&l.log_message_data.message_type===c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE;};k.prototype.isOffsiteAd=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_properties){var m=c('FBJSON').parse(l.log_message_data.untypedData.ad_properties);for(var n=m,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q;if(r===j)return true;}}return false;};k.prototype.getadPreferencesUrl=function(l){if(l.log_message_data&&l.log_message_data.untypedData&&l.log_message_data.untypedData.ad_preferences_url)return l.log_message_data.untypedData.ad_preferences_url;return '';};k.prototype.getAdsPageManage=function(l,m){var n=null;if(c('MercuryConfig').WWWMessengerManageAdminGK){var o=function(){var p=this.isOffsiteAd(l),q=c('getPageIDFromThreadID')(l.thread_id);if(!q)q=c('MercuryIDs').getUserIDFromParticipantID(l.author);var r=this.getadPreferencesUrl(l),s=function t(u,v){return c('MNCommercePromotionBlockDataManager').block(u,v);};c('Bootloader').loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(t){c('MNCommerceDialogStateActions').showDialog(t,{adPreferencesUrl:r,isOffsiteAd:p,onConfirmButtonClick:s,pageID:q});},'MNAdsMessageUtils');}.bind(this);n=c('React').createElement(c('Link.react'),{className:(!m?"_3kyk":'')+(m?' '+"_3kyl":''),onClick:o},i._("Manage"));return c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body,' ','\u00B7',' ',n);}return c('React').createElement('span',{className:!m?"_3kym":''},l.log_message_body);};function k(){}f.exports=new k();}),null);
__d('MessengerGamesCustomUpdateAdmin.react',['cx','fbt','Link.react','MessengerButton.react','messengerContactImageReact','Image.react','React','RelayModern','MessengerGamesCustomUpdateAdmin_gameInfo.graphql'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactImageReact').comp,m=c('RelayModern').createFragmentContainer,n=c('RelayModern').graphql;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props.data.getImageURL(),q=this.props.data.getText(),r=this.props.data.getTitle()?this.props.data.getTitle():i._("Play");if(!this.props.gameInfo)return c('React').createElement('span',null,q);return c('React').createElement('div',null,c('React').createElement(c('Link.react'),{className:"_fy2 _2621",'aria-haspopup':'true','aria-label':i._("View Less"),href:'#',onClick:this.props.hideAdmin,role:'button'}),c('React').createElement('div',{className:"_261_"},c('React').createElement(l,{size:25,src:this.props.gameInfo.iconURI}),c('React').createElement('h2',{className:"_2620"},this.props.gameInfo.name)),c('React').createElement('div',{className:"_3rpv"},c('React').createElement(c('Image.react'),{className:"_3rp-",onClick:this.props.playGame,src:p}),c('React').createElement('div',{className:"_3rp_"},q),c('React').createElement('div',{className:"_3cnr"},c('React').createElement(c('MessengerButton.react'),{className:"_3rq0 _fy2",label:r,onClick:this.props.playGame,type:'primary',use:'default'}))));};function o(){j.apply(this,arguments);}f.exports=m(o,{gameInfo:function p(){return c('MessengerGamesCustomUpdateAdmin_gameInfo.graphql');}});}),null);
__d('MessengerGamesCustomUpdateAdminContainer.react',['fbt','MessengerGamesCustomUpdateAdmin.react','React','RelayFBEnvironment','RelayModern','MessengerGamesCustomUpdateAdminContainerQuery.graphql'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l=c('RelayModern').QueryRenderer,m=c('RelayModern').graphql;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.prototype.render=function(){return c('React').createElement(l,{environment:c('RelayFBEnvironment'),query:k||(k=function o(){return c('MessengerGamesCustomUpdateAdminContainerQuery.graphql');}),variables:{gameID:this.props.gameID},render:function(o){var p=o.error,q=o.props;if(p){return c('React').createElement('div',null,h._("Failed to Load"));}else if(q){var r=q.node&&q.node.gameInfo;if(!r)return c('React').createElement('div',null,this.props.text);return c('React').createElement(c('MessengerGamesCustomUpdateAdmin.react'),babelHelpers['extends']({},this.props,{gameInfo:r}));}return this.props.renderLoading();}.bind(this)});};function n(){i.apply(this,arguments);}f.exports=n;}),null);
__d('MessengerGamesCustomUpdateData',['GamesQuicksilverContextKey','URI'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MessengerGamesCustomUpdateData1=null;this.$MessengerGamesCustomUpdateData2=i.custom_image_url||null;this.$MessengerGamesCustomUpdateData4=i.text||i.collapsed_text||i.expanded_text||'';this.$MessengerGamesCustomUpdateData5=i.cta_title;var j=new (c('URI'))(i.cta_url).getQueryData();this.$MessengerGamesCustomUpdateData3=j.payload||null;var k=j.context_id||null,l=j.context_type;if(l)this.$MessengerGamesCustomUpdateData1=new (c('GamesQuicksilverContextKey'))(null,k,l);}h.prototype.getContextKey=function(){return this.$MessengerGamesCustomUpdateData1;};h.prototype.getImageURL=function(){return this.$MessengerGamesCustomUpdateData2;};h.prototype.getPayload=function(){return this.$MessengerGamesCustomUpdateData3;};h.prototype.getTitle=function(){return this.$MessengerGamesCustomUpdateData5;};h.prototype.getText=function(){return this.$MessengerGamesCustomUpdateData4;};f.exports=h;}),null);
__d('MessengerGameAdminMessageRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerGameAdminMessageRoute';j.queries={adminMessageText:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'MessageData!'},name:'thread_and_message_id',value:{kind:'CallVariable',callVariableName:'messageData'}}],children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(m)]),fieldName:'message',kind:'Query',metadata:{isAbstract:true,identifyingArgName:'thread_and_message_id',identifyingArgType:'MessageData!'},name:'MessengerGameAdminMessageRoute',type:'Message'};}(l.getFragment('adminMessageText'));}};j.paramDefinitions={messageData:{type:'MessageData!',required:true}};f.exports=j;}),null);
__d('MessengerResponsiveBlock.react',['React','createCancelableFunction','requestAnimationFrame','shallowEqual','throttle'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k={bottom:0,left:0,overflow:'hidden',position:'absolute',right:0,top:0,visibility:'hidden',zIndex:-1},l={left:0,position:'absolute',top:0,transition:'0s'},m={height:'200%',left:0,position:'absolute',top:0,transition:'0s',width:'200%'};h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.dirty=false,this.lastWidth=null,this.lastHeight=null,this.lastBreakpointsToggles=null,this.setupWeirdScrollTracking=function(){this.refs.expandChild.style.width='10000px';this.refs.expandChild.style.height='10000px';this.refs.expand.scrollLeft=100000;this.refs.expand.scrollTop=100000;this.refs.shrink.scrollLeft=100000;this.refs.shrink.scrollTop=100000;}.bind(this),this.$MessengerResponsiveBlock2=function(){var t=this.refs.outer.offsetWidth,u=this.refs.outer.offsetHeight;if(t!=this.lastWidth||u!=this.lastHeight)if(!this.dirty){if(Math.abs(t-(this.lastWidth||0))<10&&Math.abs(u-(this.lastHeight||0))<16)return;this.dirty=true;this.lastWidth=t;this.lastHeight=u;var v=this.props.breakpointsToggles(t,u);if(c('shallowEqual')(this.lastBreakpointsToggles,v)){this.dirty=false;}else this.forceUpdate(function(){c('requestAnimationFrame')(function(){this.dirty=false;}.bind(this));}.bind(this));this.lastBreakpointsToggles=v;}this.setupWeirdScrollTracking();}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerResponsiveBlock1=c('createCancelableFunction')(this.$MessengerResponsiveBlock2);this.onScroll=c('throttle')(this.$MessengerResponsiveBlock1,50);this.setupWeirdScrollTracking();};n.prototype.componentWillUnmount=function(){this.$MessengerResponsiveBlock1.cancel();};n.prototype.render=function(){return c('React').createElement('div',{ref:'outer'},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'expand'},c('React').createElement('div',{style:l,ref:'expandChild'})),c('React').createElement('div',{style:k,onScroll:this.onScroll,ref:'shrink'},c('React').createElement('div',{style:m})));};n.propTypes={children:j.func.isRequired,breakpointsToggles:j.func.isRequired};f.exports=n;}),null);
__d('MessengerGamesHorizontalLeaderboard.react',['cx','messengerContactImageReact','MessengerHorizontalScroll.react','MessengerResponsiveBlock.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerContactImageReact').comp,l=10,m=150,n=function q(r){var s=r.name,t=r.score,u=r.position;return c('React').createElement('div',{className:"_4u4_"},c('React').createElement('h3',null,s),c('React').createElement('div',null,t));},o=function q(r,s){if(!r||!r.user)return null;return c('React').createElement('div',{className:"_4u50",key:s},c('React').createElement(k,{size:40,src:r.user.profile_picture.uri,customBadge:String(s+1)}),c('React').createElement(n,{name:r.user.short_name,position:s+1,score:r.score}));};i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;p.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};p.prototype.render=function(){var q=this.props.leaderboard.leaderboard_entries;return c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function r(s){return [s];}},function(r){var s=r[0];return c('React').createElement(c('MessengerHorizontalScroll.react'),{batchScroll:true,childPadding:l,childWidth:m,numChildrenVisible:Math.floor(s/(m+l)),width:s||0},q.map(o).filter(Boolean));});};function p(){i.apply(this,arguments);}f.exports=c('Relay').createContainer(p,{fragments:{leaderboard:function q(){return function(){return {children:[{calls:[{kind:'Call',metadata:{},name:'scores_only',value:{kind:'CallValue',callValue:true}}],children:[{fieldName:'score',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'short_name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'user',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'User'}],fieldName:'leaderboard_entries',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'InstantGameLeaderboardEntry'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGamesHorizontalLeaderboard_react_LeaderboardRelayQL',type:'InstantGameLeaderboard'};}();}}});}),null);
__d('MessengerGamesExpandedAdmin.react',['cx','fbt','MessengerButton.react','messengerContactImageReact','MessengerGamesHorizontalLeaderboard.react','Link.react','React','Relay','RelayQL','idx'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactImageReact').comp,m=function o(p){var q=p.name,r=p.uri;return c('React').createElement('div',{className:"_261_"},c('React').createElement(l,{size:25,src:r}),c('React').createElement('h2',{className:"_2620"},q));};j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};n.prototype.render=function(){var o,p,q=this.$MessengerGamesExpandedAdmin1(),r=this.$MessengerGamesExpandedAdmin2();if(!r||!q)return null;var s=(o=r)!=null?(o=o.game)!=null?o.name:o:o,t=(p=r)!=null?(p=p.game)!=null?(p=p.instant_game_info)!=null?p.icon_uri:p:p:p;return c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2 _2kar"}),c('React').createElement(c('Link.react'),{className:"_fy2 _2621",'aria-haspopup':'true','aria-label':i._("View Less"),href:'#',onClick:this.props.hideAdmin,role:'button'}),c('React').createElement(m,{name:s,uri:t}),c('React').createElement('div',{className:"_2622"},r.expanded_text),c('React').createElement(c('MessengerGamesHorizontalLeaderboard.react'),{leaderboard:q,onLoad:this.props.onLoad}),c('React').createElement(c('MessengerButton.react'),{className:"_fy2 _2623",label:i._("Play Now"),onClick:this.props.playGame,type:'primary',use:'default'}),c('React').createElement('div',{className:"_4ea2 _2kar"}));};n.prototype.$MessengerGamesExpandedAdmin1=function(){var o;return (o=this.$MessengerGamesExpandedAdmin2())!=null?o.leaderboard:o;};n.prototype.$MessengerGamesExpandedAdmin2=function(){var o;return (o=this.props)!=null?(o=o.adminMessageText)!=null?o.extensible_message_admin_text:o:o;};function n(){j.apply(this,arguments);}f.exports=c('Relay').createContainer(n,{fragments:{adminMessageText:function o(){return function(p){return {children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{children:[{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'icon_uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'instant_game_info',kind:'Field',metadata:{canHaveSubselections:true},type:'GamesInstantPlayStyleInfo'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'game',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Application'},{fieldName:'expanded_text',kind:'Field',metadata:{},type:'String'},{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(p)]),fieldName:'leaderboard',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'InstantGameLeaderboard'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'InstantGameUpdateExtensibleMessageAdminText',type:'InstantGameUpdateExtensibleMessageAdminText'}],fieldName:'extensible_message_admin_text',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true},type:'ExtensibleMessageAdminText'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'GenericAdminTextMessage',type:'GenericAdminTextMessage'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'MessengerGamesExpandedAdmin_react_AdminMessageTextRelayQL',type:'Message'};}(c('MessengerGamesHorizontalLeaderboard.react').getFragment('leaderboard'));}}});}),null);
__d('MessengerGamesExpandedAdminContainer.react',['fbt','MessengerGameAdminMessageRoute','MessengerGamesExpandedAdmin.react','React','Relay'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('Relay').RootContainer;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.renderLoaded=function(r){var s=this.props,t=s.gameID,u=s.hideAdmin,v=s.playGame,w=s.threadFBID;return c('React').createElement(c('MessengerGamesExpandedAdmin.react'),babelHelpers['extends']({},r,{gameID:t,hideAdmin:u,onLoad:this.props.onLoad,playGame:v,threadFBID:w}));}.bind(this),n;}l.prototype.render=function(){var m=this.props,n=m.messageID,o=m.threadFBID,p=m.renderLoading;return c('React').createElement(k,{Component:c('MessengerGamesExpandedAdmin.react'),route:new (c('MessengerGameAdminMessageRoute'))({messageData:{message_id:n,thread_id:o}}),renderLoading:p,renderFetched:this.renderLoaded,renderFailure:this.renderFailure});};l.prototype.renderFailure=function(){return h._("Failed to Load");};f.exports=l;}),null);
__d('MessengerGameAdminMessage.react',['cx','fbt','Bootloader','BootloadOnRender.react','ImmutableObject','InstantGameContextType','JSResource','LazyComponent.react','Link.react','MercuryIDs','messengerDialogsRe','MessengerGamesCustomUpdateAdminContainer.react','MessengerGamesCustomUpdateData','MessengerGamesExpandedAdminContainer.react','QuicksilverSources','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=function o(){c('messengerDialogsRe').removeAllDialogs();};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state=this.$MessengerGameAdminMessage1(),this.renderText=function(){return c('React').createElement('span',null,c('React').createElement('span',null,this.props.text,' '),c('React').createElement(c('Link.react'),{className:"_fy2",onClick:this.state.isExpanded?this.$MessengerGameAdminMessage2:this.$MessengerGameAdminMessage4},i._("View")));}.bind(this),this.$MessengerGameAdminMessage3=function(){c('Bootloader').loadModules(["MessengerGamesQuicksilverPlayerContainer.react"],function(t){c('messengerDialogsRe').showDialog(function(){var u=this.getXMATData(),v=u.update_data?JSON.parse(u.update_data):u,w=new (c('MessengerGamesCustomUpdateData'))(v),x=c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id),y=c('InstantGameContextType').SOLO,z=null,aa=w.getContextKey();if(aa){y=aa.getType();z=aa.getSourceID();}else if(x){y=c('InstantGameContextType').THREAD;z=x;}return c('React').createElement(t,{contextSourceID:z,contextType:y,entryPointData:w.getPayload()||undefined,gameID:u.game_id,onHide:m,source:c('QuicksilverSources').MESSENGER_ADMIN_MESSAGE,sourceID:x,invitationID:this.props.message.message_id});}.bind(this));}.bind(this),'MessengerGameAdminMessage.react');}.bind(this),this.$MessengerGameAdminMessage4=function(){this.setState({isExpanded:true});}.bind(this),this.$MessengerGameAdminMessage2=function(){this.setState({isExpanded:false});}.bind(this),p;}n.prototype.$MessengerGameAdminMessage1=function(){return {isExpanded:this.props.isLastOfType,playerOpen:false};};n.prototype.componentDidMount=function(){this.props.onLoad&&this.props.onLoad();};n.prototype.componentWillReceiveProps=function(o){if(this.props.isLastOfType!==o.isLastOfType)this.setState({isExpanded:o.isLastOfType});};n.prototype.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new (c('ImmutableObject'))(this.props.message.log_message_data.untypedData):new (c('ImmutableObject'))();};n.prototype.render=function(){var o=this.getXMATData(),p=null;switch(o.update_type){case 'game_score':return this.state.isExpanded?c('React').createElement('span',null,c('React').createElement(c('MessengerGamesExpandedAdminContainer.react'),{hideAdmin:this.$MessengerGameAdminMessage2,gameID:o.game_id,messageID:this.props.message.message_id,playGame:this.$MessengerGameAdminMessage3,threadFBID:c('MercuryIDs').getThreadFBIDFromThreadID(this.props.message.thread_id),onLoad:this.props.onLoad,renderLoading:this.renderText})):c('React').createElement('span',null,this.renderText(),p);case 'custom_message':var q=o.update_data?JSON.parse(o.update_data):o,r=new (c('MessengerGamesCustomUpdateData'))(q);return this.state.isExpanded?c('React').createElement('span',null,c('React').createElement(c('MessengerGamesCustomUpdateAdminContainer.react'),{data:r,gameID:o.game_id,hideAdmin:this.$MessengerGameAdminMessage2,playGame:this.$MessengerGameAdminMessage3,renderLoading:this.renderText,text:this.props.text})):c('React').createElement('span',null,this.renderText(),p);default:return c('React').createElement('span',null,this.props.text);}};n.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,text:l.string.isRequired,isLastOfType:l.bool.isRequired};f.exports=n;}),null);
__d("MessengerGroupPollingAllOptionsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1517373188293417";};j.getQueryID=function(){"use strict";return "205216646649962";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('MessengerGroupPollingUtils',['ix','CurrentUser','FacepileRounded.react','MercuryIDs','MercuryParticipants','MessengerTextWithEntities.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=2,j={renderEmojiText:function k(l){return c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:l});},renderVoterFacepiles:function k(l,m,n,o,p){var q=i,r=n-i;if(n===i+1){q=n;r=0;}return c('React').createElement(c('FacepileRounded.react'),{className:l,imageSize:m,direction:'descending',numProfilesToDisplay:q,remainingProfilesCount:r,profiles:this._getProfilePictures(q,o,p),showNames:true});},_getProfilePictures:function k(l,m,n){if(n===true){var o=c('CurrentUser').getID(),p=m.indexOf(o);if(p!==-1){var q=m[p];m[p]=m[0];m[0]=q;}}var r=m.slice(0,l).map(function(t){var u=c('MercuryIDs').getParticipantIDFromUserID(t),v=c('MercuryParticipants').getOrFetch(u);return {image_src:v&&v.image_src||h("98939"),name:v&&v.name||'Facebook User'};}),s=m.slice(l,m.length).map(function(t){var u=c('MercuryIDs').getParticipantIDFromUserID(t),v=c('MercuryParticipants').getOrFetch(u);return {image_src:t,name:v&&v.name||'Facebook User'};});return r.concat(s);}};f.exports=j;}),null);
__d('MessengerGroupPollingAdminMessage.react',['cssVar','cx','fbt','ix','AsyncRequest','BootloadOnRender.react','Image.react','ImmutableObject','JSResource','LazyComponent.react','MessengerContextualDialog.react','MessengerEnvironment','MessengerGroupPollingAllOptionsWebGraphQLQuery','MessengerGroupPollingUtils','MessengerSpinner.react','React','idx'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m,n=c('React').PropTypes,o=16,p=24,q=k("86887"),r=k("86886"),s=3;l=babelHelpers.inherits(t,c('React').Component);m=l&&l.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=m.constructor).call.apply(u,[this].concat(x)),this.state={flyoutOpen:false,options:null},this.$MessengerGroupPollingAdminMessage1=false,this.$MessengerGroupPollingAdminMessage4=function(z){this.setState({flyoutOpen:z});}.bind(this),this.$MessengerGroupPollingAdminMessage5=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerGroupPollingAdminMessage9=function(z){this.$MessengerGroupPollingAdminMessage1=this.state.flyoutOpen;}.bind(this),this.$MessengerGroupPollingAdminMessage8=function(z){z.stopPropagation();if(this.state.flyoutOpen||this.$MessengerGroupPollingAdminMessage1)return;if(!this.state.options&&!this.state.flyoutOpen)this.$MessengerGroupPollingAdminMessage2();this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),v;}t.prototype.componentDidMount=function(){this.$MessengerGroupPollingAdminMessage2();};t.prototype.render=function(){var u,v,w=this.props.customColor||"#0084ff",x=c('MessengerGroupPollingUtils').renderEmojiText(this.props.message.log_message_body),y=c('MessengerEnvironment').messengerui,z=this.props.isLastOfType||this.state.flyoutOpen&&y;if(!z)return x;var aa=(u=this.props.message)!=null?(u=u.log_message_data)!=null?(u=u.untypedData)!=null?u.question_json:u:u:u,ba=aa&&JSON.parse(aa);if(!ba)return this.$MessengerGroupPollingAdminMessage3();var ca=y?p:o,da=c('React').createElement('div',{className:"_8bt"+(!y?' '+"_5il4":'')},c('React').createElement(c('MessengerSpinner.react'),{color:'grey'})),ea=null;if(this.state.flyoutOpen)ea=c('React').createElement(c('MessengerContextualDialog.react'),{contextRef:function(){return this.refs.voteButton;}.bind(this),shown:this.state.flyoutOpen,onToggle:this.$MessengerGroupPollingAdminMessage4,onBlur:this.$MessengerGroupPollingAdminMessage5},c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:w,questionID:ba.id,questionText:ba.text,options:this.state.options,onSubmitHandler:this.$MessengerGroupPollingAdminMessage5}),loader:c('JSResource')('MessengerGroupPollingFlyout.react').__setRef('MessengerGroupPollingAdminMessage.react'),placeholder:da}));if(!this.state.options)return x;var fa=this.state.options.slice(0,s).map(function(ja){var ka,la=(ka=ja)!=null?(ka=ka.voters)!=null?ka.edges:ka:ka,ma=[];if(la)ma=la.map(function(na){return na.node.id;});return babelHelpers['extends']({},ja,{total_count:ja.voters.count,voters:ma});}),ga=((v=fa)!=null?(v=v[0])!=null?v.total_count:v:v)||0,ha=fa.map(function(ja){return c('React').createElement('div',{className:"_3b4a"+(!y?' '+"_4ic5":''),key:ja.id},c('React').createElement('div',{className:"_3b4c"},c('React').createElement('div',{className:(y?"_3b4f":'')+(!y?' '+"_4ic6":'')},c('MessengerGroupPollingUtils').renderEmojiText(ja.text)),c('MessengerGroupPollingUtils').renderVoterFacepiles("_4ic7"+(!y?' '+"_8kg":''),ca,ja.total_count,ja.voters,ja.viewer_has_voted==='true')),c('React').createElement('div',{className:"_3b4h"+(!y?' '+"_4ic8":'')},c('React').createElement('span',{style:{width:this.$MessengerGroupPollingAdminMessage6(ja.total_count,ga),backgroundColor:w}})));}.bind(this)),ia=ba.viewer_has_voted==='true'?j._("Change Vote"):j._("Vote");return c('React').createElement('div',null,x,c('React').createElement('div',{onLoad:this.props.onLoad,className:"_3b4t"+(!y?' '+"_4ic9":'')},c('React').createElement('div',{className:"_3b4u"+(!y?' '+"_2wew":'')},c('React').createElement(c('Image.react'),{className:"_4ica"+(!y?' '+"_2ozk":''),src:y?q:r}),j._("Poll")),c('React').createElement('div',{className:(y?"_3b4v":'')+(!y?' '+"_2wex":'')},c('MessengerGroupPollingUtils').renderEmojiText(ba.text)),c('React').createElement('div',{className:"_3b4w"},ha),c('React').createElement('div',{className:"_8bu"},this.$MessengerGroupPollingAdminMessage7(ba.total_count)),c('React').createElement('div',{className:"_4icb"+(!y?' '+"_4icc":'')+(y?' '+"uiContextualLayerParent":'')+(y?' '+"_5f0v":''),onClick:this.$MessengerGroupPollingAdminMessage8,onMouseDown:this.$MessengerGroupPollingAdminMessage9,ref:'voteButton',role:'button',style:{color:w},tabIndex:'0'},ia,ea)));};t.prototype.$MessengerGroupPollingAdminMessage3=function(){return c('React').createElement('span',null,j._("{original-admin-message} Use the mobile app to vote.",[j.param('original-admin-message',this.props.message.log_message_body)]));};t.prototype.$MessengerGroupPollingAdminMessage7=function(u){var v=u-s;if(v<=0){return null;}else return j._({"*":"{number of remaining answer options} more options...","268435456":"{number of remaining answer options} more option..."},[j.param('number of remaining answer options',v),j.plural(v)]);};t.prototype.$MessengerGroupPollingAdminMessage2=function(){var u,v=(u=this.props.message)!=null?(u=u.log_message_data)!=null?(u=u.untypedData)!=null?u.question_id:u:u:u;if(!v){this.setState({options:[]});return;}var w=c('MessengerGroupPollingAllOptionsWebGraphQLQuery').getURI({node_id:v});new (c('AsyncRequest'))().setURI(w).setHandler(function(x){var y=x.payload.data.node,z=y.options.edges||[],aa=z.map(function(ba){return ba.node;});this.setState({options:aa});}.bind(this)).send();};t.prototype.$MessengerGroupPollingAdminMessage6=function(u,v){return v===0?'0%':u/v*100+'%';};t.propTypes={customColor:n.string,message:n.instanceOf(c('ImmutableObject')).isRequired,isLastOfType:n.bool.isRequired,onLoad:n.func};f.exports=t;}),null);
__d('MessengerPagesCommercePaymentEnabledAdminMessage.react',['cssVar','cx','fbt','ix','Image.react','Link.react','MessengerEnvironment','PagesCommerceBuyerNUXDialog.react','React'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;l=babelHelpers.inherits(n,c('React').PureComponent);m=l&&l.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=m.constructor).call.apply(o,[this].concat(r)),this.state={showDialog:false},this.$MessengerPagesCommercePaymentEnabledAdminMessage1=function(){this.setState({showDialog:false});}.bind(this),this.$MessengerPagesCommercePaymentEnabledAdminMessage2=function(){this.setState({showDialog:true});}.bind(this),p;}n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui;return c('React').createElement('div',{className:o?"_2piv":''},c('React').createElement(c('Image.react'),{className:"_3-96",src:k("275999")}),c('React').createElement('div',null,this.props.message.log_message_body),c('React').createElement('div',{className:"_3-8w"},c('React').createElement(c('Link.react'),{onClick:this.$MessengerPagesCommercePaymentEnabledAdminMessage2,style:{color:"#0084ff",textDecoration:'none'}},j._("Learn More"))),c('React').createElement(c('PagesCommerceBuyerNUXDialog.react'),{isShown:this.state.showDialog,onConfirm:this.$MessengerPagesCommercePaymentEnabledAdminMessage1}));};f.exports=n;}),null);
__d('MercuryXMATRenderer',['cx','fbt','MercuryConfig','MercuryIDs','MercuryParticipants','MessagingGenericAdminTextType','MessengerGameAdminMessage.react','MessengerGroupPollingAdminMessage.react','MessengerPagesCommercePaymentEnabledAdminMessage.react','MessengerTextWithEntities.react','MNAdsMessageUtils','React','FacepileRounded.react','idx','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={renderText:function k(l,m,n,o){var p,q=m.log_message_body?c('React').createElement(c('MessengerTextWithEntities.react'),{renderEmoji:true,renderEmoticons:true,text:m.log_message_body}):null,r=(p=m)!=null?(p=p.log_message_data)!=null?p.message_type:p:p;switch(r){case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_COLOR:q=i._("You need to be on the latest version of Messenger on a mobile device to pick a color for this conversation.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_NICKNAME:var s=null,t=c('MercuryIDs').getUserIDFromParticipantID(m.author);if(m.other_user_fbid&&t!==m.other_user_fbid){var u=c('MercuryIDs').getParticipantIDFromUserID(m.other_user_fbid);s=c('MercuryParticipants').getOrFetch(u);}if(s&&s.short_name){q=i._("You need to be on the latest version of Messenger on a mobile device to set a nickname for {admin-text-message} .",[i.param('admin-text-message',s.short_name)]);}else q=i._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case c('MessagingGenericAdminTextType').JOURNEY_PROMPT_LIKE:q=i._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:if(c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')())q=c('React').createElement(c('MessengerGameAdminMessage.react'),{message:m,text:m.log_message_body,isLastOfType:n,onLoad:o});break;case c('MessagingGenericAdminTextType').ADS_WELCOME_MSG:break;case c('MessagingGenericAdminTextType').AD_MANAGE_MESSAGE:if(c('MNAdsMessageUtils').isAdsAdminMessage(m))q=c('MNAdsMessageUtils').getAdsPageManage(m,false);break;case c('MessagingGenericAdminTextType').WORK_INVITE_CLAIMED:var v=m.log_message_data.untypedData.invite_recipient,w=m.log_message_data.untypedData.invite_sender,x=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(v)),y=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(w));if(y!=null&&x!=null){q=m.log_message_body?m.log_message_body:i._("You're now connected on Work Chat.");q=c('React').createElement(c('FacepileRounded.react'),{profiles:[x,y],message:q,numProfilesToDisplay:2,className:"_8lx"});}break;case c('MessagingGenericAdminTextType').CONFIRM_FRIEND_REQUEST:var z=m.log_message_data.untypedData;if(z){var aa=z.friend_request_recipient,ba=z.friend_request_sender,ca=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(aa)),da=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(ba));if(da!=null&&ca!=null)q=c('React').createElement(c('FacepileRounded.react'),{profiles:[ca,da],message:m.log_message_body,numProfilesToDisplay:2,className:"_8lx"});}break;case c('MessagingGenericAdminTextType').GROUP_POLL:q=c('React').createElement(c('MessengerGroupPollingAdminMessage.react'),{customColor:l,message:m,isLastOfType:n,onLoad:o});break;case c('MessagingGenericAdminTextType').PAGES_COMMERCE_PAYMENT_ENABLED:q=c('React').createElement(c('MessengerPagesCommercePaymentEnabledAdminMessage.react'),{message:m});break;default:break;}return c('React').createElement('span',null,q);}};f.exports=j;}),null);
__d('P2PBigAmount.react',['cx','ix','MessengerEnvironment','Image.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.getImage=function(){if(this.isMessengerDotCom()){if(this.props.isPending){if(this.props.size==='large'){return i("94389");}else return i("94388");}else if(this.props.size==='large'){return i("94393");}else return i("94387");}else if(this.props.isPending){if(this.props.size==='large'){return i("94392");}else return i("94391");}else if(this.props.size==='large'){return i("94390");}else return i("94394");}.bind(this),this.isMessengerDotCom=function(){return c('MessengerEnvironment').messengerui;},o;}m.prototype.render=function(){var n=this.props.size==='large'?'24':'16';return c('React').createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},c('React').createElement('div',{className:"_8j8"},c('React').createElement(c('Image.react'),{height:n,src:this.getImage(),width:n})),c('React').createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount));};m.propTypes={amount:l.string.isRequired,isPending:l.bool,size:l.oneOf(['medium','large'])};m.defaultProps={size:'medium'};f.exports=m;}),null);
__d('P2PGroupSendReceiptDialog.react',['cx','fbt','FacepileRounded.react','Image.react','Link.react','MessengerEnvironment','P2PAmountUtils','P2PBigAmount.react','P2PButton.react','P2PDialog.react','P2PDialogBody.react','P2PDialogFooter.react','P2PDialogTitle.react','P2PLinkConstants','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PPaymentRequestStatus','P2PText.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.handleClose=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED);this.props.onClose();}.bind(this),n;}l.prototype.componentDidMount=function(){this.log(c('P2PPaymentLoggerEvent').UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount});};l.prototype.getReceiverStatusMap=function(){var m;return this.props.individualRequests.reduce(function(n,o){switch(o.currentStatus){case c('P2PPaymentRequestStatus').EXPIRED:case c('P2PPaymentRequestStatus').DECLINED:case c('P2PPaymentRequestStatus').TRANSFER_COMPLETED:n[o.currentStatus].push(o);break;default:n[c('P2PPaymentRequestStatus').INITED].push(o);break;}return n;},(m={},m[c('P2PPaymentRequestStatus').DECLINED]=[],m[c('P2PPaymentRequestStatus').EXPIRED]=[],m[c('P2PPaymentRequestStatus').INITED]=[],m[c('P2PPaymentRequestStatus').TRANSFER_COMPLETED]=[],m));};l.prototype.getRequestProfile=function(m){var n=m.requestee||{};return {image_src:n.picture,name:n.full_name};};l.prototype.log=function(m,n){c('P2PLogger').log(m,babelHelpers['extends']({www_event_flow:this.props.eventFlow},n));};l.prototype.renderBody=function(){return c('React').createElement(c('P2PDialogBody.react'),null,c('React').createElement('ul',null,this.renderParticipantRow(this.props.sender,true),this.renderParticipantRow(this.props.receiver,false)),this.renderReceiverStatusList(),c('React').createElement('div',{className:"_bpy"},c('React').createElement(c('P2PBigAmount.react'),{amount:c('P2PAmountUtils').sanitizeAmount(this.props.amount),isPending:this.props.isGrayAmount,size:'large'})),c('React').createElement(c('P2PText.react'),{className:"_bpt",size:'small',type:'secondary'},this.props.bodyText,' ',c('React').createElement(c('Link.react'),{className:"_1ed3",href:c('P2PLinkConstants').helpCenterURI,target:'_blank'},i._("Learn More"))));};l.prototype.renderParticipantRow=function(m,n){if(!n&&this.props.individualRequests.length>1)return null;return c('React').createElement('li',{className:"_2chg",key:m.id},c('React').createElement('div',{className:"_2chh"},c('React').createElement(c('Link.react'),{href:m.profile_uri,onClick:this.props.onClose},c('React').createElement(c('Image.react'),{height:50,src:m.picture,width:50}))),c('React').createElement('div',{className:"_2chi"},c('React').createElement(c('P2PText.react'),{type:'primary'},c('React').createElement(c('P2PText.react'),{type:'secondary'},this.renderParticipantText(n)),m.full_name)));};l.prototype.renderParticipantText=function(m){if(m)return i._("From");return i._("To");};l.prototype.renderReceiverStatusList=function(){if(this.props.individualRequests.length<2)return null;var m=this.getReceiverStatusMap();return c('React').createElement('ul',null,this.renderStatus(m,c('P2PPaymentRequestStatus').TRANSFER_COMPLETED),this.renderStatus(m,c('P2PPaymentRequestStatus').DECLINED),this.renderStatus(m,c('P2PPaymentRequestStatus').INITED),this.renderStatus(m,c('P2PPaymentRequestStatus').EXPIRED));};l.prototype.renderStatus=function(m,n){var o=m[n].map(this.getRequestProfile);if(o.length===0)return null;return c('React').createElement('li',{className:"_5-av",key:n},c('React').createElement(c('P2PText.react'),{className:"_2chi _2pir",type:'secondary'},this.renderStatusText(n)),c('React').createElement(c('FacepileRounded.react'),{className:"_3-8w",imageSize:40,numProfilesToDisplay:9,profiles:o,showNames:true}));};l.prototype.renderStatusText=function(m){switch(m){case c('P2PPaymentRequestStatus').DECLINED:return i._("Declined");case c('P2PPaymentRequestStatus').EXPIRED:return i._("Expired");case c('P2PPaymentRequestStatus').TRANSFER_COMPLETED:return i._("Paid");case c('P2PPaymentRequestStatus').INITED:default:return i._("Pending");}};l.prototype.render=function(){var m=c('MessengerEnvironment').messengerui,n=m?380:360,o=this.props.title;return c('React').createElement(c('P2PDialog.react'),{className:m?"_bpv":'',layerHideOnBlur:false,onToggle:this.props.onClose,width:n},c('React').createElement(c('P2PDialogTitle.react'),null,o),this.renderBody(),c('React').createElement(c('P2PDialogFooter.react'),null,c('React').createElement(c('P2PButton.react'),{label:i._("OK"),onClick:this.handleClose,type:'primary'})));};l.defaultProps={bodyText:i._("You can send money to friends in groups."),eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_SEND,individualRequests:[],isGrayAmount:false,title:i._("Payment Details")};f.exports=l;}),null);
__d('P2PGroupPaymentRequestReceiptDialog.react',['fbt','P2PActions','P2PGroupSendReceiptDialog.react','P2PPaymentLoggerEventFlow','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,bodyText:h._("You can send payment requests to friends in groups"),eventFlow:c('P2PPaymentLoggerEventFlow').UI_FLOW_P2P_GROUP_REQUEST,individualRequests:this.props.individualRequests,isGrayAmount:true,receiver:this.props.requestee,sender:this.props.requester,title:h._("Payment Request Details"),onClose:this.props.onClose||c('P2PActions').hideDialog});};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d("XP2PPaymentRequestReceiptController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/payment_request\/",{id:{type:"String",required:true}});}),null);
__d("XP2PTransactionDetailController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});}),null);
__d('P2PMercuryLogMessage.react',['cx','fbt','MessengerEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupPaymentRequestReceiptDialog.react','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin_DEPRECATED','XP2PPaymentRequestReceiptController','XP2PTransactionDetailController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'P2PMercuryLogMessage',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],propTypes:{amount:j.string,receiver:j.object.isRequired,sender:j.object.isRequired,subtype:j.oneOf(Object.keys(c('P2PPaymentLogMessageSubtype')).map(function(l){return c('P2PPaymentLogMessageSubtype')[l];})),transferID:j.string.isRequired,threadFBID:j.string,threadID:j.string},getDefaultProps:function l(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function l(){return {groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function l(){this.setState({groupSendReceiptDetailsShown:true});},handleGroupPaymentRequestDetailsLinkClicked:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function l(){this.setState({groupPaymentRequestReceiptDetailsShown:false,groupSendReceiptDetailsShown:false});},isViewerSender:function l(){var m=this.props.sender.id;return m&&c('MercuryIDs').getUserIDFromParticipantID(m)===c('CurrentUser').getID();},isViewerReceiver:function l(){var m=this.props.receiver.id;return m&&c('MercuryIDs').getUserIDFromParticipantID(m)===c('CurrentUser').getID();},renderPaymentRequestDetailsLink:function l(){var m=c('XP2PPaymentRequestReceiptController').getURIBuilder().setString('id',this.props.transferID).getURI();return c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details"));},renderTransferDetailsLink:function l(){var m=c('XP2PTransactionDetailController').getURIBuilder().setString('id',this.props.transferID).getURI();return c('React').createElement(c('Link.react'),{className:"_kiq",href:m,target:'_blank'},i._("See details"));},renderGroupDetailsLink:function l(){return c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},i._("See details"));},renderGroupPaymentRequestDetailsLink:function l(){return c('React').createElement(c('Link.react'),{className:"_kiq",href:'#',onClick:this.handleGroupPaymentRequestDetailsLinkClicked},i._("See details"));},renderLayers:function l(){var m={},n={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},o={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};if(this.state.groupSendReceiptDetailsShown){m.groupSendReceiptDetailsDialog=c('React').createElement(c('P2PGroupSendReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:n,sender:o});}else if(this.state.groupPaymentRequestReceiptDetailsShown)m.groupPaymentRequestReceiptDetailsDialog=c('React').createElement(c('P2PGroupPaymentRequestReceiptDialog.react'),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:n,requester:o});return m;},render:function l(){var m=null,n=this.props.amount,o=this.props.subtype,p=this.isViewerSender(),q=this.isViewerReceiver(),r=void 0;if(!p&&!q){r=this.renderGroupDetailsLink();}else r=this.renderTransferDetailsLink();switch(o){case c('P2PPaymentLogMessageSubtype').SENT_IN_GROUP:m=i._("{sendername} sent {amount} to {receivername}. {details}",[i.param('sendername',this.props.sender.name),i.param('amount',n),i.param('receivername',this.props.receiver.name),i.param('details',r)]);break;case c('P2PPaymentLogMessageSubtype').CANCELED_EXPIRED:case c('P2PPaymentLogMessageSubtype').CANCELED_SAME_CARD:case c('P2PPaymentLogMessageSubtype').CANCELED_SENDER_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_RECIPIENT_RISK:case c('P2PPaymentLogMessageSubtype').CANCELED_CUSTOMER_SERVICE:if(p){m=i._("Your {amount} payment was canceled. {details}",[i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("{name}'s {amount} payment was canceled. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{sender_name}'s {amount} payment to {receiver_name} was canceled. {details}",[i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('receiver_name',this.props.receiver.name),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').CANCELED_DECLINED:if(p){m=i._("{name} didn't accept your {amount} payment. {details}",[i.param('name',this.props.receiver.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else if(q){m=i._("You didn't accept {name}'s {amount} payment. {details}",[i.param('name',this.props.sender.name),i.param('amount',n),i.param('details',this.renderTransferDetailsLink())]);}else m=i._("{receiver_name} didn't accept {sender_name}'s {amount} payment. {details}",[i.param('receiver_name',this.props.receiver.name),i.param('sender_name',this.props.sender.name),i.param('amount',n),i.param('details',r)]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_CANCELED_BY_REQUESTER:if(p){m=i._("You canceled your request for {payment request amount}. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name} canceled their request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name} canceled their request for {payment request amount} from {receiver's name}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('receiver\'s name',this.props.receiver.name),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_DECLINED_BY_REQUESTEE:if(p){m=i._("{receiver's name} declined your request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("You declined {sender's name}'s request for {payment request amount}. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[i.param('receiver\'s name',this.props.receiver.name),i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;case c('P2PPaymentLogMessageSubtype').REQUEST_EXPIRED:if(p){m=i._("Your request for {payment request amount} expired so it was canceled. {details}",[i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else if(q){m=i._("{sender's name}'s request for {payment request amount} expired so it was canceled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('payment request amount',n),i.param('details',this.renderPaymentRequestDetailsLink())]);}else m=i._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was canceled. {details}",[i.param('sender\'s name',this.props.sender.name),i.param('receiver\'s name',this.props.receiver.name),i.param('payment request amount',n),i.param('details',this.renderGroupPaymentRequestDetailsLink())]);m=c('React').createElement('span',{className:"_5rdx"},m);break;}return c('React').createElement('div',{className:c('MessengerEnvironment').messengerui?"_5rdy":''},m);}});f.exports=k;}),null);
__d('MessengerLogMessageBody.react',['fbt','immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','MessengerAdminGroupUtils','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','MessengerTextWithEmoticons.react'],(function a(b,c,d,e,f,g,h){var i='source:messenger_growth:event_upcoming_bump',j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{thread:j.instanceOf(c('ImmutableObject')),message:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired},statics:{calculateState:function l(m){var n=[],o=m.message,p=o.log_message_data,q=o.log_message_type;switch(q){case c('MercuryLogMessageType').SUBSCRIBE:n=p.added_participants;break;case c('MercuryLogMessageType').UNSUBSCRIBE:n=p.removed_participants;break;case c('MercuryLogMessageType').ORION:n.push(p.senderId,p.receiverId);break;}if(!n||!n.length)return {};var r=c('immutable').Map().withMutations(function(s){n.forEach(function(t){s.set(t,c('MercuryParticipants').getOrFetch(t)||{});});});return {extraParticipants:r};}},render:function l(){var m=this.props.message.log_message_type;this._viewer=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&m!==c('MercuryLogMessageType').ORION)return null;var n=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread),o=c('MessengerAdminGroupUtils').isGroupChat(this.props.thread);switch(m){case c('MercuryLogMessageType').SUBSCRIBE:return c('React').createElement('span',null,this._renderSubscribeMessage(this.props.message));case c('MercuryLogMessageType').UNSUBSCRIBE:if(n)return c('React').createElement('span',null,o?this._renderUnsubscribeMessageForGroupChat(this.props.message):this._renderUnsubscribeMessageForRoom(this.props.message));return c('React').createElement('span',null,this._renderUnsubscribeMessage(this.props.message));case c('MercuryLogMessageType').THREAD_NAME:if(n)return c('React').createElement('span',null,o?this._renderThreadNameMessageForGroupChat():this._renderThreadNameMessageForRoom());return c('React').createElement('span',null,this._renderThreadNameMessage());case c('MercuryLogMessageType').THREAD_IMAGE:if(n)return c('React').createElement('span',null,o?this._renderThreadImageMessageForGroupChat():this._renderThreadImageMessageForRoom());return c('React').createElement('span',null,this._renderThreadImageMessage());case c('MercuryLogMessageType').ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function l(m){var n=m.log_message_data,o=n.senderId,p=n.receiverId,q=this.state.extraParticipants,r=q.get(o),s=q.get(p);return c('React').createElement(c('P2PMercuryLogMessage.react'),{amount:n.formattedAmount,receiver:s,sender:r,subtype:n.subtype,threadFBID:m.thread_fbid,threadID:m.thread_id,transferID:n.transfer_id});},_renderSubscribeMessage:function l(m){var n=this._moveCurrentUserToFront(m.log_message_data.added_participants),o=this.state.extraParticipants;switch(n.length){case 1:return h._("You added {subscriber1}.",[h.param('subscriber1',o.get(n[0]).name)]);case 2:return h._("You added {subscriber1} and {subscriber2}.",[h.param('subscriber1',o.get(n[0]).name),h.param('subscriber2',o.get(n[1]).name)]);case 3:return h._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[h.param('subscriber1',o.get(n[0]).name),h.param('subscriber2',o.get(n[1]).name),h.param('subscriber3',o.get(n[2]).name)]);default:var p=n.map(function(q){return o.get(q);});return h._("You added {subscriber1}, {subscriber2} and {num} other people.",[h.param('subscriber1',p[0].name),h.param('subscriber2',p[1].name),h.param('num',p.slice(2).length)]);}},_renderUnsubscribeMessage:function l(m){var n=this.state.extraParticipants,o=m.log_message_data.removed_participants[0],p=n.get(o);if(!o||o===m.author){return h._("You left the conversation.");}else return h._("You removed {name} from the conversation.",[h.param('name',p.name)]);},_renderUnsubscribeMessageForRoom:function l(m){var n=this.state.extraParticipants,o=m.log_message_data.removed_participants[0],p=n.get(o);if(!o||o===m.author){return h._("You left the room.");}else return h._("You removed {name} from the room.",[h.param('name',p.name)]);},_renderUnsubscribeMessageForGroupChat:function l(m){var n=this.state.extraParticipants,o=m.log_message_data&&m.log_message_data.removed_participants&&m.log_message_data.removed_participants[0],p=o&&n.get(o);if(!o||o===m.author){return h._("You left the chat.");}else return h._("You removed {name} from the chat.",[h.param('name',p&&p.name)]);},_renderThreadNameMessage:function l(){var m=this.props.message.log_message_data;if(!m.name)return h._("You removed the group name.");return h._("You named the group {the new name of the group}.",[h.param('the new name of the group',m.name)]);},_renderThreadNameMessageForRoom:function l(){var m=this.props.message.log_message_data;if(!m.name)return h._("You removed the room name.");return h._("You named the room {the new name of the group}.",[h.param('the new name of the group',m.name)]);},_renderThreadNameMessageForGroupChat:function l(){var m=this.props.message.log_message_data;if(!m.name)return h._("You removed the chat name.");return h._("You named the chat {the new name of the group}.",[h.param('the new name of the group',m.name)]);},_renderThreadImageMessage:function l(){if(this.props.message.tags!==undefined&&this.props.message.tags.indexOf(i)!==-1)return h._("The group photo has been changed.");return h._("You changed the group photo.");},_renderThreadImageMessageForRoom:function l(){return h._("You changed the room photo.");},_renderThreadImageMessageForGroupChat:function l(){return h._("You changed the chat photo.");},_moveCurrentUserToFront:function l(m){var n=this._viewer,o=m.indexOf(n);if(o>0){var p=m.filter(function(q){return q!==n;});return [n].concat(p);}return m;}});f.exports=k;}),null);
__d('MessengerLogMessage.react',['cx','ix','Image.react','ImmutableObject','MercuryLogMessageType','MercuryLWARenderer','MercuryMessageInfo','MercuryXMATRenderer','MessagingGenericAdminTextType','MessengerLightweightActionUtils','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','convertMIGColorToFIGColor','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=i("86913");j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){return c('React').createElement('div',{className:this.$MessengerLogMessage1()},this.$MessengerLogMessage2(),c('React').createElement('i',{className:"_uwa"}),c('React').createElement('span',{className:"_3oh-"},this.$MessengerLogMessage3()));};n.prototype.$MessengerLogMessage3=function(){var o=c('convertMIGColorToFIGColor')(this.props.thread&&this.props.thread.custom_color),p=void 0;if(c('MessengerLightweightActionUtils').isLWAMessage(this.props.message))return c('MercuryLWARenderer').renderCollapsedText(this.props.message);if(this.props.message.log_message_type!==c('MercuryLogMessageType').ORION)p=c('MercuryXMATRenderer').renderText(o,this.props.message,this.props.isLastOfType,this.props.onImageLoad);return this.$MessengerLogMessage4()||p||c('React').createElement(c('MessengerLogMessageBody.react'),{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread});};n.prototype.$MessengerLogMessage4=function(){var o=this.props.message;if(c('MNCommerceLogMessageUtils').isCommercePageAdminMessage(o))return c('MNCommerceLogMessageUtils').getCommercePageManage(o,true);return null;};n.prototype.$MessengerLogMessage2=function(){if(!c('MercuryMessageInfo').hasError(this.props.message))return null;return c('React').createElement(c('Image.react'),{className:"_41-9",src:m});};n.prototype.$MessengerLogMessage1=function(){var o=void 0,p=this.props.message,q=p.log_message_type===c('MercuryLogMessageType').UNSUBSCRIBE&&p.log_message_data.removed_participants.indexOf(p.author)!==-1,r=this.props.viewer;switch(p.log_message_type){case c('MercuryLogMessageType').SUBSCRIBE:o="_uwb";break;case c('MercuryLogMessageType').UNSUBSCRIBE:o=q?"_uwc":"_uwe";break;case c('MercuryLogMessageType').PHONE_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwf":"_uwg";break;case c('MercuryLogMessageType').VIDEO_CALL:o=p.log_message_data.caller.indexOf(r)!==-1?"_uwh":"_uwi";break;case c('MercuryLogMessageType').THREAD_NAME:o="_uwj";break;case c('MercuryLogMessageType').THREAD_IMAGE:o="_uwk";break;case c('MercuryLogMessageType').SERVER_ERROR:o="_uwl";break;case c('MercuryLogMessageType').LIVE_LISTEN:o="_uwm";break;case c('MercuryLogMessageType').WALLPAPER:o="_uwn";break;case c('MercuryLogMessageType').ORION:o="_uwo";break;case c('MercuryLogMessageType').SWITCH_TO_WORK:o="_uwp";break;case c('MercuryLogMessageType').PAGE_REPLY:o="_uwq";break;}return c('joinClasses')("_497p"+((p.log_message_type===c('MercuryLogMessageType').PHONE_CALL||p.log_message_type===c('MercuryLogMessageType').VIDEO_CALL)&&!p.log_message_data.answered?' '+"_3no3":'')+(p.log_message_data&&p.log_message_data.message_type===c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE?' '+"_11es":''),o);};function n(){j.apply(this,arguments);}n.propTypes={message:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,isLastOfType:l.bool.isRequired,onImageLoad:l.func};f.exports=n;}),null);
__d('MessengerMessageActionsWrapper.react',['ImmutableObject','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MessengerMessageActionsWrapper',propTypes:{message:h.instanceOf(c('ImmutableObject')).isRequired,onShowMenu:h.func.isRequired},render:function j(){return c('React').createElement('div',babelHelpers['extends']({onMouseEnter:this._handleShowMenu,onMouseLeave:this._handleHideMenu},this.props),this.props.children);},_handleShowMenu:function j(){this.props.onShowMenu(this.props.message.message_id,true);},_handleHideMenu:function j(){this.props.onShowMenu(this.props.message.message_id,false);}});f.exports=i;}),null);
__d("messengerMessageSeenHeadsReact",["cx","fbt","cssVar","React","immutable","imageReact","bs_pervasives","reasonReact","joinClasses","bs_js_primitive","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c("MessengerConfig").MaxSeenHeadCount;function l(){var p=c("getViewportDimensions")().width;if(p<parseInt("920px".replace("px",""),10)){return c("bs_pervasives").min(k,8);}else if(p<parseInt("1211px".replace("px",""),10)){return c("bs_pervasives").min(k,3);}else return k;}var m=c("reasonReact").statefulComponent("MessengerMessageSeenHeadsReact");function n(p,q,r,s,t,u,v){var w=m.slice();w[9]=function(x,y){if(c("MercuryMessageInfo").isSending(r)||u.isEmpty()||c("MercuryMessageInfo").hasError(r)){return null;}else{var z=c("immutable").Seq(u).filter(function(ha){var ia=+(ha.watermark>=r.timestamp&&ha.watermark<s);if(ia!==0){return true;}else return false;}).sort(function(ha,ia){return ha.action-ia.action|0;});if(z.isEmpty()){return null;}else{var aa=q!==0?k:l(0),ba=+(z.count()>(aa+1|0)),ca=ba!==0?z.slice(0,aa):z,da=ca.map(function(ha,ia,ja){var ka=t.get(ia);if(c("bs_js_primitive").is_nil_undef(ka)){return null;}else{var la=i._("Seen by {full name} at {seen time}",[i.param("full name",ka.name),i.param("seen time",c("MercuryTimestamp").getPreciseTimestamp(ha.action))]);return c("reasonReact").element([c("bs_pervasives").string_of_int(ia)],0,c("imageReact").make(["_jf2"],[la],[ka.image_src],0,[la],0,0,[]));}}).toArray(),ea=da.length;if(ea){var fa=ba!==0?z.slice(aa,undefined).count():0;if(fa>0){var ga=z.slice(aa,undefined).map(function(ha,ia,ja){var ka=t.get(ia);if(c("bs_js_primitive").is_nil_undef(ka)){return "";}else return ka.name;}).filter(function(ha){var ia=+(ha==="");if(ia!==0){return false;}else return true;}).join("\n")+" ";da.unshift(c("React").createElement("span",{key:"overflow",className:"_jf3",title:ga},"+"+c("bs_pervasives").string_of_int(fa)));}return c("React").createElement("span",{className:c("joinClasses")(p,"_jf4"+(+((ea+fa|0)===1)?" "+"_jf5":"")+(+c("MercuryAttachment").isSinglePhotoGroupAttachment(r)?" "+"_ba3":""))},da);}else return null;}}};return w;}var o=c("reasonReact").wrapReasonForJs(m,function(p){return n(p.className,+p.isFromViewer,p.message,p.nextTimestamp,p.participants,p.readReceipts,[]);});g.maxSeenHeads=k;g.calculateSliceNumber=l;g.component=m;g.make=n;g.comp=o;}),null);
__d('messengerRTLClasses',['cx','isRTL'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){var l=c('isRTL')(j||'');return k?l?"_4pv0":'':(!l?"direction_ltr":'')+(l?' '+"direction_rtl":'')+(!l?' '+"text_align_ltr":'')+(l?' '+"text_align_rtl":'')+(l?' '+"_4pv0":'');}f.exports=i;}),null);
__d("messengerURIUtilsRe",["URI","MercuryIDs","MessengerView","MessengerURISerializer"],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c("MessengerURISerializer").deserialize(new (c("URI"))(window.location.href)),m=c("MessengerView").DETAIL.THREAD,n=+l.queryAll;return c("MessengerURISerializer").serialize(Object.assign(Object.assign({},l),{activeThreadID:k,detailView:m,query:n!==0?l.query:undefined}));}function i(k){return h(c("MercuryIDs").getThreadIDFromUserID(k));}function j(k){return new (c("URI"))("/m/"+k);}g.getURIForThreadID=h;g.getURIForUserID=i;g.getURIForMessageID=j;}),null);
__d('MessengerMessage.react',['cssVar','cx','fbt','EmojiLikeUtils','MercuryDisplayTimeFilterMessageRenderer','FluxContainer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageError.react','MercuryMessageInfo','MercuryTimestamp','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerDecorator','MessengerInnerDecorators.react','MessengerMessageActionsWrapper.react','messengerMessageSeenHeadsReact','messengerURIUtilsRe','MessengerVideoAutoplayStore','MNCommerceMessageType','React','TooltipData','emptyFunction','getViewportDimensions','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerMessageSeenHeadsReact').comp,n=c('React').PropTypes;function o(r){switch(r){case c('MercuryMessageDeliveryState').SENDING:return j._("Sending");case c('MercuryMessageDeliveryState').SENT:return j._("Sent");case c('MercuryMessageDeliveryState').DELIVERED:return j._("Delivered");case c('MercuryMessageDeliveryState').ERROR:return j._("Error");}return null;}k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=l.constructor).call.apply(r,[this].concat(u)),this.state={isVisible:false,shown:{}},this.$MessengerMessage12=function(w){w.stopPropagation();this.props.onSelect(this.props.message.message_id);}.bind(this),this.$MessengerMessage4=function(w,x){var y;this.setState({shown:babelHelpers['extends']({},this.state.shown,(y={},y[w]=x,y))});}.bind(this),this.$MessengerMessage10=function(){this.props.onSelect(this.props.message.message_id);}.bind(this),s;}p.getStores=function(){return [c('MessengerVideoAutoplayStore')];};p.calculateState=function(r,s){return {isVisible:c('MessengerVideoAutoplayStore').isVisible(s.message.thread_id,s.message.message_id)};};p.prototype.shouldComponentUpdate=function(r,s){return r.isActive!==this.props.isActive||r.isFromViewer!==this.props.isFromViewer||r.message!==this.props.message||r.nextTimestamp!==this.props.nextTimestamp||r.showDeliveryState!==this.props.showDeliveryState||r.deliveryTimestamp!==this.props.deliveryTimestamp||!c('immutable').is(r.readReceipts,this.props.readReceipts)||!c('immutable').is(r.participants,this.props.participants)||r.customColor!==this.props.customColor||s.isVisible!==this.state.isVisible;};p.prototype.render=function(){var r=this.props,s=r.isActive,t=r.isFromViewer,u=r.isPageMessage,v=r.message,w=j._("{time}",[j.param('time',c('MercuryTimestamp').getPreciseTimestamp(v.timestamp))]),x=c('MessengerConfig').SentTimestampEnabled?c('TooltipData').propsFor(w,q(t)):null,y=[],z=[],aa=this.props.message,ba=t||false;if(aa&&!this.props.hideBeforeDecorator){c('MessengerDecorator').getBeforeDecorators().forEach(function(fa){if(fa.check(aa))y.push(fa.render(aa,ba));});c('MessengerDecorator').getInnerDecorators().forEach(function(fa){if(fa.check(aa))z.push(fa.getAdditionalClassNames());});}var ca=this.$MessengerMessage1(x,false),da=this.$MessengerMessage2(x,c('MercuryConfig').WWWMessengerAttachmentMessageGK?ca:null);if(da)ca=this.$MessengerMessage1(x,true);var ea=!!da&&this.$MessengerMessage3();return c('React').createElement(c('MessengerMessageActionsWrapper.react'),{className:c('joinClasses').apply(undefined,["clearfix"+(' '+"_o46")+(' '+"_3erg")+(s?' '+"_-5k":'')+(t?' '+"_3i_m":'')+(t?' '+"_nd_":'')+(!t?' '+"_29_7":'')+(v.isSelected?' '+"_3xsz":'')+(ea?' '+"_q4a":''),c('messengerRTLClasses')(v.body)].concat(z)),message:v,onShowMenu:this.$MessengerMessage4},y,c('MercuryConfig').WWWMessengerAttachmentMessageGK&&da?null:ca,da||u?null:c('React').createElement(c('MessengerInnerDecorators.react'),{message:aa,isFromViewer:t,hovered:this.state.shown[aa.message_id],messageProps:this.props}),da,this.$MessengerMessage5(aa,ba),this.$MessengerMessage6(),this.$MessengerMessage7(),c('React').createElement(m,{className:"_4jzq",isFromViewer:t,message:v,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts}));};p.prototype.$MessengerMessage5=function(r,s){var t,u=this;if(r&&!this.props.hideAfterExternalDecorator){var t=function(){var v=[],w=[];c('MessengerDecorator').getAfterExternalDecorators().forEach(function(y){if(r&&y.check(r)){v.push(y.render(r,s,this.props));w.push(y.getAdditionalClassNames());}},u);var x=w.join(' ');if(v.length===0)return {v:null};return {v:c('React').createElement('span',{className:c('joinClasses')(x,"_31gm"+(!s?' '+"isFromOther":''))},v)};}();if(typeof t==="object")return t.v;}return null;};p.prototype.$MessengerMessage8=function(r){return r.every(function(s){return !s||!c('MessengerAttachmentRenderer').isRenderedShareAttachment(s);});};p.prototype.$MessengerMessage9=function(){return this.props.message.attachments.length===1&&c('MercuryAttachment').hasAttribution(this.props.message.attachments[0]);};p.prototype.$MessengerMessage2=function(r,s){if(this.props.message.is_filtered_content)return null;if(this.props.message.commerce_message_type===c('MNCommerceMessageType').RIDE_INTENT)return null;var t=[],u=[],v=this.props.message,w=this.props.isFromViewer||false;if(v)c('MessengerDecorator').getAfterDecorators().forEach(function(ba){if(ba.check(v,w)){t.push(ba.render(v,w,this.props));u.push(ba.getAdditionalClassNames());}}.bind(this));var x=c('MessengerAttachmentRenderer').getAttachmentsOutsideBubble(this.props.message,this.props.onAttachmentLoad,{customColor:this.props.customColor,isPageMessage:this.props.isPageMessage,isVisible:this.state.isVisible,messageBubble:s,onSelect:this.$MessengerMessage10,onUnwrap:null,pageID:this.props.pageID},t);if(!x||!x.length)return null;if(r){var y=x.some(function(ba){return !!ba&&c('MessengerAttachmentRenderer').isPhotosGroupAttachment(ba);});if(this.$MessengerMessage9())x=[c('React').createElement('span',{key:'AttachmentWithAttribution'},x[0],c('React').createElement(c('MessengerAttachmentAttribution.react'),{attachment:new (c('ImmutableObject'))(this.props.message.attachments[0])}))];x=this.$MessengerMessage8(x)?c('React').createElement('div',babelHelpers['extends']({},r,{className:c('joinClasses').apply(undefined,["_3zvs"+(y?' '+"_2-x3":'')].concat(u))}),x,t):x.map(function(ba){return ba&&c('React').cloneElement(ba,r);});}var z=c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(this.props.message),aa=c('React').createElement('div',{key:'renderedAttachments',className:"_3058"+(' '+"_15gf")+(z?' '+"_3duc":'')},x,this.props.isPageMessage?null:c('React').createElement(c('MessengerInnerDecorators.react'),{message:this.props.message,isFromViewer:this.props.isFromViewer||false,hovered:this.state.shown[this.props.message.message_id],messageProps:this.props}));if(this.$MessengerMessage9())return c('React').createElement(c('MessengerBubbleBlock.react'),null,aa);return aa;};p.prototype.$MessengerMessage11=function(){return c('MessengerAttachmentRenderer').isP2PAttachment(this.props.message);};p.prototype.$MessengerMessage1=function(r,s){var t=this.props.message,u=c('immutable').List(c('MessengerAttachmentRenderer').getAttachmentsInsideBubble(t,this.props.onAttachmentLoad)),v=t.ranges;if(t.profile_ranges&&t.profile_ranges.length)v=(v||[]).concat(t.profile_ranges.map(function(x){return babelHelpers['extends']({},x,{url:c('messengerURIUtilsRe').getURIForUserID(x.id)});}));if(c('MessengerCodePasteUtils').containsCodeBlock(t.body))return c('React').createElement(c('MessengerCodeBubble.react'),{attachments:u,body:t.body,customColor:this.props.isFromViewer?this.props.customColor:'',className:(this.props.isFromViewer?"_3uhm":'')+(!this.props.isFromViewer?' '+"_3uhn":''),ranges:v||[],threadID:t.thread_id||''});if(t.is_filtered_content)return c('React').createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},c('MercuryDisplayTimeFilterMessageRenderer').renderFilteredContent(t));var w=t.body&&!c('EmojiLikeUtils').isEmojiLike(t);if(w||!u.isEmpty())return c('React').createElement(c('MessengerBubble.react'),babelHelpers['extends']({attachments:u,body:t.body,className:"_3058"+(' '+"_ui9"),customColor:this.props.isFromViewer?this.props.customColor:'',customLike:t.customLike,excludeAfterDecorators:s,isFromViewer:this.props.isFromViewer,isP2PAttachment:this.$MessengerMessage11(),ranges:v,message:t,metaRanges:t.meta_ranges,threadCustomColor:this.props.threadCustomColor||"#0084ff",threadID:t.thread_id,participants:this.props.participants},r||{}));return null;};p.prototype.$MessengerMessage7=function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var r=c('MercuryMessageInfo').getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(r===c('MercuryMessageDeliveryState').UNKNOWN)return null;var s={};if(this.props.customColor&&(r===c('MercuryMessageDeliveryState').SENT||r===c('MercuryMessageDeliveryState').SENDING||r===c('MercuryMessageDeliveryState').DELIVERED))s.color=this.props.customColor;return c('React').createElement('span',{className:"_2her"+(r===c('MercuryMessageDeliveryState').SENDING?' '+"_4jzp":'')+(r===c('MercuryMessageDeliveryState').SENT?' '+"_3zzf":'')+(r===c('MercuryMessageDeliveryState').DELIVERED?' '+"_9ah":'')+(r===c('MercuryMessageDeliveryState').ERROR?' '+"_5ei9":''),onClick:this.$MessengerMessage12,role:'checkbox',style:s,tabIndex:'0',title:o(r)},c('React').createElement('i',{className:"_57e_"}));};p.prototype.$MessengerMessage6=function(){var r=this.props.message;if(!c('MercuryMessageInfo').hasError(r))return null;return c('React').createElement(c('MercuryMessageError.react'),{className:"_3058 _2ygi",message:r,authorFBID:this.props.authorFBID});};p.prototype.$MessengerMessage3=function(){var r=this.props.message,s=false;if(r)s=!!(r.reactions&&Object.keys(r.reactions).length>0);return s;};p.propTypes={customColor:n.string,deliveryTimestamp:n.number.isRequired,hideAfterExternalDecorator:n.bool,hideBeforeDecorator:n.bool,isActive:n.bool,isFromViewer:n.bool,isPageMessage:n.bool,message:n.instanceOf(c('ImmutableObject')).isRequired,nextTimestamp:n.number.isRequired,onAttachmentLoad:n.func.isRequired,onDeselect:n.func.isRequired,onSelect:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,readReceipts:n.instanceOf(c('immutable').OrderedMap).isRequired,showDeliveryState:n.bool,authorFBID:n.string,threadCustomColor:n.string,pageID:n.string};p.defaultProps={onAttachmentLoad:c('emptyFunction'),threadCustomColor:"#0084ff"};function q(r){if(c('getViewportDimensions')().width<=parseInt("700px".replace('px',''),10))return 'above';return r?'right':'left';}f.exports=c('FluxContainer').create(p,{withProps:true});}),null);
__d('MessengerPageAdminNoteList.react',['cx','fbt','LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','immutable','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactComponentWithPureRenderMixin'))));k=j&&j.prototype;m.prototype.render=function(){var n=[],o=this.calculateGroups(this.props.notes);o.forEach(function(p,q){n.push(c('React').createElement('li',{className:"_4kd2",key:'group:'+q},this.$MessengerPageAdminNoteList1(p)));}.bind(this));return c('React').createElement('ul',{className:"_4kd3"},n);};m.prototype.$MessengerPageAdminNoteList1=function(n){var o=[];n.forEach(function(p,q){o.push(c('React').createElement('div',{className:"_4kd4",key:'note:'+q},this.$MessengerPageAdminNoteList2(p,n)));}.bind(this));return o;};m.prototype.$MessengerPageAdminNoteList2=function(n,o){var p=c('immutable').List([c('React').createElement(c('LeftRight.react'),{className:"_561k"},c('React').createElement('div',{className:"_561l"},i._("Private Note")),c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info',creator_info:o[0].creator_info,isNote:true}))]);return c('React').createElement('div',{className:"_o46 _3i_m _nd_"},c('React').createElement('div',{className:'clearfix'},c('React').createElement(c('MessengerBubble.react'),{body:n.body.text,attachments:p,className:"_3058 _4kd5"})));};m.prototype.calculateGroups=function(n){var o=[],p=null,q=null,r=c('enumerate')(n),s=void 0;while(!(s=r.next()).done){var t=q&&q.value.creator_info.creatorID===s.value.creator_info.creatorID;if(!t){p=[];o.push(p);}if(p)p.push(s.value);q=s;}return o;};function m(){j.apply(this,arguments);}m.propTypes={notes:l.arrayOf(l.shape({id:l.string,body:l.object.isRequired,creator_info:l.shape({creatorID:l.string.isRequired,creatorName:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}),timestamp:l.number.isRequired})).isRequired};f.exports=m;}),null);
__d('MessengerMessageGroup.react',['cx','fbt','immutable','ImmutableObject','Image.react','Link.react','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantSilhouettes','MercuryTimestamp','MessengerActions','MessengerConfig','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','MessengerTextWithEmoticons.react','messengerURIUtilsRe','PagesMessengerCreatorInfo.react','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('immutable').List,k=c('immutable').OrderedMap,l=c('React').PropTypes,m=32,n=new (c('ImmutableObject'))({image_src:c('MercuryParticipantSilhouettes').neutralSilhouette,is_messenger_user:true,name:''}),o=c('React').createClass({displayName:'MessengerMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:l.string,deliveryTimestamp:l.number.isRequired,hasDateBreak:l.bool,isCanonical:l.bool,isFromViewer:l.bool,isPageMessage:l.bool,lastReadTimestamp:l.number.isRequired,messages:l.instanceOf(j).isRequired,nextTimestamp:l.number.isRequired,onAttachmentLoad:l.func,onMessageDeselect:l.func.isRequired,onMessageSelect:l.func.isRequired,readReceipts:l.instanceOf(k).isRequired,thread:l.object,pageCustomAction:l.func,pageID:l.string},statics:{calculateState:function r(s){return {participants:p(s)};}},shouldComponentUpdate:function r(s,t){return this.props.activeMessageID!==s.activeMessageID||this.props.isFromViewer!==s.isFromViewer||this.props.deliveryTimestamp!==s.deliveryTimestamp||this.props.lastReadTimestamp!==s.lastReadTimestamp||!c('immutable').is(this.props.messages,s.messages)||!c('immutable').is(this.props.readReceipts,s.readReceipts)||!c('immutable').is(this.state.participants,t.participants)||!!(s.thread&&this.props.thread&&this.props.thread!==s.thread);},render:function r(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_1t_p"+(' '+"clearfix")+(c('MessengerStickerUtils').isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null);},_renderProfileColumn:function r(){if(this.props.isFromViewer)return null;var s=this.props.messages.last(),t=this.state.participants.get(s.author)||n,u=i._("{name} {time}",[i.param('name',t.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(s.timestamp))]),v=c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:t.is_messenger_user,size:m,showBadge:true,tooltipContent:u},c('React').createElement(c('Image.react'),{alt:t.name,src:t.image_src,height:m,width:m}));if(!this.props.isCanonical&&t.fbid){var w=c('messengerURIUtilsRe').getURIForUserID(t.fbid);v=c('React').createElement(c('Link.react'),{className:"_5f0v",href:w.toString(),onClick:this._handleContactSelect.bind(this,t),tabIndex:-1},v);}return c('React').createElement('div',{className:"_1t_q"},v);},_renderMessages:function r(){var s=this.props.messages.size,t=[];this.props.messages.forEach(function(u,v,w){var x=u.message_id===this.props.activeMessageID;if(x&&!(v===0&&this.props.hasDateBreak)&&!c('MessengerConfig').SentTimestampEnabled)t.push(c('React').createElement(c('MessengerDateBreak.react'),{className:"_5r8z",date:new Date(u.timestamp),key:'db:'+u.message_id}));var y=this.props.isPageMessage&&this.props.pageCustomAction?this.props.pageCustomAction:null;if(y)t.push(c('React').createElement('h4',{key:'page_action'+u.message_id},c('React').createElement(y,{message:u})));var z=c('MercuryIDs').getUserIDFromParticipantID(this.props.author),aa=this.props.thread?this.props.thread.custom_color:'';t.push(c('React').createElement(c('MessengerMessage.react'),{customColor:aa,deliveryTimestamp:this.props.deliveryTimestamp,isActive:x,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:u.message_id,message:u,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:this.props.onAttachmentLoad,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(w,s,v),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:u.timestamp>this.props.lastReadTimestamp,ref:u.message_id,authorFBID:z==null?undefined:z,threadCustomColor:aa,pageID:this.props.pageID}));if(q(this.props.isPageMessage,w,v,u))t.push(c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info:'+v,creator_info:u.creator_info}));}.bind(this));return t;},_renderNotes:function r(){var s=[];this.props.messages.forEach(function(t,u,v){if(this.props.isPageMessage&&t.page_admin_notes)s.push(c('React').createElement(c('MessengerPageAdminNoteList.react'),{key:'notes:'+t.message_id,notes:t.page_admin_notes}));}.bind(this));return s;},_renderName:function r(){var s=this.state.participants.get(this.props.messages.first().author);if(!s)return null;var t=s.short_name;if(this.props.thread){var u=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,v=c('MercuryIDs').getUserIDFromParticipantID(s.id);if(u&&v&&u[v])t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:u[v]});}return c('React').createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},c('React').createElement('span',{className:"_3oh-"},t));},getMessageElement:function r(s){return c('ReactDOM').findDOMNode(this.refs[s]);},_hasSeenHeadsAtBottom:function r(){var s=this.props,t=s.messages,u=s.nextTimestamp,v=s.readReceipts,w=t.last().timestamp,x=0;v.forEach(function(y){if(y>=w&&y<u)if(++x===2)return false;});return x===2;},_getNextTimestamp:function r(s,t,u){return u<t-1?s.get(u+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function r(s,t){t&&t.preventDefault();var u=c('MercuryIDs').getThreadIDFromParticipantID(s.id);u&&c('MessengerActions').selectThread(u);}});function p(r){var s=r.messages.first().author;return c('immutable').Map().withMutations(function(t){r.readReceipts.forEach(function(u,v){t.set(v,c('MercuryParticipants').getOrFetch(v));});t.set(s,c('MercuryParticipants').getOrFetch(s));});}function q(r,s,t,u){if(!r||!u.creator_info)return false;if(t===s.size-1)return true;var v=s.get(t+1).creator_info;if(!v)return true;return u.creator_info.creatorID!==v.creatorID;}f.exports=o;}),null);
__d('MessengerTypingIndicator.react',['cx','Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','createReactClass_DEPRECATED','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=32,k=c('createReactClass_DEPRECATED')({displayName:'MessengerTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{userID:i.string,showName:i.bool},statics:{calculateState:function l(m){return {author:c('MercuryParticipants').getOrFetch(m.userID)};}},render:function l(){if(!this.state.author)return null;var m=this.state.author;return c('React').createElement('div',{className:"_1t_p _1hbw"},c('React').createElement('div',{className:"_1t_q"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:m.is_messenger_user,size:j,showBadge:true},c('React').createElement(c('Image.react'),{alt:'',src:m.image_src,height:j,width:j}))),c('React').createElement('div',{className:"_41ud"},c('React').createElement('div',{className:"_o46 _3erg _29_7"},c('React').createElement(c('MessengerBubble.react'),{attachments:c('immutable').List([c('React').createElement(c('MercuryTypingAnimation.react'),{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))));},getBubble:function l(){return this.refs.bubble;}});f.exports=k;}),null);
__d('MercuryMessageList',['immutable','Map','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.$MercuryMessageList1=c('immutable').List(i||[]);this.$MercuryMessageList2();}h.prototype.append=function(i){var j;this.$MercuryMessageList1=(j=this.$MercuryMessageList1).push.apply(j,i);this.$MercuryMessageList2();};h.prototype.prepend=function(i){var j;this.$MercuryMessageList1=(j=this.$MercuryMessageList1).unshift.apply(j,i);this.$MercuryMessageList2();};h.prototype.update=function(i){var j=i.filter(function(k){return this.contains(k);}.bind(this));if(j.length===0)return;this.$MercuryMessageList1=this.$MercuryMessageList1.withMutations(function(k){j.forEach(function(l){var m=this.$MercuryMessageList3.get(l.message_id);if(m!==undefined)k.set(m,l);}.bind(this));}.bind(this));};h.prototype.reorder=function(i){this.$MercuryMessageList1=c('immutable').List(i.filter(Boolean));this.$MercuryMessageList2();};h.prototype.at=function(i){return this.$MercuryMessageList1.get(i);};h.prototype.contains=function(i){return this.$MercuryMessageList3.has(i.message_id);};h.prototype.toArray=function(){return this.$MercuryMessageList1.toArray();};h.prototype.toMap=function(){return new (c('Map'))(c('immutable').Seq(this.$MercuryMessageList1).map(function(i){return [i.message_id,i];}));};h.prototype.$MercuryMessageList2=function(){this.$MercuryMessageList3=new (c('Map'))(c('immutable').Seq(this.$MercuryMessageList1).map(function(i,j){return [i.message_id,j];}));};f.exports=h;}),null);
__d('MercuryMessageStore',['MercuryAPIArgsSource','LogHistory','MercuryMessages','MercuryViewer','MercuryMessageList','SubscriptionsHandler','MercuryThreadInformer','MercuryThreadlistConstants','MercuryThreads','mixInEventEmitter','setImmediate','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryThreads').get(),i=c('LogHistory').getInstance('mercury_message_store');function j(k,l,m){this.$MercuryMessageStore9=k;this.$MercuryMessageStore6=new (c('MercuryMessageList'))();this.$MercuryMessageStore4=m?c('MercuryMessages').getForFBID(m):c('MercuryMessages').get();this.$MercuryMessageStore2=1;this.$MercuryMessageStore1=null;this.$MercuryMessageStore5=0;this.$MercuryMessageStore3=l||c('MercuryThreadlistConstants').RECENT_MESSAGES_LIMIT;this.$MercuryMessageStore10=m?c('MercuryThreadInformer').getForFBID(m):c('MercuryThreadInformer').get();this.$MercuryMessageStore8=new (c('SubscriptionsHandler'))();this.$MercuryMessageStore8.addSubscriptions(this.$MercuryMessageStore10.subscribe('messages-received',function(n,o){return this.$MercuryMessageStore11(o);}.bind(this)),this.$MercuryMessageStore10.subscribe('messages-updated',function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore12(o[this.$MercuryMessageStore9]);}.bind(this)),this.$MercuryMessageStore10.subscribe('messages-reordered',function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore13();}.bind(this)),this.$MercuryMessageStore10.subscribe('thread-invalidated',function(n,o){return o[this.$MercuryMessageStore9]&&this.$MercuryMessageStore14();}.bind(this)));i.debug('constructed',JSON.stringify({threadID:this.$MercuryMessageStore9}));this.$MercuryMessageStore15();}j.prototype.setNewThreadID=function(k){this.$MercuryMessageStore7=k;};j.prototype.destroy=function(){this.$MercuryMessageStore8&&this.$MercuryMessageStore8.release();i.debug('destroyed',JSON.stringify({threadID:this.$MercuryMessageStore9}));};j.prototype.subscribe=function(k){return this.addRetroactiveListener('updated',k);};j.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return false;this.$MercuryMessageStore15();return true;};j.prototype.hasFetchedAll=function(){if(this.$MercuryMessageStore4.hasLoadedExactlyNMessages(this.$MercuryMessageStore9,this.$MercuryMessageStore5)&&this.$MercuryMessageStore4.hasLoadedAllMessages(this.$MercuryMessageStore9))return true;return h.isNewEmptyLocalThread(this.$MercuryMessageStore9);};j.prototype.$MercuryMessageStore15=function(){var k=this.$MercuryMessageStore5+this.$MercuryMessageStore3*this.$MercuryMessageStore2;this.$MercuryMessageStore4.getThreadMessagesRange(this.$MercuryMessageStore9,0,k,this.$MercuryMessageStore16.bind(this),null,c('MercuryAPIArgsSource').MERCURY);if(this.$MercuryMessageStore2<10)this.$MercuryMessageStore2+=1;if(this.$MercuryMessageStore4.hasLoadedNMessages(this.$MercuryMessageStore9,k))c('setImmediate')(function(){this.$MercuryMessageStore13();}.bind(this));};j.prototype.$MercuryMessageStore16=function(k){if(k&&k.length){this.$MercuryMessageStore1=k[0].timestamp;this.$MercuryMessageStore5=k.length;}else if(k&&!k.length&&!this.$MercuryMessageStore5)this.$MercuryMessageStore17(j.THREAD_IS_EMPTY);};j.prototype.$MercuryMessageStore11=function(k){var l=[],m=k[this.$MercuryMessageStore9];if(m&&m.length)l=l.concat(m.filter(function(p){return !!p;}));if(this.$MercuryMessageStore7){var n=k[this.$MercuryMessageStore7];if(n&&n.length){l=l.concat(n.filter(function(p){return !!p;}));this.$MercuryMessageStore7=null;}}if(l.length){this.$MercuryMessageStore6.append(l);this.$MercuryMessageStore5+=l.length;var o=l.every(function(p){return p.author!=c('MercuryViewer').getID();});this.$MercuryMessageStore17(j.MESSAGES_RECEIVED,{allFromOthers:o});}};j.prototype.$MercuryMessageStore12=function(k){this.$MercuryMessageStore6.update(this.$MercuryMessageStore4.getMessagesFromIDs(Object.keys(k)));this.$MercuryMessageStore18();this.$MercuryMessageStore17(j.MESSAGES_CHANGED);};j.prototype.$MercuryMessageStore13=function(){if(!this.$MercuryMessageStore1)return;this.$MercuryMessageStore6.reorder(this.$MercuryMessageStore4.getThreadMessagesSinceTimestamp(this.$MercuryMessageStore9,this.$MercuryMessageStore1));this.$MercuryMessageStore18();this.$MercuryMessageStore17(j.MESSAGES_REORDERED);};j.prototype.$MercuryMessageStore14=function(){this.$MercuryMessageStore6=new (c('MercuryMessageList'))();this.$MercuryMessageStore2=1;this.$MercuryMessageStore1=null;this.$MercuryMessageStore5=0;this.$MercuryMessageStore15();};j.prototype.$MercuryMessageStore17=function(k,l){var m=this.$MercuryMessageStore6.toArray();this.releaseHeldEventType('updated');this.emitAndHold('updated',babelHelpers['extends']({messages:m,eventType:k},l));};j.prototype.$MercuryMessageStore18=function(){var k=this.$MercuryMessageStore6.at(0);if(k)this.$MercuryMessageStore1=k.timestamp;};Object.assign(j,{MESSAGES_FETCHED:'fetched',MESSAGES_CHANGED:'changed',MESSAGES_RECEIVED:'received',MESSAGES_REORDERED:'reordered',THREAD_IS_EMPTY:'thread-is-empty'});c('mixInEventEmitter')(j,{updated:true});f.exports=j;}),null);
__d('MercuryOrderedThreadlist',['invariant','LogHistory','MercuryActionType','MercuryDispatcher','MercuryFilters','MercuryFolders','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap','MessagingTag','PageMessageEnumTag','RangedCallbackManager','MercuryThreadInformer','MercuryThreads','arrayContains'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('LogHistory').getInstance('ordered_threadlist_model'),j=c('MercuryFilters').getSupportedFilters().concat([c('MercuryFilters').ALL,c('MessagingTag').GROUPS]),k=c('MercuryFolders').getSupportedFolders().concat([c('MessagingTag').SPAM]);l.getForFBID=function(o){return n.getForFBID(o);};l.get=function(){return n.get();};function l(o){this.$MercuryOrderedThreadlist1=o;this.$MercuryOrderedThreadlist2=c('MercuryThreadIDMap').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist3=c('MercuryThreadInformer').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist4=c('MercuryThreads').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist5=c('MercuryDispatcher').getForFBID(this.$MercuryOrderedThreadlist1);this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7();this.$MercuryOrderedThreadlist5.subscribe('update-threadlist',function(p,q){if(!m(q))return;var r=q.ordered_threadlists;if(r&&r.length){this.$MercuryOrderedThreadlist8(r);}else{var s=(q.actions||[]).filter(function(t){return t.thread_id;});this.$MercuryOrderedThreadlist9(q.threads||[]);this.$MercuryOrderedThreadlist10(s);}this.$MercuryOrderedThreadlist3.updatedThreadlist();}.bind(this));this.$MercuryOrderedThreadlist5.subscribe('invalidate-global-state',function(){return this.$MercuryOrderedThreadlist11();}.bind(this));}l.prototype.getThreadlistOrderMap=function(o,p){if(!this.$MercuryOrderedThreadlist6[o][p]){j=j.concat([p]);k.forEach(function(q){this.$MercuryOrderedThreadlist6[q][p]=new (c('RangedCallbackManager'))(function(r){var s=this.$MercuryOrderedThreadlist4.getThreadMetaNow(r);return s&&s.timestamp;}.bind(this),function(r,s){return s-r;},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2));}.bind(this));}return this.$MercuryOrderedThreadlist6[o][p];};l.prototype.getThreadlist=function(o,p,q,r,s,t){return this.getFilteredThreadlist(o,p,q,c('MercuryFilters').ALL,r,s,t);};l.prototype.getFilteredThreadlist=function(o,p,q,r,s,t,u){var v=this.getThreadlistOrderMap(q,r),w=v.executeOrEnqueue(o,p,s,t),x=v.getUnavailableResources(w),y=v.getError(o,p,t);if(x.length||y){if(v.getCurrentArraySize()<o){var z={start:o,limit:p,filter:r,resources_size:v.getCurrentArraySize()};i.warn('range_with_gap',JSON.stringify(z));}v.setError(false);this.getServerRequests().fetchThreadlistInfo(v.getCurrentArraySize(),x.length,q,r==c('MercuryFilters').ALL?null:r,u);}return w;};l.prototype.getServerRequests=function(){return c('MercuryServerRequests').getForFBID(this.$MercuryOrderedThreadlist1);};l.prototype.getThreadlistUntilTimestamp=function(o,p,q){q=q||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(p,q).getElementsUntil(o);};l.prototype.getAvailableThreadlistNow=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).getAllResources();};l.prototype.getThreadCount=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).getCurrentArraySize();};l.prototype.hasLoadedThreadlist=function(o,p){p=p||c('MercuryFilters').ALL;return this.getThreadlistOrderMap(o,p).hasReachedEndOfArray();};l.prototype.unsubscribe=function(o,p,q){q=q||c('MercuryFilters').ALL;this.getThreadlistOrderMap(p,q).unsubscribe(o);};l.prototype.$MercuryOrderedThreadlist11=function(){this.$MercuryOrderedThreadlist6={};this.$MercuryOrderedThreadlist7();};l.prototype.$MercuryOrderedThreadlist7=function(){k.forEach(function(o){this.$MercuryOrderedThreadlist6[o]={};j.forEach(function(p){this.$MercuryOrderedThreadlist6[o][p]=new (c('RangedCallbackManager'))(function(q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(q);return r&&r.timestamp;}.bind(this),function(q,r){return r-q;},this.$MercuryOrderedThreadlist2.canLinkExternally.bind(this.$MercuryOrderedThreadlist2));}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist12=function(o,p,q){var r=this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);return !!(r&&r.timestamp&&q&&p&&this.$MercuryOrderedThreadlist13(o)==p&&c('arrayContains')(this.$MercuryOrderedThreadlist14(o),q));};l.prototype.$MercuryOrderedThreadlist15=function(o,p,q){var r,s=this,t=[],u=false,v=false,w=(o||[]).filter(function(aa){var ba=aa.filter||c('MercuryFilters').ALL;return (aa.folder==p||!aa.folder&&p==c('MessagingTag').INBOX)&&ba==q;}),x=this.$MercuryOrderedThreadlist6[p][q].getAllResources(),y=void 0;w.forEach(function(aa){t=t.concat(aa.thread_ids);if(aa.error){if(aa.end>x.length)v=aa.error;}else{var ba=aa.end-aa.start;if(aa.thread_ids.length<ba)u=true;}if(!y||aa.end>y)y=aa.end;});this.$MercuryOrderedThreadlist16(t,p,q);if(u){this.$MercuryOrderedThreadlist6[p][q].setReachedEndOfArray();}else if(v){this.$MercuryOrderedThreadlist6[p][q].setError(v);}else{var z=this.$MercuryOrderedThreadlist6[p][q].getCurrentArraySize();if(y&&z<y)(function(){var aa={},ba=x.concat(t),ca=ba.filter(function(da){var ea=aa[da];aa[da]=true;return ea;});if(ca.length){i.warn('duplicate_threads',JSON.stringify({folder:p,expected_final_size:y,actual_final_size:z,duplicate_thread_ids:ca}));s.getServerRequests().fetchThreadlistInfo(y,ca.length,p,q==c('MercuryFilters').ALL?null:q);}})();}};l.prototype.$MercuryOrderedThreadlist8=function(o){k.forEach(function(p){j.forEach(function(q){this.$MercuryOrderedThreadlist15(o,p,q);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist10=function(o){var p={},q=this.$MercuryOrderedThreadlist4;k.forEach(function(r){p[r]={};j.forEach(function(s){p[r][s]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});o.forEach(function(r){var s=r.thread_id;this.$MercuryOrderedThreadlist17(s,function(t){this.$MercuryOrderedThreadlist18(s,function(u){var v=function(){u.forEach(function(x){if(!c('arrayContains')(j,x))return;!!t||h(0);p[t][x].to_add.push(s);if(!this.$MercuryOrderedThreadlist6[t][x].hasReachedEndOfArray()&&!this.$MercuryOrderedThreadlist6[t][x].hasResource(s))p[t][x].to_remove_if_last_after_add[s]=true;}.bind(this));}.bind(this);function w(x){!!t||h(0);if(c('arrayContains')(j,x))if(c('arrayContains')(u,x)){p[t][x].to_add.push(s);}else p[t][x].to_remove.push(s);}if(!t){if(r.action_type===c('MercuryActionType').CHANGE_FOLDER||r.action_type===c('MercuryActionType').CHANGE_ARCHIVED_STATUS)k.forEach(function(x){if(x!==t)j.forEach(function(y){this.$MercuryOrderedThreadlist6[x][y].removeResources([s]);}.bind(this));}.bind(this));return;}!!t||h(0);switch(r.action_type){case c('MercuryActionType').DELETE_THREAD:u.forEach(function(x){if(!c('arrayContains')(j,x))return;p[t][x].to_remove.push(s);});break;case c('MercuryActionType').CHANGE_ARCHIVED_STATUS:case c('MercuryActionType').CHANGE_FOLDER:v();break;case c('MercuryActionType').CHANGE_READ_STATUS:w(c('MessagingTag').UNREAD);break;case c('MercuryActionType').USER_GENERATED_MESSAGE:case c('MercuryActionType').LOG_MESSAGE:u.forEach(function(x){if(!c('arrayContains')(j,x))return;if(this.$MercuryOrderedThreadlist12(s,t,x))p[t][x].to_add.push(s);}.bind(this));break;case c('MercuryActionType').CHANGE_FLAG:w(c('PageMessageEnumTag').FLAG);break;}}.bind(this));}.bind(this));}.bind(this));k.forEach(function(r){j.forEach(function(s){var t=this.$MercuryOrderedThreadlist6[r][s];this.$MercuryOrderedThreadlist16(p[r][s].to_add,r,s);for(var u=t.getCurrentArraySize()-1;u>=0;u--){var v=t.getResourceAtIndex(u);if(!p[r][s].to_remove_if_last_after_add[v])break;p[r][s].to_remove.push(v);}t.removeResources(p[r][s].to_remove);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist9=function(o){var p={};k.forEach(function(q){p[q]={};j.forEach(function(r){p[q][r]=[];});});o.forEach(function(q){this.$MercuryOrderedThreadlist17(q.thread_id,function(r){this.$MercuryOrderedThreadlist18(q.thread_id,function(s){if(r)s.forEach(function(t){if(this.$MercuryOrderedThreadlist12(q.thread_id,r,t))p[r][t].push(q.thread_id);}.bind(this));}.bind(this));}.bind(this));}.bind(this));k.forEach(function(q){j.forEach(function(r){if(p[q][r].length>0)this.$MercuryOrderedThreadlist16(p[q][r],q,r);}.bind(this));}.bind(this));};l.prototype.$MercuryOrderedThreadlist16=function(o,p,q){q=q||c('MercuryFilters').ALL;this.$MercuryOrderedThreadlist6[p][q].addResources(o);k.forEach(function(r){if(r!=p)this.$MercuryOrderedThreadlist6[r][q].removeResources(o);}.bind(this));};l.prototype.$MercuryOrderedThreadlist17=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist13(o,q));}.bind(this));};l.prototype.$MercuryOrderedThreadlist13=function(o,p){p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=null;if(!p){q='No thread metadata';}else if(!p.folder)q='No thread folder';if(q){var r={error:q,tid:o};i.warn('no_thread_folder',JSON.stringify(r));return null;}!!p||h(0);var s=p.folder;if(p.is_archived)s=c('MessagingTag').ACTION_ARCHIVED;if(this.$MercuryOrderedThreadlist6[s]){return s;}else return null;};l.prototype.$MercuryOrderedThreadlist18=function(o,p){this.$MercuryOrderedThreadlist4.getThreadMeta(o,function(q){p(this.$MercuryOrderedThreadlist14(o,q));}.bind(this));};l.prototype.$MercuryOrderedThreadlist14=function(o,p){p=p||this.$MercuryOrderedThreadlist4.getThreadMetaNow(o);var q=[c('MercuryFilters').ALL];if(!p){var r={error:'no_thread_metadata',tid:o};i.warn('no_thread_metadata',JSON.stringify(r));return [];}if(p.unread_count)q.push(c('MessagingTag').UNREAD);if(!p.is_canonical)q.push(c('MessagingTag').GROUPS);var s=p.page_thread_info;if(s&&s.flagged)q.push(c('PageMessageEnumTag').FLAG);return q;};function m(o){switch(o.payload_source){case c('MercuryPayloadSource').CLIENT_CHANGE_ARCHIVED_STATUS:case c('MercuryPayloadSource').CLIENT_CHANGE_READ_STATUS:case c('MercuryPayloadSource').CLIENT_CHANGE_FOLDER:case c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE:case c('MercuryPayloadSource').CLIENT_DELETE_MESSAGES:case c('MercuryPayloadSource').CLIENT_DELETE_THREAD:case c('MercuryPayloadSource').CLIENT_SEND_MESSAGE:case c('MercuryPayloadSource').SERVER_SEND_MESSAGE:case c('MercuryPayloadSource').SERVER_FETCH_THREADLIST_INFO:case c('MercuryPayloadSource').SERVER_THREAD_SYNC:case c('MercuryPayloadSource').SERVER_INVALIDATE_GLOBAL_STATE:return true;case c('MercuryPayloadSource').SERVER_INITIAL_DATA:return !!o.ordered_threadlists;default:return false;}}var n=new (c('MercurySingletonProvider'))(l);f.exports=l;}),null);