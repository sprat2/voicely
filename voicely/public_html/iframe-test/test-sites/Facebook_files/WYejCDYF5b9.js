if (self.CavalryLogger) { CavalryLogger.start_js(["D5Sjl"]); }

__d("InstantGameContextType",[],(function a(b,c,d,e,f,g){f.exports={THREAD:"THREAD",GROUP:"GROUP",STORY:"STORY",MATCH:"MATCH",SOLO:"SOLO"};}),null);
__d("MNAdsLoggerEventEnum",[],(function a(b,c,d,e,f,g){f.exports={LINK_CLICK:"messenger_ads_link_click",LINK_CLICK_CTA:"messenger_ads_link_click_cta",MESSAGE_SEEN_THREAD:"messenger_ads_message_seen_thread",MESSAGE_SEEN_INBOX:"messenger_ads_message_seen_inbox",MESSAGE_SEEN_REQUEST:"messenger_ads_message_seen_request"};}),null);
__d('wrapNullableForReact',[],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i!=null){return i;}else return undefined;}f.exports=h;}),null);
__d('GamesQuicksilverContextKey',['InstantGameContextType'],(function a(b,c,d,e,f,g){function h(i,j,k){'use strict';this.$GamesQuicksilverContextKey1=i;this.$GamesQuicksilverContextKey2=j;this.$GamesQuicksilverContextKey3=k;}h.prototype.getID=function(){'use strict';return this.$GamesQuicksilverContextKey1;};h.prototype.getSourceID=function(){'use strict';return this.$GamesQuicksilverContextKey2;};h.prototype.getType=function(){'use strict';return this.$GamesQuicksilverContextKey3;};h.prototype.getTypeAPIValue=function(){'use strict';switch(this.getType()){case c('InstantGameContextType').GROUP:return 'group';case c('InstantGameContextType').STORY:return 'post';case c('InstantGameContextType').THREAD:return 'thread';case c('InstantGameContextType').MATCH:return 'match';case c('InstantGameContextType').SOLO:default:return 'solo';}};h.prototype.isGroup=function(){'use strict';return this.$GamesQuicksilverContextKey3===c('InstantGameContextType').GROUP;};h.prototype.isStory=function(){'use strict';return this.$GamesQuicksilverContextKey3===c('InstantGameContextType').STORY;};h.prototype.isThread=function(){'use strict';return this.$GamesQuicksilverContextKey3===c('InstantGameContextType').THREAD;};h.prototype.isMatch=function(){'use strict';return this.$GamesQuicksilverContextKey3===c('InstantGameContextType').MATCH;};h.prototype.isSoloPlay=function(){'use strict';return this.$GamesQuicksilverContextKey3===c('InstantGameContextType').SOLO;};f.exports=h;}),null);
__d('MessengerAdsWebTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('messenger_ads_web:MessengerAdsWebLoggerConfig',this.$MessengerAdsWebTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('messenger_ads_web:MessengerAdsWebLoggerConfig',this.$MessengerAdsWebTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerAdsWebTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerAdsWebTypedLogger1=babelHelpers['extends']({},this.$MessengerAdsWebTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$MessengerAdsWebTypedLogger1.event=j;return this;};h.prototype.setIsSponsored=function(j){this.$MessengerAdsWebTypedLogger1.is_sponsored=j;return this;};h.prototype.setItemID=function(j){this.$MessengerAdsWebTypedLogger1.item_id=j;return this;};h.prototype.setMessageID=function(j){this.$MessengerAdsWebTypedLogger1.message_id=j;return this;};h.prototype.setMessageTimestamp=function(j){this.$MessengerAdsWebTypedLogger1.message_timestamp=j;return this;};h.prototype.setPageID=function(j){this.$MessengerAdsWebTypedLogger1.page_id=j;return this;};h.prototype.setVC=function(j){this.$MessengerAdsWebTypedLogger1.vc=j;return this;};var i={event:true,is_sponsored:true,item_id:true,message_id:true,message_timestamp:true,page_id:true,vc:true};f.exports=h;}),null);
__d('MessengerContactAdapters',['immutable','ImmutableObject','MercuryTypeaheadConstants'],(function a(b,c,d,e,f,g){var h={fromSearchableEntry:function i(j){var k=j.getType(),l={alias:null,isMessengerUser:null,isWorkUser:null,participants:null,photo:j.getPhoto(),subtitle:j.getSubtitle(),thread:null,title:j.getTitle(),type:k,uid:j.getUniqueID()},m=j.getAuxiliaryData();if(m)if(k===c('MercuryTypeaheadConstants').THREAD_TYPE){l.thread=new (c('ImmutableObject'))(m.thread);l.participants=c('immutable').Map().withMutations(function(n){m.participantsToRender.forEach(function(o){n.set(o.id,o);});});}else{l.isMessengerUser=m.isMessengerUser;l.isWorkUser=m.isWorkUser;l.alias=m.alias;}return new (c('ImmutableObject'))(l);},fromMercuryParticipant:function i(j){return new (c('ImmutableObject'))({alias:j.alias,uid:j.id,photo:j.image_src,title:j.name,subtitle:'',type:j.type,isMessengerUser:j.is_messenger_user,isWorkUser:j.is_work_user,href:j.href,timezone:j.timezone});}};f.exports=h;}),null);
__d('MessengerGraphQLTypeaheadAdapter',['MercuryIDs','MercuryParticipantTypes','MercuryTypeaheadConstants','RelayQL','SearchableEntry'],(function a(b,c,d,e,f,g){'use strict';function h(j){return c('MercuryIDs').isValid(j)?j:c('MercuryIDs').getParticipantIDFromUserID(j);}var i={convertProfileToEntry:function j(k){if(!k||!k.id||!k.name||k.is_memorialized)return null;var l=c('MercuryParticipantTypes').NON_FRIEND;if(k.is_viewer_friend||k.messenger_contact.is_on_viewer_contact_list||k.is_viewer_coworker&&k.viewer_affinity>0){l=c('MercuryParticipantTypes').FRIEND;}else if(k.is_viewer_coworker)l=c('MercuryParticipantTypes').FB4C;return new (c('SearchableEntry'))({uniqueID:k.id,title:k.name,type:l,photo:k.profile_picture&&k.profile_picture.uri,uri:k.url,auxiliaryData:{isMessengerUser:k.is_messenger_user,isWorkUser:k.is_work_user},order:-k.viewer_affinity});},convertPageToEntry:function j(k,l){if(!k||!k.id||!k.name)return null;if(k.instant_game_info)return this.convertGameToEntry(k);return new (c('SearchableEntry'))({uniqueID:k.id,title:k.name,type:l,photo:k.profile_picture&&k.profile_picture.uri,uri:k.url,auxiliaryData:{isMessengerUser:k.is_messenger_user,isWorkUser:k.is_work_user},order:0});},convertGameToEntry:function j(k,l){if(!k||!k.id||!k.name||!k.instant_game_info)return null;return new (c('SearchableEntry'))({uniqueID:k.id,title:k.name,type:c('MercuryTypeaheadConstants').GAME_TYPE,photo:k.instant_game_info&&k.instant_game_info.icon_uri,uri:k.instant_game_info&&k.instant_game_info.game_uri,order:0});},convertGroupToEntry:function j(k,l){if(!k||!k.thread_key||!k.is_group_thread)return null;var m=k.thread_key.thread_fbid;if(!m)return null;var n=k.image&&k.image.uri,o=k.other_participants.edges.map(function(s){return s.node.messaging_actor.name;}).join(', '),p=k.name,q=null;if(!p){p=o;}else q=o;if(!p)return null;var r={};r.thread={thread_id:m,other_user_fbid:null,image_src:n,participants:k.other_participants.edges.map(function(s){return h(s.node.messaging_actor.id);})};r.participantsToRender=k.other_participants.edges.map(function(s){return {id:h(s.node.messaging_actor.id),is_messenger_user:s.node.messaging_actor.is_messenger_user};});return new (c('SearchableEntry'))({uniqueID:m,order:l,photo:n,title:p,subtitle:q,type:c('MercuryParticipantTypes').THREAD,auxiliaryData:r});},userFragment:function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'is_memorialized',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_viewer_friend',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_viewer_coworker',kind:'Field',metadata:{},type:'Boolean'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:32}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:32}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'is_on_viewer_contact_list',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'messenger_contact',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id'},type:'Contact'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'is_messenger_user',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'is_work_user',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'viewer_affinity',kind:'Field',metadata:{},type:'Float'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGraphQLTypeaheadAdapter_UserFragmentRelayQL',type:'User'};}(),pageFragment:function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:32}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:32}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'profile_picture',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'is_messenger_user',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'category_type',kind:'Field',metadata:{},type:'PageCategoryType'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGraphQLTypeaheadAdapter_PageFragmentRelayQL',type:'Page'};}(),groupFragment:function(){return {children:[{children:[{fieldName:'thread_fbid',kind:'Field',metadata:{},type:'String'}],fieldName:'thread_key',kind:'Field',metadata:{canHaveSubselections:true},type:'MessageThreadKey'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{fieldName:'is_group_thread',kind:'Field',metadata:{},type:'Boolean'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:250}}],children:[{children:[{children:[{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'is_messenger_user',kind:'Field',metadata:{},type:'Boolean'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'User',type:'User'}],fieldName:'messaging_actor',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true},type:'MessagingActor'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessagingParticipant'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessagingParticipantsOfThreadEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],fieldName:'other_participants',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'MessagingParticipantsOfThreadConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGraphQLTypeaheadAdapter_GroupFragmentRelayQL',type:'MessageThread'};}(),gameFragment:function(){return {children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'name',kind:'Field',metadata:{},type:'String'},{children:[{fieldName:'icon_uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'instant_game_info',kind:'Field',metadata:{canHaveSubselections:true},type:'GamesInstantPlayStyleInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerGraphQLTypeaheadAdapter_GameFragmentRelayQL',type:'Application'};}()};f.exports=i;}),null);
__d('MessengerGraphQLTypeaheadHighlighter',['Keys','MercuryTypeaheadConstants','MessengerTypeaheadUtils'],(function a(b,c,d,e,f,g){'use strict';var h={getNextHighlightedEntry:function i(j,k,l,m){var n=[];c('MessengerTypeaheadUtils').getEntryOrder(l).forEach(function(r){return n.push.apply(n,k.filter(function(s){return c('MessengerTypeaheadUtils').areSectionsEqual(s.getType(),r);}));});if(!m){if(n.length===0)return null;if(j===c('Keys').DOWN){var o=n[0];if(o.getType()===c('MercuryTypeaheadConstants').SEARCH_TYPE&&n.length>1)return n[1];return o;}if(j===c('Keys').UP)return n[n.length-1];return null;}var p=m.getUniqueID(),q=n.findIndex(function(r){return r.getUniqueID()===p;});if(q===-1)return null;if(j===c('Keys').DOWN){q+=1;if(q>=n.length)q=0;}else if(j===c('Keys').UP){q-=1;if(q<0)q=n.length-1;}return n[q];}};f.exports=h;}),null);
__d("MessengerRoomWithAssocObjectAudienceWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1310278199019267";};j.getQueryID=function(){"use strict";return "404717586571843";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('MessengerRoomWithAssocObjectAudienceLocalCacheManager',['AsyncRequest','Map','MercurySingletonProvider','MessengerGraphQLTypeaheadAdapter','SearchSourceCallbackManager','TokenizeUtil','MessengerRoomWithAssocObjectAudienceWebGraphQLQuery','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(k){this.entriesPromise=null;this.audienceEntries=null;this.threadFBID=k;this.callbackManager=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:c('TokenizeUtil').isQueryMatch,indexFn:null});}h.prototype.onEntriesLoaded=function(k){if(this.audienceEntries!==null){k(this.audienceEntries,true);return;}if(this.entriesPromise===null){var l=c('MessengerRoomWithAssocObjectAudienceWebGraphQLQuery').getURI({thread_fbid:this.threadFBID,first:30});this.entriesPromise=new (c('AsyncRequest'))(l).setAllowCrossPageTransition(true).exec().then(function(m){return m.getPayload();}).then(function(m){var n=m.data.message_thread.messaging_audience_list.edges.map(function(o){return c('MessengerGraphQLTypeaheadAdapter').convertProfileToEntry(o.node);}).filter(function(o){return o!==null;});this.callbackManager.addLocalEntries(n);this.audienceEntries=n;}.bind(this));}if(this.entriesPromise)this.entriesPromise.done(function(){k(this.audienceEntries,true);}.bind(this),c('emptyFunction'));};h.prototype.search=function(k,l){this.onEntriesLoaded(function(){this.callbackManager.search(k,function(m){l(m,k);});}.bind(this));};h.prototype.isBootstrapped=function(){return this.audienceEntries!==null;};i.get=function(){return j.get();};function i(){this.threadFBIDToCacheMap=new (c('Map'))();}i.prototype.onEntriesLoaded=function(k,l){var m=this.threadFBIDToCacheMap.get(k);if(!m){m=new h(k);this.threadFBIDToCacheMap.set(k,m);}m.onEntriesLoaded(l);};i.prototype.search=function(k,l,m){var n=this.threadFBIDToCacheMap.get(k);if(!n){n=new h(k);this.threadFBIDToCacheMap.set(k,n);}n.search(l,m);};i.prototype.isBootstrapped=function(k){if(!k)return false;var l=this.threadFBIDToCacheMap.get(k);if(l)return l.isBootstrapped();return false;};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d("MessengerFriendsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1138546562910012";};j.getQueryID=function(){"use strict";return "340140939718890";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("TopMessengerFriendsAndGroupsWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1573443639352292";};j.getQueryID=function(){"use strict";return "170460960113470";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('MessengerTypeaheadLocalCache',['AsyncRequest','MessengerConfig','MessengerFriendsWebGraphQLQuery','MessengerGraphQLTypeaheadAdapter','SearchSourceCallbackManager','TokenizeUtil','TopMessengerFriendsAndGroupsWebGraphQLQuery','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('SearchSourceCallbackManager'))({parseFn:c('TokenizeUtil').parse,matchFn:c('TokenizeUtil').isQueryMatch,indexFn:null}),i=null,j=null,k=null,l=null;function m(){if(c('MessengerConfig').BootstrapTypeaheadFromBuddylist||!k)return;var o=k;k=null;new (c('AsyncRequest'))(c('MessengerFriendsWebGraphQLQuery').getLegacyURI({cursor:o})).setAllowCrossPageTransition(true).exec().then(function(p){return p.getPayload();}).done(function(p){h.addLocalEntries(p.viewer.all_friends.edges.map(function(q){return c('MessengerGraphQLTypeaheadAdapter').convertProfileToEntry(q.node);}).filter(function(q){return q!==null;}));});}var n={onEntriesLoaded:function o(p){var q;if(i!==null&&j!==null){p(i,j,false);return;}if(l===null)(function(){var r=c('MessengerConfig').BootstrapTypeaheadFromBuddylist,s=c('TopMessengerFriendsAndGroupsWebGraphQLQuery').getLegacyURI({use_buddylist:r,first:100});l=new (c('AsyncRequest'))(s).setAllowCrossPageTransition(true).exec().then(function(t){return t.getPayload();}).then(function(t){var u=(r?t.viewer.chat_buddylist:t.viewer.all_friends.edges).map(function(w){return c('MessengerGraphQLTypeaheadAdapter').convertProfileToEntry(r?w.represented_profile:w.node);}).filter(function(w){return w!==null;}),v=t.viewer.message_threads.edges.map(function(w,x){return c('MessengerGraphQLTypeaheadAdapter').convertGroupToEntry(w.node,x);}).filter(function(w){return w!==null;});h.addLocalEntries(u);h.addLocalEntries(v);i=u;j=v;if(t.viewer.all_friends&&t.viewer.all_friends.page_info&&t.viewer.all_friends.page_info.has_next_page)k=t.viewer.all_friends.page_info.end_cursor;});})();l.done(function(){p(i,j,true);m();},c('emptyFunction'));},search:function o(p,q){n.onEntriesLoaded(function(){h.search(p,function(r){q(r,p);});});},isBootstrapped:function o(){return i!==null&&j!==null;}};f.exports=n;}),null);
__d('MessengerSearchFunnelLogger',['FunnelLogger','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';var h;function i(p){c('FunnelLogger').startFunnel(p);c('FunnelLogger').appendActionIfNew(p,'search_start');h=[];}function j(p){c('FunnelLogger').appendActionIfNew(p,'search_end');c('FunnelLogger').endFunnel(p);}function k(p,q){c('FunnelLogger').appendActionWithPayload(p,'initiate_content_search',{query_string:q,impression_list:h});c('FunnelLogger').endFunnel(p);}function l(p,q,r,s){if(r==null||h==null||h.length===0){c('FunnelLogger').appendActionWithPayload(p,'search_result_error',{error:'threadID or latest impression list are null',thread_id:r,impression_list:h});c('FunnelLogger').endFunnel(p);return;}r=c('MercuryIDs').getThreadFBIDFromThreadID(r);c('FunnelLogger').appendActionWithPayload(p,'log_result_selection',{thread_id:r,type:s,rank:h.indexOf(r),search_query:q?q:''});}function m(p,q,r){c('FunnelLogger').appendActionWithPayloadIfNew(p,'loading_state_impression_list',{search_query:q,impression_list:r});h=r;}function n(p,q,r,s){c('FunnelLogger').appendActionWithPayload(p,q,{search_query:r,impression_list:s});h=s;}function o(p){c('FunnelLogger').appendAction(p,'clear_search_query');this.endFunnel(p);}f.exports={startFunnel:i,logResultSelection:l,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:n,logClearQuery:o};}),null);
__d('MessengerTypeaheadResultRoute',['RelayQL','RelayRoute'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerTypeaheadResultRoute';j.paramDefinition={queryString:{required:true,type:'String'},localEntryIDs:{required:true,type:'Array'},shouldQueryPages:{required:true,type:'Boolean'},shouldQueryThreadName:{required:true,type:'Boolean'},shouldQueryParticipantIDs:{required:true,type:'Boolean'},shouldQueryParticipantNames:{required:true,type:'Boolean'},shouldQueryVCEndpoint:{required:true,type:'Boolean'},shouldQueryInternalBot:{required:true,type:'Boolean'},shouldQueryRoomsAudience:{required:true,type:'Boolean'},threadFBID:{required:false,type:'String'}};j.queries={profiles:function k(l,m){var n=m.shouldQueryPages,o=m.shouldQueryVCEndpoint,p=m.shouldQueryInternalBot,q=m.shouldQueryRoomsAudience;return function(r){return {calls:[{kind:'Call',metadata:{type:'String!'},name:'query',value:{kind:'CallVariable',callVariableName:'queryString'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(r)]),fieldName:'entities_named',kind:'Query',metadata:{identifyingArgName:'query',identifyingArgType:'String!'},name:'MessengerTypeaheadResultRoute',type:'SearchableEntitiesQuery'};}(l.getFragment('profiles',{shouldQueryPages:n,shouldQueryVCEndpoint:o,shouldQueryInternalBot:p,shouldQueryRoomsAudience:q}));},groups:function k(l,m){var n=m.queryString,o=m.localEntryIDs,p=m.shouldQueryThreadName,q=m.shouldQueryParticipantIDs,r=m.shouldQueryParticipantNames;return function(s){return {children:[].concat.apply([],[c('RelayQL').__frag(s)]),fieldName:'viewer',kind:'Query',metadata:{},name:'MessengerTypeaheadResultRoute',type:'Viewer'};}(l.getFragment('groups',{queryString:n,localEntryIDs:o,shouldQueryThreadName:p,shouldQueryParticipantIDs:q,shouldQueryParticipantNames:r}));},roomAudience:function k(l,m){var n=m.queryString,o=m.shouldQueryRoomsAudience;return function(p){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(p)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerTypeaheadResultRoute',type:'MessageThread'};}(l.getFragment('roomAudience',{queryString:n,shouldQueryRoomsAudience:o}));}};f.exports=j;}),null);
__d('imageBlockReact',['reasonReact','ImageBlock.react','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){return c('reasonReact').wrapJsForReason(c('ImageBlock.react'),{className:c('bs_js_null_undefined').from_opt(i),contentClassName:c('bs_js_null_undefined').from_opt(j),imageClassName:c('bs_js_null_undefined').from_opt(k),spacing:c('bs_js_null_undefined').from_opt(l)},m);}g.make=h;}),null);
__d('imageReact',['Image.react','reasonReact','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('reasonReact').wrapJsForReason(c('Image.react'),{className:c('bs_js_null_undefined').from_opt(i),alt:c('bs_js_null_undefined').from_opt(j),src:c('bs_js_null_undefined').from_opt(k),height:c('bs_js_null_undefined').from_opt(l),title:c('bs_js_null_undefined').from_opt(m),width:c('bs_js_null_undefined').from_opt(n),style:c('bs_js_null_undefined').from_opt(o)},p);}g.make=h;}),null);
__d('linkReact',['Link.react','reasonReact','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v){return c('reasonReact').wrapJsForReason(c('Link.react'),{"aria-label":c('bs_js_null_undefined').from_opt(i),"data-hover":c('bs_js_null_undefined').from_opt(k),"data-tooltip-content":c('bs_js_null_undefined').from_opt(l),className:c('bs_js_null_undefined').from_opt(j),href:c('bs_js_null_undefined').from_opt(m),onClick:c('bs_js_null_undefined').from_opt(n),onMouseDown:c('bs_js_null_undefined').from_opt(o),onMouseEnter:c('bs_js_null_undefined').from_opt(p),role:c('bs_js_null_undefined').from_opt(q),style:c('bs_js_null_undefined').from_opt(r),tabIndex:c('bs_js_null_undefined').from_opt(s),target:c('bs_js_null_undefined').from_opt(t),title:c('bs_js_null_undefined').from_opt(u)},v);}g.make=h;}),null);
__d("messengerContactActionsRe",[],(function a(b,c,d,e,f,g){'use strict';var h={ADD_OWNER:"ADD_OWNER",MESSAGE:"MESSAGE",PROFILE:"PROFILE",REMOVE:"REMOVE",REMOVE_OWNER:"REMOVE_OWNER",SELECT:"SELECT"};g.actions=h;}),null);
__d('messengerContactImageReact',['React','utilsRe','imageReact','reasonReact','bs_js_primitive','bs_js_null_undefined','MessengerContactImage.react','messengerProfileImageWrapperReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statefulComponent("MessengerContactImageReact");function i(n,o,p,q,r,s){var t=h.slice();t[9]=function(u,v){return c('React').createElement("div",{className:c('utilsRe').$pipe$unknown(n,"")},c('reasonReact').element(0,0,c('messengerProfileImageWrapperReact').make(0,p,[q],o,0,0,0,0,[1],[c('reasonReact').element(0,0,c('imageReact').make(0,[""],r,[q],0,[q],0,[]))])));};return t;}var j=c('reasonReact').wrapReasonForJs(h,function(n){return i(c('bs_js_primitive').null_undefined_to_opt(n.className),c('bs_js_primitive').null_undefined_to_opt(n.customBadge),c('utilsRe').nullUndefinedBooleanToOptionBool(n.isMessengerUser),n.size,c('bs_js_primitive').null_undefined_to_opt(n.src),[]);});function k(n,o,p,q,r,s){return c('reasonReact').wrapJsForReason(c('MessengerContactImage.react'),{className:c('bs_js_null_undefined').from_opt(n),customBadge:c('bs_js_null_undefined').from_opt(o),isMessengerUser:c('utilsRe').optionBoolToNullUndefinedBoolean(p),size:q,src:c('bs_js_null_undefined').from_opt(r)},s);}var l=[k],m=c('utilsRe').$pipe$unknown;g.$pipe$unknown=m;g.component=h;g.make=i;g.comp=j;g.StraightJSComponent=l;}),null);
__d('MercuryThreadTimestamp.react',['React','formatDate','joinClasses'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.time;if(!l)return c('React').createElement('abbr',null);return c('React').createElement('abbr',{className:c('joinClasses')(this.props.className,'timestamp'),title:this.props.title||new Date(l).toLocaleDateString(),'data-utime':l/1000},this.props.text||c('formatDate')(new Date(l),'g:ia'));};function k(){h.apply(this,arguments);}k.propTypes={time:j.number,title:j.string,text:j.string};f.exports=k;}),null);
__d('mercuryThreadTimestampReact',['reasonReact','bs_js_null_undefined','MercuryThreadTimestamp.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MercuryThreadTimestamp.react'),{time:c('bs_js_null_undefined').from_opt(i),title:c('bs_js_null_undefined').from_opt(j),text:c('bs_js_null_undefined').from_opt(k)},l);}g.make=h;}),null);
__d("messengerLocalTimeReact",["cx","fbt","React","bs_js_boolean","reasonReact","joinClasses","mercuryThreadTimestampReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("RMessengerLocalTimeReact");function k(n,o,p){var q=j.slice();q[9]=function(r,s){if(o){var t=o[0]-new Date().getTimezoneOffset()*-60;if(t===0){return null;}else{var u=new Date(Date.now()+t*1000),v=u.getHours(),w=+(v<6||v>22),x=c("joinClasses")("_10rk",n);return c("React").createElement("span",{className:x},c("React").createElement("span",{className:c("bs_js_boolean").to_js_boolean(w)?"_2f3x":""},"(",c("reasonReact").element(0,0,c("mercuryThreadTimestampReact").make([u.getTime()],0,0,[]))," ",i._("local time"),")"));}}else return null;};return q;}var l=22,m=6;g.component=j;g.nightStartHour=l;g.nightEndHour=m;g.make=k;}),null);
__d('messengerTextWithEntitiesReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerTextWithEntities.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MessengerTextWithEntities.react'),{renderEmoji:c('utilsRe').optionBoolToNullUndefinedBoolean(i),renderEmoticons:c('utilsRe').optionBoolToNullUndefinedBoolean(j),text:c('bs_js_null_undefined').from_opt(k)},l);}g.make=h;}),null);
__d('messengerContactListRowReact',['cx','ix','fbt','bs_array','bs_block','bs_curry','React','utilsRe','linkReact','imageReact','bs_js_boolean','MercuryIDs','Badge.react','reasonReact','joinClasses','bs_js_primitive','PresenceStatus','imageBlockReact','AvailableListConstants','MercuryParticipantTypes','messengerLocalTimeReact','MessengerAdminGroupUtils','messengerContactActionsRe','messengerThreadImageReact','messengerContactImageReact','messengerTextWithEntitiesReact'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(x,y){if(x){return +x[0].contains(y);}else return 0;}function l(x,y,z){var aa=z.photo,ba=0;if(c('bs_js_primitive').is_nil_undef(aa)){ba=1;}else if(aa===""){ba=1;}else return c('reasonReact').element(0,0,c('messengerContactImageReact').make(["_5l39 _5rmm"],0,c('utilsRe').nullUndefinedBooleanToOptionBool(z.isMessengerUser),32,[aa],[]));if(ba===1){var ca=z.thread,da=z.participants,ea=+(z.type===c('MercuryParticipantTypes').THREAD),fa=0,ga,ha;if(y){if(c('bs_js_primitive').is_nil_undef(da)){fa=2;}else if(ea!==0){ga=y[0];ha=da;fa=3;}else fa=2;}else if(c('bs_js_primitive').is_nil_undef(ca)){fa=2;}else if(c('bs_js_primitive').is_nil_undef(da)){fa=2;}else if(ea!==0){ga=ca;ha=da;fa=3;}else fa=2;switch(fa){case 2:return c('React').createElement("div",{className:"_5l39"});case 3:return c('reasonReact').element(0,0,c('messengerThreadImageReact').make(["_5l39"],0,[32],ha,ga,x,[]));}}}function m(x){var y=x.subtitle,z=0;if(c('bs_js_primitive').is_nil_undef(y)){z=1;}else if(y===""){z=1;}else return c('React').createElement("div",undefined,c('React').createElement("div",{className:"_3q34"},c('reasonReact').element(0,0,c('messengerTextWithEntitiesReact').make([1],[1],[x.title],[]))),c('React').createElement("div",{className:"_3q35"},y));if(z===1){var aa=c('utilsRe').isTruthy(x.isWorkUser);return c('React').createElement("div",{className:"_364g"},x.title,c('reasonReact').element(0,0,c('messengerLocalTimeReact').make("_5ywd",c('bs_js_primitive').null_undefined_to_opt(x.timezone),[])),aa!==0?c('React').createElement(c('Badge.react'),{size:"small",type:"work"}):null);}}function n(x,y){var z=y.type;if(x){if(x[0]!==0){if(c('bs_js_primitive').is_nil_undef(z)){return 0;}else if(z===c('MercuryParticipantTypes').FRIEND||z===c('MercuryParticipantTypes').USER){var aa=c('MercuryIDs').getUserIDFromParticipantID(y.uid);if(c('bs_js_primitive').is_nil_undef(aa)){return 0;}else return +(c('PresenceStatus').get(aa)===c('AvailableListConstants').ACTIVE);}else return 0;}else return 0;}else return 0;}var o=c('React').createElement("span",{className:"_5rh4"},j._("Added")),p=c('React').createElement("span",{className:"_5rh4"},j._("Invited")),q=c('reasonReact').element(0,0,c('imageReact').make(["_1kqm"],0,[i("86852")],0,0,0,0,[]));function r(x,y,z){y[3]=x===null?0:[x];return 0;}function s(x,y){var z=x[4],aa=x[5],ba=x[3];if(z){if(z[0]!==0){if(aa){if(ba){var ca=ba[0];c('bs_curry')._1(aa[0],ca);var da=x[6];if(da){c('bs_curry')._1(da[0],ca);return 0;}else return 0;}else return 0;}else return 0;}else return 0;}else return 0;}function t(x,y,z){var aa=y[4],ba=x[5],ca=y[3];if(aa){if(aa[0]!==0){if(ba){if(ca){var da=ca[0];c('bs_curry')._1(ba[0],da);var ea=y[6];if(ea){return c('bs_curry')._1(ea[0],da);}else return 0;}else return 0;}else return 0;}else return 0;}else return 0;}function u(x,y,z){var aa=y.slice();return c('bs_block').__(0,[(aa[2]=x,aa)]);}function v(){var x=c('reasonReact').statefulComponent("MessengerContactListRowReact"),y=function aa(ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va){var wa=qa?qa[0]:"",xa=function cb(db,eb,fb){if(ga){return 0;}else{db.stopPropagation();db.preventDefault();return 0;}},ya=function cb(db,eb,fb){var gb=db[0];if(gb===c('messengerContactActionsRe').actions.SELECT){return c('bs_curry')._2(ea,ca,db[1]);}else if(fa){return c('bs_curry')._2(fa[0],gb,ca);}else return 0;},za=function cb(db,eb,fb){var gb=c('utilsRe').isSomeTrue(ka);if(gb!==0&&da){return c('bs_curry')._1(da[0],ca);}else return 0;},ab=function cb(db,eb,fb){db.stopPropagation();return ya([c('messengerContactActionsRe').actions.SELECT,db],eb,fb);},bb=function cb(db,eb){if(k(pa,db[1].uid)){return o;}else if(k(la,db[1].uid)){return p;}else if(k(ra,db[1].uid)){return q;}else if(n(sa,db[1])){return c('React').createElement("div",{className:"_jg2"});}else{var fb=ha?c('utilsRe').arrayCompact(ha[0]):undefined,gb=db[1].thread,hb,ib=0,jb;if(ta){jb=ta[0];ib=1;}else if(c('bs_js_primitive').is_nil_undef(gb)){hb=0;}else{jb=gb;ib=1;}if(ib===1){var kb=+c('MessengerAdminGroupUtils').isAdmin(fb,db[1].uid);hb=+c('MessengerAdminGroupUtils').isOwner(c('bs_js_boolean').to_js_boolean(kb),jb);}var lb=hb!==0?c('React').createElement("span",{className:"_5qsj"},j._("Admin")):null,mb=function nb(ob,pb){return c('bs_curry')._2(eb[1],ya,[ob,pb]);};if(ga){return c('React').createElement("div",undefined,lb,c('React').createElement(ga[0],{className:"_rwo",adminIds:fb,contact:db[1],extrasEnabled:c('bs_js_boolean').to_js_boolean(ja),isOpen:c('bs_js_boolean').to_js_boolean(db[2]),onAction:mb,onToggle:c('bs_curry')._1(eb[2],u),viewer:ua}));}else return lb;}};return [x[0],x[1],x[2],function(cb,db){var eb=+(ca===cb[0]);return [ca,eb!==0?cb[1]:c('bs_curry')._1(ba,ca),cb[2],cb[3],ma,oa,na];},s,t,x[6],x[7],x[8],function(cb,db){var eb=c('joinClasses')(wa,"_5l37"+(c('utilsRe').optionBoolToBoolean(ma)?' '+"_1k1p":'')+(c('bs_js_boolean').to_js_boolean(cb[2])?' '+"_rwn":'')),fb=ga?-1:0,gb=c('reasonReact').element(0,0,c('linkReact').make(0,["_5f0v"],0,0,0,[c('bs_curry')._1(db[1],ab)],[c('bs_curry')._1(db[1],xa)],[c('bs_curry')._1(db[1],za)],0,0,[fb],0,0,[c('reasonReact').element(0,0,c('imageBlockReact').make(0,["_5l38"],0,["medium"],[l(ua,ta,cb[1]),m(cb[1]),bb(cb,db)]))])),hb=c('utilsRe').isSomeTrue(ia);if(hb!==0){return c('React').createElement("li",{ref:c('bs_curry')._1(db[1],r),className:eb},gb);}else return c('React').createElement("li",{className:eb,"aria-selected":c('utilsRe').optionBoolToNullUndefinedBoolean(ma),role:"option",ref:c('bs_curry')._1(db[1],r)},gb);},function(){return [ca,c('bs_curry')._1(ba,ca),0,0,ma,oa,na];},x[11]];},z=c('reasonReact').wrapReasonForJs(x,function(aa){var ba=aa.adminIds;return y(aa.contactAdapter,aa.rawContact,c('bs_js_primitive').null_undefined_to_opt(aa.onHighlight),aa.onSelect,c('bs_js_primitive').null_undefined_to_opt(aa.onAction),c('bs_js_primitive').null_undefined_to_opt(aa.actionsClass),c('bs_js_primitive').is_nil_undef(ba)?0:[c('bs_array').map(c('bs_js_primitive').null_undefined_to_opt,ba)],c('utilsRe').nullUndefinedBooleanToOptionBool(aa.disableRole),+aa.extraActionsEnabled,c('utilsRe').nullUndefinedBooleanToOptionBool(aa.hasHoverState),c('bs_js_primitive').null_undefined_to_opt(aa.invitedEntryIDs),c('utilsRe').nullUndefinedBooleanToOptionBool(aa.isHighlighted),c('bs_js_primitive').null_undefined_to_opt(aa.onRenderHighlight),c('bs_js_primitive').null_undefined_to_opt(aa.onScrollIntoView),c('bs_js_primitive').null_undefined_to_opt(aa.originalEntryIDs),c('bs_js_primitive').null_undefined_to_opt(aa.rowClassName),c('bs_js_primitive').null_undefined_to_opt(aa.selectedEntryIDs),c('utilsRe').nullUndefinedBooleanToOptionBool(aa.showPresence),c('bs_js_primitive').null_undefined_to_opt(aa.thread),aa.viewer,[]);});return [z,y];}var w=32;g.imageSize=w;g.idsContain=k;g.renderContactImage=l;g.renderContactText=m;g.getPresenceStatus=n;g.isOriginal=o;g.isInvited=p;g.isSelected=q;g.setThisRef=r;g.didMount=s;g.didUpdate=t;g.handleActionsToggle=u;g.createMake=v;}),null);
__d('MessengerContactList.react',['cx','fbt','messengerContactListRowReact','ImageBlock.react','immutable','ImmutableObject','MessengerSpinner.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerContactListRowReact').createMake(),m=l[0],n=l[1],o=c('React').PropTypes;j=babelHelpers.inherits(p,c('React').PureComponent);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.$MessengerContactList1=function(v,w){return c('React').createElement('div',{key:w,className:"_29hk"},this.$MessengerContactList4(w),c('React').createElement('ul',{id:this.props.ariaOwneeID,role:this.props.disableRole?undefined:'listbox',className:"_29hl"},v.map(function(x,y){var z=y===0?c('joinClasses')(this.props.rowClassName,"_3h3c"):this.props.rowClassName;return c('React').createElement(m,{actionsClass:this.props.actionsClass,adminIds:this.props.adminIds,contactAdapter:this.props.contactAdapter,disableRole:this.props.disableRole,extraActionsEnabled:!!this.props.extraActionsEnabled,hasHoverState:this.props.hasHoverState,invitedEntryIDs:this.props.invitedEntryIDs,isHighlighted:this.props.highlightedEntry&&this.props.highlightedEntry.getUniqueID()===x.getUniqueID(),key:x.id||x.getUniqueID(),onAction:this.props.onAction,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,rawContact:x,rowClassName:z,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:this.props.showPresence,thread:this.props.thread,viewer:this.props.viewer});}.bind(this))));}.bind(this),r;}p.prototype.render=function(){return c('React').createElement('div',{className:this.props.className},this.props.listSections.map(this.$MessengerContactList1).toArray(),this.$MessengerContactList2(),this.$MessengerContactList3());};p.prototype.$MessengerContactList4=function(q){if(!q)return null;return c('React').createElement('div',{className:"_225b"},q);};p.prototype.$MessengerContactList2=function(){if(!this.props.isLoading)return null;return c('React').createElement(c('ImageBlock.react'),{className:"_225c",spacing:'medium'},c('React').createElement(c('MessengerSpinner.react'),{className:"_2i59",color:'grey'}),c('React').createElement('div',{className:"_4g0h"},i._("Searching...")));};p.prototype.$MessengerContactList3=function(){if(this.props.isLoading||this.props.listSections.size>0||!this.props.queryString||this.props.queryString.length===0)return null;return c('React').createElement('div',{className:"_3xcx"},i._("No results found"));};p.propTypes={actionsClass:o.func,adminIds:o.arrayOf(o.string),ariaOwneeID:o.string,contactAdapter:o.func.isRequired,disableRole:o.bool,extraActionsEnabled:o.bool,hasHoverState:o.bool,highlightedEntry:o.object,invitedEntryIDs:o.instanceOf(c('immutable').Set),isLoading:o.bool,listSections:o.instanceOf(c('immutable').OrderedMap).isRequired,onAction:o.func,onHighlight:o.func,onRenderHighlight:o.func,onScrollIntoView:o.func,onSelect:o.func.isRequired,originalEntryIDs:o.instanceOf(c('immutable').Set),queryString:o.string,rowClassName:o.string,selectedEntryIDs:o.instanceOf(c('immutable').Set),showPresence:o.bool,thread:o.instanceOf(c('ImmutableObject')),viewer:o.string.isRequired};f.exports=p;}),null);
__d('MessengerTypeaheadResultView.react',['cx','immutable','Keys','MessengerContactAdapters','MessengerContactList.react','MessengerGraphQLTypeaheadHighlighter','MessengerSearchFunnelLogger','MessengerTypeaheadUtils','MessengerGraphQLTypeaheadAdapter','MercuryConfig','MercuryParticipantTypes','MercuryTypeaheadConstants','React','Relay','RelayQL','SearchableEntry','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=20,l=50,m=c('MercuryConfig').SearchMorePeople?c('MercuryConfig').SearchMorePeople:c('MercuryTypeaheadConstants').COMPOSER_NON_FRIENDS_MAX,n=c('React').PropTypes;i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.$MessengerTypeaheadResultView1=null,this.onKeyDown=function(u){if(u===c('Keys').RETURN){this.props.onSelectHighlighted();return;}if(!this.$MessengerTypeaheadResultView1)return;var v=c('MessengerGraphQLTypeaheadHighlighter').getNextHighlightedEntry(u,this.$MessengerTypeaheadResultView1,this.props.queryString,this.props.highlightedEntry);this.props.onNextHighlighted(v);}.bind(this),this.$MessengerTypeaheadResultView3=function(u){this.props.onNextHighlighted(u);}.bind(this),q;}o.prototype.componentWillMount=function(){this.$MessengerTypeaheadResultView1=this.$MessengerTypeaheadResultView2(this.props);};o.prototype.componentDidMount=function(){this.props.onMount(this.onKeyDown);};o.prototype.componentWillUpdate=function(p){this.$MessengerTypeaheadResultView1=this.$MessengerTypeaheadResultView2(p);};o.prototype.componentWillUnmount=function(){this.props.onUnmount();};o.prototype.render=function(){var p=this.$MessengerTypeaheadResultView1;if(!p)return null;return c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,"_4p-s"),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:false,listSections:c('MessengerTypeaheadUtils').buildListSections(p,this.props.queryString),onHighlight:this.$MessengerTypeaheadResultView3,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer});};o.prototype.$MessengerTypeaheadResultView2=function(p){var q=p.localEntries,r={};q.forEach(function(u){r[u.getUniqueID()]=true;});var s=c('MessengerTypeaheadUtils').sortEntries(this.$MessengerTypeaheadResultView4(p,r),p.queryString),t=q.concat(s).filter(function(u){return !p.selectedEntryIDs.contains(u.getUniqueID());}).slice(0,l);c('MessengerSearchFunnelLogger').logUpdateQuery('WWW_MESSENGER_SEARCH_SESSION_FUNNEL','fetched_state_impression_list',this.props.queryString,t.map(function(u){return u.getUniqueID();}));return t;};o.prototype.$MessengerTypeaheadResultView4=function(p,q){var r=[];if(!p.profiles&&p.roomAudience){if(p.roomAudience.user_results&&p.roomAudience.user_results.edges)r=p.roomAudience.user_results.edges.map(function(fa){return c('MessengerGraphQLTypeaheadAdapter').convertProfileToEntry(fa.node);});}else if(p.profiles)r=p.profiles.user_results.edges.map(function(fa){return c('MessengerGraphQLTypeaheadAdapter').convertProfileToEntry(fa.node);});var s=[],t=[],u=[];for(var v=r,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var y;if(w){if(x>=v.length)break;y=v[x++];}else{x=v.next();if(x.done)break;y=x.value;}var z=y;if(!z||q[z.getUniqueID()])continue;if(z.getType()===c('MercuryParticipantTypes').FRIEND&&s.length<c('MercuryTypeaheadConstants').COMPOSER_FRIENDS_MAX){s.push(z);}else if(z.getType()===c('MercuryParticipantTypes').FB4C&&t.length<c('MercuryTypeaheadConstants').COMPOSER_FB4C_MAX){t.push(z);}else if(z.getType()===c('MercuryParticipantTypes').NON_FRIEND&&u.length<m)u.push(z);}r=s.concat(t).concat(u);if(p.profiles&&p.profiles.page_results)r=r.concat(p.profiles.page_results.edges.map(function(fa){return c('MessengerGraphQLTypeaheadAdapter').convertPageToEntry(fa.node,this.$MessengerTypeaheadResultView5(fa.node));}.bind(this)).filter(function(fa){return fa&&!q[fa.getUniqueID()];}).slice(0,c('MercuryTypeaheadConstants').COMPOSER_PAGES_MAX));if(p.profiles&&p.profiles.vc_results)r=r.concat(p.profiles.vc_results.edges.map(function(fa){return c('MessengerGraphQLTypeaheadAdapter').convertPageToEntry(fa.node,c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE);}));if(p.profiles&&p.profiles.internal_bot_results)r=r.concat(p.profiles.internal_bot_results.edges.map(function(fa){return c('MessengerGraphQLTypeaheadAdapter').convertPageToEntry(fa.node,c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE);}));var aa=[],ba=[];if(p.groups&&p.groups.threads_matching_name)ba=ba.concat(p.groups.threads_matching_name.edges);if(p.groups&&p.groups.threads_matching_participant_ids)ba=ba.concat(p.groups.threads_matching_participant_ids.edges);if(p.groups&&p.groups.threads_matching_participant_names)ba=ba.concat(p.groups.threads_matching_participant_names.edges);for(var ca=0;ca<ba.length;ca++){var da=ba[ca],ea=c('MessengerGraphQLTypeaheadAdapter').convertGroupToEntry(da.node,ca);if(!ea||q[ea.getUniqueID()])continue;aa.push(ea);q[ea.getUniqueID()]=true;}return r.concat(aa);};o.prototype.$MessengerTypeaheadResultView5=function(p){if(!p||!p.category_type)return c('MercuryParticipantTypes').PAGE;if(p.category_type===c('MercuryTypeaheadConstants').WORKPLACE_BOT_CATEGORY_TYPE)return c('MercuryTypeaheadConstants').INTERNAL_BOT_PAGE_TYPE;return c('MercuryTypeaheadConstants').PAGE_TYPE;};o.propTypes={ariaOwneeID:n.string.isRequired,className:n.string.isRequired,localEntries:n.arrayOf(n.instanceOf(c('SearchableEntry'))).isRequired,localEntryIDs:n.arrayOf(n.string.isRequired).isRequired,hasHoverState:n.bool.isRequired,highlightedEntry:n.object,onMount:n.func.isRequired,onNextHighlighted:n.func.isRequired,onScrollIntoView:n.func.isRequired,onSelect:n.func.isRequired,onSelectHighlighted:n.func.isRequired,onUnmount:n.func.isRequired,originalEntryIDs:n.instanceOf(c('immutable').Set).isRequired,queryString:n.string.isRequired,selectedEntryIDs:n.instanceOf(c('immutable').Set).isRequired,shouldQueryInternalBot:n.bool.isRequired,shouldQueryPages:n.bool.isRequired,shouldQueryParticipantIDs:n.bool.isRequired,shouldQueryParticipantNames:n.bool.isRequired,shouldQueryThreadName:n.bool.isRequired,shouldQueryVCEndpoint:n.bool.isRequired,viewer:n.string.isRequired};o.defaultProps={ariaOwneeID:'',className:''};f.exports=c('Relay').createContainer(o,{initialVariables:{friendEntryCount:k,queryString:'',localEntryIDs:[],shouldQueryPages:false,shouldQueryThreadName:false,shouldQueryParticipantIDs:false,shouldQueryParticipantNames:false,shouldQueryRoomsAudience:false,shouldQueryVCEndpoint:false,shouldQueryInternalBot:false,shouldQueryMessengerOnlyUsersForWebMessenger:true},fragments:{profiles:function p(q){var r=q.friendEntryCount,s=q.shouldQueryPages,t=q.shouldQueryVCEndpoint,u=q.shouldQueryMessengerOnlyUsersForWebMessenger;return function(v,w,x,y,z){return {children:[{alias:'user_results',calls:[{kind:'Call',metadata:{type:'[SearchEntityType]'},name:'of_type',value:{kind:'CallValue',callValue:'user'}},{kind:'Call',metadata:{},name:'include_messenger_only_results_for_web_messenger',value:{kind:'CallVariable',callVariableName:'shouldQueryMessengerOnlyUsersForWebMessenger'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'friendEntryCount'}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(v),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true,isRequisite:true},type:'Searchable'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'SearchableResultsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'skip',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryRoomsAudience'}}]}],fieldName:'search_results',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'SearchableResultsConnection'},{alias:'page_results',calls:[{kind:'Call',metadata:{},name:'messenger_commerce',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{},name:'include_games',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:5}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(w),c('RelayQL').__frag(x),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true,isRequisite:true},type:'Searchable'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'SearchableResultsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryPages'}}]}],fieldName:'search_results',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'SearchableResultsConnection'},{alias:'vc_results',calls:[{kind:'Call',metadata:{},name:'vc_endpoint',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:20}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(y),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true,isRequisite:true},type:'Searchable'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'SearchableResultsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryVCEndpoint'}}]}],fieldName:'search_results',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'SearchableResultsConnection'},{alias:'internal_bot_results',calls:[{kind:'Call',metadata:{},name:'internal_bot',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:20}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(z),{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,isAbstract:true,isRequisite:true},type:'Searchable'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'SearchableResultsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryInternalBot'}}]}],fieldName:'search_results',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'SearchableResultsConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerTypeaheadResultView_react_ProfilesRelayQL',type:'SearchableEntitiesQuery'};}(c('MessengerGraphQLTypeaheadAdapter').userFragment,c('MessengerGraphQLTypeaheadAdapter').pageFragment,c('MessengerGraphQLTypeaheadAdapter').gameFragment,c('MessengerGraphQLTypeaheadAdapter').pageFragment,c('MessengerGraphQLTypeaheadAdapter').pageFragment);},groups:function p(q){var r=q.queryString,s=q.localEntryIDs,t=q.shouldQueryThreadName,u=q.shouldQueryParticiapnts,v=q.shouldQueryParticipantNames;return function(w,x,y,z,aa,ba){return {children:[{alias:'threads_matching_name',calls:[{kind:'Call',metadata:{},name:'with_thread_name',value:{kind:'CallVariable',callVariableName:'queryString'}},{kind:'Call',metadata:{type:'Int'},name:'last',value:c('RelayQL').__var(w)}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(x)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessageThread'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'ViewerMessageThreadsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryThreadName'}}]}],fieldName:'message_threads',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'ViewerMessageThreadsConnection'},{alias:'threads_matching_participant_ids',calls:[{kind:'Call',metadata:{},name:'with_participant_ids',value:{kind:'CallVariable',callVariableName:'localEntryIDs'}},{kind:'Call',metadata:{type:'Int'},name:'last',value:c('RelayQL').__var(y)}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(z)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessageThread'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'ViewerMessageThreadsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryParticipantIDs'}}]}],fieldName:'message_threads',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'ViewerMessageThreadsConnection'},{alias:'threads_matching_participant_names',calls:[{kind:'Call',metadata:{},name:'with_participants',value:{kind:'CallVariable',callVariableName:'queryString'}},{kind:'Call',metadata:{},name:'with_group',value:{kind:'CallValue',callValue:true}},{kind:'Call',metadata:{type:'Int'},name:'last',value:c('RelayQL').__var(aa)}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(ba)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isRequisite:true},type:'MessageThread'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'ViewerMessageThreadsEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryParticipantNames'}}]}],fieldName:'message_threads',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true},type:'ViewerMessageThreadsConnection'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerTypeaheadResultView_react_GroupsRelayQL',type:'Viewer'};}(c('MercuryConfig').MaxThreadResults,c('MessengerGraphQLTypeaheadAdapter').groupFragment,c('MercuryConfig').MaxThreadResults,c('MessengerGraphQLTypeaheadAdapter').groupFragment,c('MercuryConfig').MaxThreadResults,c('MessengerGraphQLTypeaheadAdapter').groupFragment);},roomAudience:function p(q){var r=q.queryString,s=q.shouldQueryRoomsAudience;return function(t){return {children:[{alias:'user_results',calls:[{kind:'Call',metadata:{},name:'named',value:{kind:'CallVariable',callVariableName:'queryString'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallValue',callValue:10}}],children:[{children:[{children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},c('RelayQL').__frag(t)]),fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessagingActor'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'AllAudienceListOfMessageThreadEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],directives:[{kind:'Directive',name:'include',args:[{name:'if',value:{kind:'CallVariable',callVariableName:'shouldQueryRoomsAudience'}}]}],fieldName:'messaging_audience_list',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'AllAudienceListOfMessageThreadConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerTypeaheadResultView_react_RoomAudienceRelayQL',type:'MessageThread'};}(c('MessengerGraphQLTypeaheadAdapter').userFragment);}}});}),null);
__d('MessengerTypeaheadTopFriendsView.react',['cx','immutable','Keys','MessengerContactAdapters','MessengerContactList.react','MessengerGraphQLTypeaheadHighlighter','MessengerTypeaheadUtils','React','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onKeyDown=function(r){if(r===c('Keys').RETURN){this.props.onSelectHighlighted();return;}var s=c('MessengerGraphQLTypeaheadHighlighter').getNextHighlightedEntry(r,this.props.entries.toArray(),this.props.queryString,this.props.highlightedEntry);this.props.onNextHighlighted(s);}.bind(this),this.$MessengerTypeaheadTopFriendsView1=function(r){this.props.onNextHighlighted(r);}.bind(this),n;}l.prototype.componentWillMount=function(){if(this.props.hasHoverState)if(this.props.entries.size>0)this.props.onNextHighlighted(this.props.entries.first());};l.prototype.componentDidMount=function(){this.props.onMount(this.onKeyDown);};l.prototype.componentWillUnmount=function(){this.props.onUnmount();};l.prototype.render=function(){return c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,"_4p-s"),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:!!this.props.queryString,listSections:c('MessengerTypeaheadUtils').buildListSections(this.props.entries.toArray(),this.props.queryString),onHighlight:this.$MessengerTypeaheadTopFriendsView1,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer});};l.propTypes={ariaOwneeID:k.string.isRequired,className:k.string.isRequired,entries:k.instanceOf(c('immutable').List).isRequired,hasHoverState:k.bool.isRequired,highlightedEntry:k.object,onNextHighlighted:k.func.isRequired,onMount:k.func.isRequired,onScrollIntoView:k.func.isRequired,onSelect:k.func.isRequired,onSelectHighlighted:k.func.isRequired,onUnmount:k.func.isRequired,originalEntryIDs:k.instanceOf(c('immutable').Set).isRequired,queryString:k.string.isRequired,selectedEntryIDs:k.instanceOf(c('immutable').Set).isRequired,viewer:k.string.isRequired};l.defaultProps={ariaOwneeID:'',className:''};f.exports=l;}),null);
__d('MessengerGraphQLTypeaheadView.react',['CurrentUser','immutable','MercuryParticipantTypes','MercuryTypeaheadConstants','MessengerRoomPrivacyMode','MessengerRoomWithAssocObjectAudienceLocalCacheManager','MessengerSearchFunnelLogger','MessengerTypeaheadLocalCache','MessengerTypeaheadResultRoute','MessengerTypeaheadResultView.react','MessengerTypeaheadTopFriendsView.react','MessengerTypeaheadUtils','React','RelayRootContainer','createCancelableFunction','debounce'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k='WWW_MESSENGER_SEARCH_SESSION_FUNNEL',l=5,m=100;h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.state={route:null,localEntries:c('immutable').List(),highlightedEntry:null},this.$MessengerGraphQLTypeaheadView1=null,this.$MessengerGraphQLTypeaheadView2=null,this.$MessengerGraphQLTypeaheadView3=null,this.$MessengerGraphQLTypeaheadView4=true,this.$MessengerGraphQLTypeaheadView5=c('MessengerRoomWithAssocObjectAudienceLocalCacheManager').get(),this.$MessengerGraphQLTypeaheadView9=function(t){this.$MessengerGraphQLTypeaheadView3=t;}.bind(this),this.$MessengerGraphQLTypeaheadView12=function(){this.$MessengerGraphQLTypeaheadView3=null;}.bind(this),this.$MessengerGraphQLTypeaheadView10=function(t){this.setState({highlightedEntry:t});}.bind(this),this.$MessengerGraphQLTypeaheadView11=function(){if(this.state.highlightedEntry)this.props.onSelect(this.state.highlightedEntry);}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerGraphQLTypeaheadView6();this.$MessengerGraphQLTypeaheadView2=c('debounce')(function(){if(this.$MessengerGraphQLTypeaheadView4){var o=new (c('MessengerTypeaheadResultRoute'))(this.$MessengerGraphQLTypeaheadView7());this.setState({route:o});}}.bind(this),150,this,true);};n.prototype.componentWillReceiveProps=function(o){this.setState({highlightedEntry:null});if(!o.queryString){this.$MessengerGraphQLTypeaheadView6();}else if(o.queryString!==this.props.queryString){this.$MessengerGraphQLTypeaheadView2&&this.$MessengerGraphQLTypeaheadView2();var p=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(p===c('MessengerRoomPrivacyMode').WHITELISTED_MODE){this.$MessengerGraphQLTypeaheadView8(o);return;}c('MessengerTypeaheadLocalCache').search(o.queryString,function(q,r){if(this.$MessengerGraphQLTypeaheadView4)if(r===o.queryString){var s=c('MessengerTypeaheadUtils').sortEntries(q,r).slice(0,this.props.maxEntries),t=this.props.enableMessageSearch?c('MessengerTypeaheadUtils').getMessageSearchEntry(r):null;if(t)s.unshift(t);var u=c('immutable').List(s).filter(function(v){if(this.props.excludeGroups&&v.getType()===c('MercuryParticipantTypes').THREAD)return false;if(this.props.excludePages&&v.getType()===c('MercuryParticipantTypes').PAGE)return false;return true;}.bind(this));this.setState({localEntries:u});}}.bind(this));}};n.prototype.shouldComponentUpdate=function(o,p){return o.queryString!==this.props.queryString||o.isFocused!==this.props.isFocused||p.localEntries!==this.state.localEntries||p.route!==this.state.route||p.highlightedEntry!==this.state.highlightedEntry;};n.prototype.componentWillUnmount=function(){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1.cancel();this.$MessengerGraphQLTypeaheadView4=false;};n.prototype.render=function(){if(!this.props.isFocused&&!this.props.queryString||!c('MessengerTypeaheadLocalCache').isBootstrapped()&&!this.$MessengerGraphQLTypeaheadView5.isBootstrapped(this.props.threadFBID))return null;if(!this.props.queryString||!this.state.route){c('MessengerSearchFunnelLogger').logUpdateQuery(k,'null_state_impression','',this.state.localEntries.toArray().map(function(q){return q.getUniqueID();}));return c('React').createElement(c('MessengerTypeaheadTopFriendsView.react'),{className:this.props.typeaheadViewClassName,entries:this.state.localEntries,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onMount:this.$MessengerGraphQLTypeaheadView9,onNextHighlighted:this.$MessengerGraphQLTypeaheadView10,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView11,onUnmount:this.$MessengerGraphQLTypeaheadView12,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer});}var o=this.$MessengerGraphQLTypeaheadView7(),p=this.state.localEntries.slice(0,l);return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerTypeaheadResultView.react'),route:this.state.route,renderLoading:function(){return c('React').createElement(c('MessengerTypeaheadTopFriendsView.react'),{className:this.props.typeaheadViewClassName,entries:this.$MessengerGraphQLTypeaheadView13(p),hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,onNextHighlighted:this.$MessengerGraphQLTypeaheadView10,onMount:this.$MessengerGraphQLTypeaheadView9,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView11,onUnmount:this.$MessengerGraphQLTypeaheadView12,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer});}.bind(this),renderFetched:function(q){return c('React').createElement(c('MessengerTypeaheadResultView.react'),babelHelpers['extends']({},q,{className:this.props.typeaheadViewClassName,hasHoverState:this.props.hasHoverState,highlightedEntry:this.state.highlightedEntry,localEntries:p.toArray(),onMount:this.$MessengerGraphQLTypeaheadView9,onNextHighlighted:this.$MessengerGraphQLTypeaheadView10,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,onSelectHighlighted:this.$MessengerGraphQLTypeaheadView11,onUnmount:this.$MessengerGraphQLTypeaheadView12,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,viewer:this.props.viewer},o));}.bind(this)});};n.prototype.$MessengerGraphQLTypeaheadView13=function(o){var p=o.filter(function(q){return !this.props.selectedEntryIDs.contains(q.getUniqueID());}.bind(this));c('MessengerSearchFunnelLogger').logLoadingStateQuery(k,this.props.queryString,p.toArray().map(function(q){return q.getUniqueID();}));return p;};n.prototype.onKeyDown=function(o){this.$MessengerGraphQLTypeaheadView3&&this.$MessengerGraphQLTypeaheadView3(o);};n.prototype.$MessengerGraphQLTypeaheadView8=function(o){this.$MessengerGraphQLTypeaheadView5.search(o.threadFBID,o.queryString,function(p,q){if(this.$MessengerGraphQLTypeaheadView4)if(q===o.queryString){var r=c('MessengerTypeaheadUtils').sortEntries(p,q).slice(0,this.props.maxEntries);this.setState({localEntries:c('immutable').List(r)});}}.bind(this));};n.prototype.$MessengerGraphQLTypeaheadView14=function(){this.setState({localEntries:c('immutable').List()});this.$MessengerGraphQLTypeaheadView1=c('createCancelableFunction')(function(o){var p=o.slice(0,30);this.setState({localEntries:c('immutable').List(p)});}.bind(this));this.$MessengerGraphQLTypeaheadView5.onEntriesLoaded(this.props.threadFBID,function(o){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(o);this.$MessengerGraphQLTypeaheadView1=null;}.bind(this));};n.prototype.$MessengerGraphQLTypeaheadView6=function(){var o=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode;if(o===c('MessengerRoomPrivacyMode').WHITELISTED_MODE){this.$MessengerGraphQLTypeaheadView14();return;}this.setState({localEntries:c('immutable').List()});this.$MessengerGraphQLTypeaheadView1=c('createCancelableFunction')(function(p,q,r){var s=p.slice(0,50);if(!this.props.excludeGroups)s=s.concat(q);if(!r||!this.props.queryString){var t=this.props.enableMessageSearch?c('MessengerTypeaheadUtils').getMessageSearchEntry(this.props.queryString):null;if(t)s.unshift(t);this.setState({localEntries:c('immutable').List(s)});}}.bind(this));c('MessengerTypeaheadLocalCache').onEntriesLoaded(function(p,q,r){if(this.$MessengerGraphQLTypeaheadView1)this.$MessengerGraphQLTypeaheadView1(p,q,r);this.$MessengerGraphQLTypeaheadView1=null;}.bind(this));};n.prototype.$MessengerGraphQLTypeaheadView7=function(){var o=this.state.localEntries.toArray(),p=o.filter(function(z){return z.getType()!==c('MercuryTypeaheadConstants').SEARCH_TYPE;}).map(function(z){return z.getUniqueID();}),q=this.props.roomAssociatedObject&&this.props.roomAssociatedObject.privacy_mode,r=q===c('MessengerRoomPrivacyMode').WHITELISTED_MODE,s=!this.props.excludeGroups&&this.props.queryString&&this.props.queryString.length>1&&!r,t=!this.props.excludeGroups&&p.length>0&&!r,u=!this.props.excludeGroups&&(!t||c('CurrentUser').isEmployee())&&!r,v=!this.props.excludePages&&!r,w=this.props.shouldQueryVCEndpoint&&(c('CurrentUser').isEmployee()||c('CurrentUser').isWorkUser())&&!r,x=this.props.shouldQueryInternalBot&&c('CurrentUser').isEmployee()&&c('CurrentUser').isWorkUser()&&!r,y=this.props.threadFBID;return {queryString:this.props.queryString,localEntryIDs:p,shouldQueryPages:v,shouldQueryThreadName:s,shouldQueryParticipantIDs:t,shouldQueryParticipantNames:u,shouldQueryVCEndpoint:w,shouldQueryInternalBot:x,shouldQueryRoomsAudience:r,threadFBID:y};};n.propTypes={enableMessageSearch:j.bool.isRequired,excludeGroups:j.bool.isRequired,excludePages:j.bool.isRequired,isFocused:j.bool.isRequired,hasHoverState:j.bool.isRequired,maxEntries:j.number.isRequired,onScrollIntoView:j.func.isRequired,onSelect:j.func.isRequired,originalEntryIDs:j.instanceOf(c('immutable').Set).isRequired,queryString:j.string.isRequired,roomAssociatedObject:j.object,selectedEntryIDs:j.instanceOf(c('immutable').Set).isRequired,shouldQueryInternalBot:j.bool.isRequired,shouldQueryVCEndpoint:j.bool.isRequired,threadFBID:j.string,typeaheadViewClassName:j.string.isRequired,viewer:j.string.isRequired};n.defaultProps={maxEntries:m,typeaheadViewClassName:''};f.exports=n;}),null);
__d('MessengerScrollableArea.react',['cx','React','ReactDOM','ScrollableArea.react','Style','UserAgent','clearImmediate','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=20;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),n.call(this),p;}m.prototype.componentDidMount=function(){this.$MessengerScrollableArea2=c('setImmediate')(this.$MessengerScrollableArea4);this.$MessengerScrollableArea1=true;this.$MessengerScrollableArea3=c('throttle')(this.$MessengerScrollableArea5,50);};m.prototype.componentWillUnmount=function(){c('clearImmediate')(this.$MessengerScrollableArea2);this.$MessengerScrollableArea1=false;};m.prototype.render=function(){return c('React').createElement(c('ScrollableArea.react'),{className:c('joinClasses')("_5f0v",this.props.className),height:this.props.height,onScroll:this.props.needsFastScrollHandler?this.$MessengerScrollableArea5:this.$MessengerScrollableArea3,ref:'scrollable',shadow:false,tabIndex:this.props.tabIndex,width:this.props.width},this.props.children);};m.prototype.scrollToPosition=function(o){var p=arguments.length<=1||arguments[1]===undefined?false:arguments[1],q=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],r=this.getArea();if(!r)return;r.setScrollTop(o,p,q);};m.propTypes={needsFastScrollHandler:k.bool,onScroll:k.func,width:k.number};var n=function o(){this.$MessengerScrollableArea1=false;this.$MessengerScrollableArea2=null;this.$MessengerScrollableArea5=function(){if(this.$MessengerScrollableArea1){var p;this.props.onScroll&&(p=this.props).onScroll.apply(p,arguments);}}.bind(this);this.$MessengerScrollableArea4=function(){if(!c('UserAgent').isBrowser('IE'))return;var p=this.refs.scrollable.refs.wrap,q=this.refs.scrollable.refs.body;if(!q||!p)return;q=c('ReactDOM').findDOMNode(q);p=c('ReactDOM').findDOMNode(p);var r=p.offsetWidth-p.clientWidth;if(r>0)c('Style').set(q,'margin-right',-r+'px');}.bind(this);this.getArea=function(){return this.refs.scrollable.getArea();}.bind(this);this.scrollToBottom=function(){var p=this.getArea();if(p)this.scrollToPosition(p.getScrollHeight());}.bind(this);this.scrollToTop=function(p){var q=this.getArea();if(q)q.scrollToTop(!!p);}.bind(this);this.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0);}.bind(this);this.isScrolledToBottomWithHeight=function(p){var q=this.getArea();if(!q)return false;return q.getScrollTop()+q.getClientHeight()+p>=q.getScrollHeight()-l;}.bind(this);this.isScrolledToTop=function(){var p=this.getArea();if(!p)return true;return p.getScrollTop()<=l;}.bind(this);this.getScrollTop=function(){var p=this.getArea();if(!p)return 0;return p.getScrollTop();}.bind(this);};f.exports=m;}),null);
__d('MessengerGraphQLSearchTypeahead.react',['cx','ix','BootloadOnRender.react','ContextualLayer.react','Event','Image.react','immutable','InstantGameContextType','JSResource','Keys','LazyComponent.react','MercuryIDs','MercuryThreadIDMap','MercuryThreads','MercuryTypeaheadConstants','MercuryVanityIDMap','MessagingSourceEnum','MessengerActions','MessengerGraphQLTypeaheadView.react','MessengerScrollableArea.react','MessengerSearchFunnelLogger','MessengerSpinner.react','MessengerTypeaheadUtils','MNPlatformTagsDataManager','QuicksilverSources','React','ReactDOM','ReactLayeredComponentMixin_DEPRECATED','clearImmediate','emptyFunction','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('MercuryThreadIDMap').get(),k=c('MercuryThreads').get(),l=c('React').PropTypes,m=i("86933"),n=30,o=100,p=c('React').createClass({displayName:'MessengerGraphQLSearchTypeahead',mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],_input:null,_timer:null,_view:null,propTypes:{className:l.string.isRequired,context:l.object,enableMessageSearch:l.bool.isRequired,excludeGroups:l.bool.isRequired,excludePages:l.bool.isRequired,hasHoverState:l.bool.isRequired,hideClearButton:l.bool.isRequired,hideResults:l.bool,isFacebookChat:l.bool.isRequired,isFocused:l.bool.isRequired,isTokenizer:l.bool.isRequired,onBackspace:l.func.isRequired,onBlur:l.func.isRequired,onChange:l.func.isRequired,onClear:l.func.isRequired,onClick:l.func.isRequired,onFocus:l.func.isRequired,onScrollIntoView:l.func.isRequired,onSelect:l.func.isRequired,originalEntryIDs:l.instanceOf(c('immutable').Set).isRequired,placeholder:l.string.isRequired,queryString:l.string.isRequired,roomAssociatedObject:l.object,scrollableViewClassName:l.string.isRequired,selectedEntryIDs:l.instanceOf(c('immutable').Set).isRequired,shouldQueryInternalBot:l.bool.isRequired,shouldQueryVCEndpoint:l.bool.isRequired,tabIndex:l.number,threadFBID:l.string,typeaheadViewClassName:l.string.isRequired,useLayer:l.bool.isRequired,viewer:l.string.isRequired,width:l.number},getInitialState:function q(){return {gameID:null};},getDefaultProps:function q(){return {isFacebookChat:false,isTokenizer:false,onBackspace:c('emptyFunction'),onChange:c('emptyFunction'),onClear:c('emptyFunction'),onClick:c('emptyFunction'),onScrollIntoView:c('emptyFunction'),originalEntryIDs:c('immutable').Set(),placeholder:'',scrollableViewClassName:'',selectedEntryIDs:c('immutable').Set(),typeaheadViewClassName:'',useLayer:false};},componentDidMount:function q(){this._timer=c('setImmediate')(this._syncInputWidth);},componentDidUpdate:function q(){clearTimeout(this._timer);this._timer=c('setImmediate')(this._syncInputWidth);},componentWillUnmount:function q(){clearTimeout(this._timer);},renderLayers:function q(){if(!this.props.useLayer)return {};var r=null,s=null;if(this.props.context){r=this.props.context;}else s=function(){return this._input;}.bind(this);return {typeaheadView:c('React').createElement(c('ContextualLayer.react'),{context:r,contextRef:s,position:"below",shown:this.props.queryString&&this.props.isFocused,shouldSetARIAProperties:false},this._renderView())};},render:function q(){var r=this.props.useLayer?null:this._renderView();return c('React').createElement('div',{className:(!this.props.isTokenizer?"_3rh8":'')+(this.props.isTokenizer?' '+"_3mkz":'')},c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_58ah"+(this.props.hideResults?' '+"_1a03":'')),onChange:this.props.onChange,onSelect:c('emptyFunction'),tabIndex:null},c('React').createElement('label',{className:"_58ak"},c('React').createElement('input',{className:"_58al",disabled:this.props.hideResults,onBlur:this._handleBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onKeyDown:function(s){return this._handleKeyDown(s);}.bind(this),placeholder:this.props.placeholder,ref:function(s){return this._input=s;}.bind(this),spellCheck:false,tabIndex:this.props.tabIndex,type:'text',value:this.props.queryString})),r),c('React').createElement(c('Image.react'),{onMouseDown:this.props.onClear,className:(this.props.hideClearButton?"hidden_elem":'')+(' '+"_2xme"),src:m}),c('React').createElement('span',{ref:'textSizeProxy',className:"_58-3",'aria-hidden':'true'},this.props.queryString||this.props.placeholder),this._renderGame());},focusInput:function q(){this._input&&this._input.focus();},_syncInputWidth:function q(){if(!this.props.isTokenizer)return;var r=c('ReactDOM').findDOMNode(this.refs.textSizeProxy),s=r?r.offsetWidth:0;if(s===0)return;if(this._input)this._input.style.width=s+'px';},_renderGame:function q(){if(!this.state.gameID)return null;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerGamesQuicksilverPlayerContainer.react').__setRef('MessengerGraphQLSearchTypeahead.react'),placeholder:c('React').createElement(c('MessengerSpinner.react'),null),component:c('React').createElement(c('LazyComponent.react'),{contextType:c('InstantGameContextType').SOLO,contextSourceID:null,gameID:this.state.gameID,onHide:this._handleHideGame,source:c('QuicksilverSources').MESSENGER_GAME_SEARCH,sourceID:null})});},_renderView:function q(){if(!this.props.queryString&&!this.props.isFocused)return null;var r=this.props.isTokenizer?n:o,s=c('React').createElement(c('MessengerGraphQLTypeaheadView.react'),{enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,isFocused:this.props.isFocused,hasHoverState:this.props.hasHoverState,maxEntries:r,onScrollIntoView:this._handleScrollIntoView,onSelect:this._handleSelect,originalEntryIDs:this.props.originalEntryIDs,queryString:this.props.queryString,ref:function(t){return this._view=t;}.bind(this),roomAssociatedObject:this.props.roomAssociatedObject,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,selectedEntryIDs:this.props.selectedEntryIDs,threadFBID:this.props.threadFBID,typeaheadViewClassName:this.props.typeaheadViewClassName,viewer:this.props.viewer});if(this.props.isTokenizer){return c('React').createElement(c('MessengerScrollableArea.react'),{className:this.props.scrollableViewClassName,ref:'scrollable',width:this.props.width},s);}else return s;},_handleScrollIntoView:function q(r){if(!r)return;if(!this.props.isTokenizer){this.props.onScrollIntoView(r);return;}if(this.refs.scrollable)c('MessengerTypeaheadUtils').scrollEntryIntoView(r,this.refs.scrollable);},_handleSelect:function q(r,event){var s=r.getUniqueID(),t=r.getType(),u=r.getAuxiliaryData().alias;if(u)c('MercuryVanityIDMap').set(u,c('MercuryIDs').getParticipantIDFromUserID(s));if(t===c('MercuryTypeaheadConstants').SEARCH_TYPE){c('MessengerSearchFunnelLogger').logContentSearchInitiation('WWW_MESSENGER_SEARCH_SESSION_FUNNEL',this.props.queryString);c('MessengerActions').changeQueryAll(this.props.queryString);}else if(t===c('MercuryTypeaheadConstants').GAME_TYPE){this.setState({gameID:s});}else if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){j.getClientIDFromServerID(s,function(v){return this.props.onSelect(v,t,r);}.bind(this));}else{k.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(s),function(v){return this.props.onSelect(v.thread_id,t,r);}.bind(this));c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(c('MessagingSourceEnum').MESSENGER_WEB_SEARCH,s);}},_handleHideGame:function q(){this.setState({gameID:null});},_handleKeyDown:function q(r){var s=r.keyCode;if(s===c('Keys').DOWN||s===c('Keys').UP||s===c('Keys').RETURN){this._view&&this._view.onKeyDown&&this._view.onKeyDown(s);}else if(s===c('Keys').BACKSPACE){this.props.onBackspace(r);}else if(s===c('Keys').ESC)this._input&&this._input.blur();},_handleBlur:function q(){var r=null,s=c('Event').listen(window,'blur',function(){s.remove();c('clearImmediate')(r);});r=c('setImmediate')(function(){s.remove();this.props.onBlur();}.bind(this));}});f.exports=p;}),null);
__d('MessengerTokenizerToken.react',['cx','Keys','React','SearchableEntry','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=100;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerTokenizerToken2=function(event){if(event.keyCode===c('Keys').BACKSPACE){event.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}}.bind(this),o;}m.prototype.render=function(){return c('React').createElement('span',{className:c('joinClasses')(this.props.className,"_14-8"),label:null,onClick:this.$MessengerTokenizerToken1,onKeyDown:this.$MessengerTokenizerToken2,role:'option',tabIndex:this.props.index+l},c('React').createElement('span',{'aria-label':this.props.label,title:this.props.label,className:"_14-9"},this.props.label));};m.prototype.$MessengerTokenizerToken1=function(event){event.stopPropagation();};m.propTypes={className:k.string,entry:k.instanceOf(c('SearchableEntry')),index:k.number,label:k.string.isRequired,onRemove:k.func};f.exports=m;}),null);
__d('MessengerGraphQLTokenizer.react',['cx','invariant','immutable','MessengerGraphQLSearchTypeahead.react','MessengerTokenizerToken.react','React','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={focused:this.props.autoFocus,queryString:''},this.focusInput=function(){this.refs.typeahead&&this.refs.typeahead.focusInput();}.bind(this),this.$MessengerGraphQLTokenizer3=function(event){if(this.state.queryString||this.props.entries.size===0)return;this.$MessengerGraphQLTokenizer7(this.props.entries.last());event.preventDefault();c('setImmediate')(this.focusInput);}.bind(this),this.$MessengerGraphQLTokenizer4=function(event){event.target instanceof HTMLInputElement||i(0);this.setState({queryString:event.target.value});}.bind(this),this.$MessengerGraphQLTokenizer5=function(){this.setState({queryString:''});this.props.onClear&&this.props.onClear();}.bind(this),this.$MessengerGraphQLTokenizer6=function(s,t,u){var v=this.props.entries,w=u.getUniqueID();if(this.props.originalEntryIDs.contains(w)){return;}else if(v.some(function(x){return x.getUniqueID()===w;})){this.$MessengerGraphQLTokenizer7(u);return;}this.props.onAddEntryAttempt(u);this.setState({queryString:''});}.bind(this),this.$MessengerGraphQLTokenizer7=function(s){this.props.onRemoveEntryAttempt(s);}.bind(this),this.$MessengerGraphQLTokenizer2=function(s){this.focusInput();}.bind(this),o;}m.prototype.componentDidMount=function(){if(this.props.autoFocus)c('setImmediate')(this.focusInput);};m.prototype.render=function(){var n=this.props.entries.map(function(q,r){return this.$MessengerGraphQLTokenizer1(q,r);}.bind(this)),o=n.size>0?'':this.props.placeholder,p=this.props.forceHideClearButton||this.state.queryString===''&&this.props.entries.isEmpty();return c('React').createElement('div',null,c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_14-7")},c('React').createElement('div',{className:c('joinClasses')("_58-2",'clearfix'),onClick:this.$MessengerGraphQLTokenizer2},n,c('React').createElement(c('MessengerGraphQLSearchTypeahead.react'),{className:"_58-0",context:this.props.context,enableMessageSearch:this.props.enableMessageSearch,excludeGroups:this.props.excludeGroups,excludePages:this.props.excludePages,hasHoverState:this.props.hasHoverState,hideClearButton:p,isFacebookChat:false,isFocused:this.state.focused,isTokenizer:true,onBlur:function(){return this.setState({focused:false});}.bind(this),onBackspace:this.$MessengerGraphQLTokenizer3,onChange:this.$MessengerGraphQLTokenizer4,onClear:this.$MessengerGraphQLTokenizer5,onFocus:function(){return this.setState({focused:true});}.bind(this),onSelect:this.$MessengerGraphQLTokenizer6,originalEntryIDs:this.props.originalEntryIDs,placeholder:o,queryString:this.state.queryString,ref:'typeahead',roomAssociatedObject:this.props.roomAssociatedObject,selectedEntryIDs:c('immutable').Seq(this.props.entries).map(function(q){return q.getUniqueID();}).toSet(),scrollableViewClassName:this.props.scrollableViewClassName,shouldQueryInternalBot:this.props.shouldQueryInternalBot,shouldQueryVCEndpoint:this.props.shouldQueryVCEndpoint,tabIndex:this.props.tabIndex,threadFBID:this.props.threadFBID,useLayer:this.props.useLayer,viewer:this.props.viewer,width:this.props.width}))),this.state.queryString===''&&!this.state.focused?this.props.defaultEntries:null);};m.prototype.$MessengerGraphQLTokenizer1=function(n,o){return c('React').createElement(c('MessengerTokenizerToken.react'),{className:"_2ei6",key:n.getUniqueID(),label:n.getTitle(),entry:n,index:o,onRemove:this.$MessengerGraphQLTokenizer7});};m.propTypes={autoFocus:l.bool.isRequired,className:l.string.isRequired,context:l.object,defaultEntries:l.element,enableMessageSearch:l.bool.isRequired,entries:l.instanceOf(c('immutable').List).isRequired,excludeGroups:l.bool.isRequired,excludePages:l.bool.isRequired,forceHideClearButton:l.bool,hasHoverState:l.bool.isRequired,onAddEntryAttempt:l.func.isRequired,onClear:l.func,onRemoveEntryAttempt:l.func.isRequired,originalEntryIDs:l.instanceOf(c('immutable').Set).isRequired,placeholder:l.node.isRequired,roomAssociatedObject:l.object,scrollableViewClassName:l.string.isRequired,shouldQueryInternalBot:l.bool.isRequired,shouldQueryVCEndpoint:l.bool.isRequired,tabIndex:l.number,threadFBID:l.string,useLayer:l.bool.isRequired,viewer:l.string.isRequired,width:l.number.isRequired};f.exports=m;}),null);
__d('MessengerTabIndices',[],(function a(b,c,d,e,f,g){'use strict';var h={NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999};f.exports=h;}),null);
__d('MessengerComposeViewHeader.react',['cx','fbt','immutable','MessengerGraphQLTokenizer.react','MessengerTabIndices','React','clearImmediate','joinClasses','setImmediate'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=320;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={tokenizerContext:null},this.$MessengerComposeViewHeader1=null,this.$MessengerComposeViewHeader2=function(){this.$MessengerComposeViewHeader1=c('setImmediate')(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}.bind(this));}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerComposeViewHeader2();this.setState({tokenizerContext:this.refs.tokenizerContext});};n.prototype.componentDidUpdate=function(o){if(this.props.recipients!==o.recipients)this.props.onResize();};n.prototype.componentWillUnmount=function(){this.$MessengerComposeViewHeader1&&c('clearImmediate')(this.$MessengerComposeViewHeader1);};n.prototype.render=function(){var o={enableMessageSearch:false,excludeGroups:false,excludePages:false,hasHoverState:true,originalEntryIDs:c('immutable').Set(),scrollableViewClassName:"_2y8_",shouldQueryInternalBot:true,shouldQueryVCEndpoint:false,width:m};return c('React').createElement('div',{className:c('joinClasses')("_2y8y _5l-3",this.props.className),onClick:this.$MessengerComposeViewHeader2,role:'presentation'},c('React').createElement('div',{className:"_2y8z"},i._("To:")),c('React').createElement('div',null,c('React').createElement(c('MessengerGraphQLTokenizer.react'),babelHelpers['extends']({autoFocus:true,className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,forceHideClearButton:this.props.forceHideClearButton,onAddEntryAttempt:this.props.onAddRecipient,onClear:this.props.onClear,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:i._("Type the name of a person or group"),ref:'tokenizer',tabIndex:c('MessengerTabIndices').NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer},o)),c('React').createElement('div',{ref:'tokenizerContext'})));};n.propTypes={forceHideClearButton:l.bool.isRequired,onAddRecipient:l.func.isRequired,onClear:l.func,onRemoveRecipient:l.func.isRequired,onResize:l.func.isRequired,recipients:l.instanceOf(c('immutable').List).isRequired,viewer:l.string.isRequired};f.exports=n;}),null);
__d('MessengerDialogCancelButton.react',['fbt','MessengerDialogButton.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('MessengerDialogButton.react'),babelHelpers['extends']({action:'cancel',label:h._("Cancel"),type:'secondary'},this.props));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','MercuryShareStyleMap','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(l.factory&&!!l.factory.getSnippetComponent){var m=l.factory.getSnippetComponent();return c('React').createElement(m,babelHelpers['extends']({},this.props,{attachment:l.attachment}));}return null;};function k(){h.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSenderViewer:j.bool,senderName:j.oneOfType([j.string,j.object])};f.exports=k;}),null);
__d('MercuryAttachmentSnippet.react',['cx','ix','fbt','EmoticonsList','Image.react','MercuryAttachment','MercuryAttachmentSnippetRenderer','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryIDs','MercuryShareAttachmentSnippet.react','MessengerTextWithEmoticons.react','MercuryParticipants','React','StickerConstants','TextWithEmoticons.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MercuryAttachmentSnippet6=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').PHOTO,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet7=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIF,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet8=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').VIDEO,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet9=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').AUDIO_CLIP,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet15=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet11=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').STICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet12=function(v){if(!!this.$MercuryAttachmentSnippet5[0].share)return c('React').createElement(c('MercuryShareAttachmentSnippet.react'),{attachment:this.$MercuryAttachmentSnippet5[0].share,senderName:v,isViewerSender:this.$MercuryAttachmentSnippet18});return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').SHARE,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet13=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIFT,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet16=function(v){return c('React').createElement('span',null,this.$MercuryAttachmentSnippet5.filter(function(w){return w.attach_type===c('MercuryAttachmentType').FILE||w.attach_type===c('MercuryAttachmentType').PHOTO||w.attach_type===c('MercuryAttachmentType').VIDEO;}).map(function(w,x){return this.$MercuryAttachmentSnippet17(w.name,w.icon_type,x);}.bind(this)));}.bind(this),this.$MercuryAttachmentSnippet17=function(v,w,x){var y=c('MercuryAttachment').getAttachIconClass(w||this.$MercuryAttachmentSnippet5[0].icon_type),z=c('joinClasses')(y,"uiIconText _3l6h");return c('React').createElement('span',{key:x},c('React').createElement('span',{className:z},c('React').createElement(c('Image.react'),{src:i("86988")})),v);}.bind(this),this.$MercuryAttachmentSnippet14=function(v){var w=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').ERROR,this.$MercuryAttachmentSnippet18,v);return this.$MercuryAttachmentSnippet17(w);}.bind(this),this.$MercuryAttachmentSnippet2=function(v){this.$MercuryAttachmentSnippet19=v.viewer;this.$MercuryAttachmentSnippet20=v.thread.snippet_sender;this.$MercuryAttachmentSnippet5=v.thread.snippet_attachments;this.$MercuryAttachmentSnippet18=p(this.$MercuryAttachmentSnippet20,this.$MercuryAttachmentSnippet19);}.bind(this),this.$MercuryAttachmentSnippet1=function(v){if(!v)return;this.$MercuryAttachmentSnippet3();if(!c('MercuryParticipants').getNow(v))this.$MercuryAttachmentSnippet21=c('MercuryParticipants').get(v,function(w){return this.forceUpdate();}.bind(this));}.bind(this),this.$MercuryAttachmentSnippet3=function(){this.$MercuryAttachmentSnippet21&&this.$MercuryAttachmentSnippet21.remove();}.bind(this),r;}n.prototype.componentWillMount=function(){this.$MercuryAttachmentSnippet1(this.props.thread.snippet_sender);this.$MercuryAttachmentSnippet2(this.props);};n.prototype.componentWillReceiveProps=function(q){this.$MercuryAttachmentSnippet1(q.thread.snippet_sender);this.$MercuryAttachmentSnippet2(q);};n.prototype.componentWillUnmount=function(){this.$MercuryAttachmentSnippet3();};n.prototype.render=function(){var q=this.$MercuryAttachmentSnippet4(),r=c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(this.$MercuryAttachmentSnippet5);switch(r){case c('MercuryAttachmentSnippetType').PHOTO:return this.$MercuryAttachmentSnippet6(q);case c('MercuryAttachmentSnippetType').GIF:return this.$MercuryAttachmentSnippet7(q);case c('MercuryAttachmentSnippetType').VIDEO:return this.$MercuryAttachmentSnippet8(q);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return this.$MercuryAttachmentSnippet9(q);case c('MercuryAttachmentSnippetType').LIKE_STICKER:return this.$MercuryAttachmentSnippet10(q);case c('MercuryAttachmentSnippetType').STICKER:return this.$MercuryAttachmentSnippet11(q);case c('MercuryAttachmentSnippetType').SHARE:return this.$MercuryAttachmentSnippet12(q);case c('MercuryAttachmentSnippetType').GIFT:return this.$MercuryAttachmentSnippet13(q);case c('MercuryAttachmentSnippetType').ERROR:return this.$MercuryAttachmentSnippet14(q);case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return this.$MercuryAttachmentSnippet15(q);default:return this.$MercuryAttachmentSnippet16(q);}};n.prototype.$MercuryAttachmentSnippet10=function(q){var r=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,text:c('EmoticonsList').symbols.like});if(this.$MercuryAttachmentSnippet18){return c('React').createElement('span',null,j._("You: {conversation_snippet}",[j.param('conversation_snippet',r)]));}else return this.props.thread.is_canonical?c('React').createElement('span',null,j._("{conversation_snippet}",[j.param('conversation_snippet',r)])):c('React').createElement('span',null,j._("{sender name}: {conversation_snippet}",[j.param('sender name',q),j.param('conversation_snippet',r)]));};n.prototype.$MercuryAttachmentSnippet4=function(){if(!this.$MercuryAttachmentSnippet20||this.$MercuryAttachmentSnippet18)return null;var q=c('MercuryParticipants').getNow(this.$MercuryAttachmentSnippet20);if(!q)return null;var r=c('MercuryIDs').getUserIDFromParticipantID(this.$MercuryAttachmentSnippet20),s=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[r];if(s)s=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return s?s:q.short_name;};n.propTypes={thread:m.object.isRequired,viewer:m.string.isRequired};function o(q){return q==c('StickerConstants').LIKE_STICKER_ID||q==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||q==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||q==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;}function p(q,r){return !!(q&&c('MercuryIDs').getParticipantIDFromUserID(r)==q);}f.exports=n;}),null);
__d('MNAdsLogMessageUtils',['MercuryConfig','MessagingTag','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','AdPageMessageTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryConfig').LOG_INTERVAL_MS||60000;function i(){this.$MNAdsLogMessageUtils1={};}i.prototype.isLoggedWithinInterval=function(j){if(this.$MNAdsLogMessageUtils1[j]&&this.$MNAdsLogMessageUtils1[j]-Date.now()<h)return true;return false;};i.prototype.setLoggingTime=function(j){this.$MNAdsLogMessageUtils1[j]=Date.now();};i.prototype.logAdsThreadListImpression=function(j){switch(j.folder){case c('MessagingTag').INBOX:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_INBOX);break;case c('MessagingTag').PENDING:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_REQUEST);break;default:return;}};i.prototype.logWithThreadMetaData=function(j,event){if(j.last_message_type!==c('AdPageMessageTypeEnum').NON_AD){var k=j.last_message_timestamp+String(event);if(!c('MercuryConfig').MercuryThreadListEnableImpressionLog||this.isLoggedWithinInterval(k))return;new (c('MessengerAdsWebTypedLogger'))().setEvent(event).setMessageTimestamp(j.last_message_timestamp).setPageID(j.other_user_fbid).log();this.setLoggingTime(k);}};f.exports=new i();}),null);
__d('MercuryThreadSnippet.react',['cx','fbt','immutable','MercuryAttachmentSnippet.react','MercuryIDs','MessengerTextWithEmoticons.react','MNAdsLogMessageUtils','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(p){return this.props.shouldRenderYou!==p.shouldRenderYou||this.props.thread!==p.thread||this.props.viewer!==p.viewer||this.props.className!==p.className||!c('immutable').is(p.participants,this.props.participants);};m.prototype.render=function(){return c('React').createElement('span',{className:this.props.className},this.$MercuryThreadSnippet1(),this.$MercuryThreadSnippet2());};m.prototype.$MercuryThreadSnippet1=function(){if(!this.props.thread.snippet||!n(this.props.thread))return null;return c('React').createElement('span',{className:"_j0r"});};m.prototype.$MercuryThreadSnippet2=function(){var p=this.props.thread,q=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),r=p.snippet,s=this.props.shouldRenderYou;if(p.snippetCount!=null)return i._({"*":"{number} results","268435456":"1 result"},[i.plural(p.snippetCount,'number')]);if(p.snippet_attachments&&p.snippet_attachments.length>0||!p.snippet_sender)return this.$MercuryThreadSnippet3(r);var t=this.$MercuryThreadSnippet3(r);c('MNAdsLogMessageUtils').logAdsThreadListImpression(p);var u=o(p);if(u)return i._("{name}: {conversation_snippet}",[i.param('name',u),i.param('conversation_snippet',t)]);if(p.snippet_sender===q){if(!s)return t;return i._("You: {conversation_snippet}",[i.param('conversation_snippet',t)]);}if(c('MercuryIDs').isCanonical(p.thread_id)&&!this.props.shouldAlwaysRenderSender)return t;var v=this.props.participants.get(p.snippet_sender);if(!v)return t;var w=v.short_name||v.name;if(p){var x=p.custom_nickname?p.custom_nickname:null,y=c('MercuryIDs').getUserIDFromParticipantID(v.id);if(x&&y&&x[y])w=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:x[y]});}if(!w)return t;return i._("{name}: {conversation_snippet}",[i.param('name',w),i.param('conversation_snippet',t)]);};m.prototype.$MercuryThreadSnippet3=function(p){if(p&&p.startsWith('?OTR'))return i._("[encrypted message]");if(p)return c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p.replace(/\r\n|[\r\n]/g,' ')});var q=this.props.thread;if(n(q))return c('React').createElement(c('MercuryAttachmentSnippet.react'),{thread:q,viewer:this.props.viewer});return null;};function m(){j.apply(this,arguments);}m.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,shouldAlwaysRenderSender:l.bool,shouldRenderYou:l.bool,thread:l.object.isRequired,viewer:l.string.isRequired};function n(p){return !!(p.snippet_attachments&&p.snippet_attachments.length>0);}function o(p){if(p&&p.snippet_attachments&&p.snippet_attachments[0]&&p.snippet_attachments[0].share&&p.snippet_attachments[0].share.target&&p.snippet_attachments[0].share.target.genie_name)return p.snippet_attachments[0].share.target.genie_name;return null;}f.exports=m;}),null);
__d('MercurySearchSnippetResults',['MessengerEnvironment','MercuryAPIArgsSource','MercuryIDs','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){var h=c('MessengerEnvironment').messengerui?c('MercuryAPIArgsSource').MESSENGER:c('MercuryAPIArgsSource').WEBMESSENGER,i={},j={},k=null,l=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,m=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_LIMIT,n=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_MORE;function o(x){'use strict';this.$MercurySearchSnippetResults1=x;this.$MercurySearchSnippetResults2=c('MercuryServerPayloadPreprocessor').getForFBID(x);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_snippets.php':{request_user_id:x,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(y){this.handleUpdate(y);}.bind(this)}});this.$MercurySearchSnippetResults3=c('MercuryThreadIDMap').getForFBID(x);}o.prototype.getFBID=function(){'use strict';return this.$MercurySearchSnippetResults1;};o.prototype.getThreadIDMap=function(){'use strict';return this.$MercurySearchSnippetResults3;};o.prototype.getAllThreadSearchResults=function(x,y){'use strict';if(x)p(this.$MercurySearchSnippetResults1,x,m,0,y);};o.prototype.getAllThreadSearchMoreResults=function(x,y){'use strict';if(x){var z=i[x];if(z){var aa=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,n,aa,y);}}};o.prototype.getSingleThreadSearchResults=function(x,y,z){'use strict';if(!x||!y)return;q.call(this,x,y,l,0,z);};o.prototype.getSingleThreadSearchMoreResults=function(x,y,z){'use strict';if(!x||!y)return;if(!j[y])return;var aa=j[y][x];if(aa){var ba=aa.num_total_snippets,ca=aa.snippets_cbm.getCurrentArraySize(),da=ba-ca;if(da>0){var ea=da>n?n:da;q.call(this,x,y,ea,ca,z);}}};o.prototype.countSnippetsMatchingQueryInThread=function(x,y){'use strict';var z=j[y][x];if(z)return z.num_total_snippets;};o.prototype.findIndexOfSnippet=function(x,y,z,aa){'use strict';var ba=v(x,y),ca=ba.getAllResources();for(var da=0;da<ca.length;da++)if(z===ca[da].message_id)return da;};o.prototype.findSnippetAtIndex=function(x,y,z,aa){'use strict';s(x,y,z);t.call(this,x,y,z,aa);};o.prototype.handleUpdate=function(x){'use strict';if(x.mercury_payload)this.$MercurySearchSnippetResults2.handleUpdate(x.mercury_payload);var y=x.search_snippets||{};Object.keys(y).filter(function(oa){return !!y[oa];}).forEach(function(oa){Object.keys(y[oa]).forEach(function(pa){if(!y[oa][pa].snippets)return;y[oa][pa].snippets.forEach(function(qa){qa.matched_keywords=r(qa.matched_keywords);});});});var z=x.offset,aa=[];for(var ba in y){var ca=y[ba];for(var da in ca){var ea=ca[da],fa=x.other_user_fbid||x.thread_fbid,ga=this.$MercurySearchSnippetResults3.getClientIDFromServerIDNow(da),ha=ea.snippets,ia=v(ba,ga),ja=ia.getCurrentArraySize();if(!fa){aa.push(ga);if(ja)continue;}else if(z!=ja)continue;var ka=j[ga][ba];ka.num_total_snippets=ea.num_total_snippets;var la=ha?ha.length:0;if(la>0)ia.addResourcesWithoutSorting(ha,ja);if(!fa||x.limit>la)if(ia.getCurrentArraySize()==ka.num_total_snippets)ia.setReachedEndOfArray();}if(!fa){var ma=u(ba),na=ma.getCurrentArraySize();if(z==na){ma.addResourcesWithoutSorting(aa,na);if(x.limit>aa.length)ma.setReachedEndOfArray();}}}};function p(x,y,z,aa,ba){if(k)if(!k.thread_id){var ca=u(k.query);ca.unsubscribe(k.subscriber_id);k=null;}var ca=u(y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(ha){var ia={};for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=j[ka][y];ia[ka]={num_total_snippets:la.num_total_snippets,snippets:la.snippets_cbm.getAllResources()};}var ma=ca.hasReachedEndOfArray();ba(ia,ma);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:y,thread_id:null,subscriber_id:ea};var ga={query:y,offset:aa,limit:z+1,snippetLimit:l};ga.identifier='thread_fbid';w(ga,x);}}function q(x,y,z,aa,ba){if(k)if(k.thread_id){var ca=v(k.query,k.thread_id);ca.unsubscribe(k.subscriber_id);k=null;}var ca=v(x,y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(){var ka=ca.getAllResources(),la=j[y][x].num_total_snippets;ba(ka,la);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:x,thread_id:y,subscriber_id:ea};var ga={query:x,snippetOffset:aa,snippetLimit:z},ha=this.getThreadIDMap().getServerIDFromClientIDNow(y),ia=c('MercuryIDs').tokenize(y),ja=ia.type;if(ja=='user'){ga.other_user_fbid=ha;}else ga.thread_fbid=ha;ga.identifier='thread_fbid';w(ga,this.getFBID());}}function r(x){if(x instanceof Array){var y={};for(var z=0;z<x.length;z++)y[z.toString()]=x[z];return y;}else return x;}function s(x,y,z){}function t(x,y,z,aa){var ba=j[y][x],ca=ba.snippets_cbm.getAllResources(),da=ba.num_total_snippets,ea=ca.length;if(z<ea){aa(ca[z].message_id);return;}var fa=da-ea,ga=fa>n?n:fa;q.call(this,x,y,ga,ea,function(ha,ia){t.call(this,x,y,z,aa);});}function u(x){if(!i[x])i[x]=new (c('RangedCallbackManager'))();return i[x];}function v(x,y){if(!j[y])j[y]={};var z=j[y][x];if(!z){z={num_total_snippets:-1,snippets_cbm:new (c('RangedCallbackManager'))()};j[y][x]=z;}return z.snippets_cbm;}function w(x,y){x.client=h;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_snippets.php',x,null,y);}Object.assign(o,c('MercurySingletonMixin'));f.exports=o;}),null);
__d('StickersStoreController',['cx','Bootloader','DialogFitHeight','DOM','LayerAutoFocus','LayerFadeOnHide','LayerHideOnEscape','PureStoreBasedStateMixin','React','ReactDOM','StickersActions','StickersDispatcher','StickersStateStore','XUIDialog.react','XUIDialogBody.react','XUISpinner.react','isSocialPlugin','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=688,k=320,l=null,m=c('React').createClass({displayName:'StoreLayer',mixins:[c('PureStoreBasedStateMixin')(c('StickersStateStore'))],propTypes:{isComposer:i.bool,onToggle:i.func.isRequired,shown:i.bool.isRequired},getDefaultProps:function r(){return {isComposer:false};},statics:{calculateState:function r(){return {packID:c('StickersStateStore').getState().get('storePackID')};}},getInitialState:function r(){return {renderStore:function s(){return c('React').createElement('div',{className:"_5r5e"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'large'}));}};},componentWillMount:function r(){c('StickersDispatcher').explicitlyRegisterStores([c('StickersStateStore')]);},shouldComponentUpdate:function r(s){return !!s.shown;},componentDidMount:function r(){c('Bootloader').loadModules(["StickersStore.react","RelayRootContainer","StickersStorePackListRoute","StickersStorePackDetailRoute"],function(s,t,u,v){this.setState({renderStore:function(){var w=this.state.packID?new v({packID:this.state.packID}):new u();return c('React').createElement(t,{Component:s,route:w,renderFetched:function(x){return c('React').createElement(s,babelHelpers['extends']({},x,{isComposer:this.props.isComposer,packID:this.state.packID,shown:this.props.shown}));}.bind(this)});}.bind(this)});}.bind(this),'StickersStoreController');},_onToggle:function r(s){c('requestAnimationFrame')(function(){return this.props.onToggle(s);}.bind(this));},render:function r(){var s=c('isSocialPlugin')()&&document.body.offsetWidth<j?k:j;return c('React').createElement(c('XUIDialog.react'),{behaviors:{DialogFitHeight:c('DialogFitHeight'),LayerAutoFocus:c('LayerAutoFocus'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},onToggle:this._onToggle,shown:this.props.shown,width:s},c('React').createElement(c('XUIDialogBody.react'),{className:"_5rq- autofocus"},this.state.renderStore()));}}),n=function r(s){if(!l){l=c('DOM').create('div');c('DOM').appendContent(document.body,l);}c('ReactDOM').render(c('React').createElement(m,{isComposer:s,onToggle:p,shown:true}),l);},o=function r(){if(!l)return;c('ReactDOM').render(c('React').createElement(m,{shown:false,onToggle:p}),l);},p=function r(s){s?n():o();},q={showStore:function r(s,t){c('StickersActions').selectStorePack(s);n(!!t);}};f.exports=q;}),null);